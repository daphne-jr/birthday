"use strict";(self.webpackChunkbirthday=self.webpackChunkbirthday||[]).push([[14],{3066:(e,t,n)=>{var r=n(7294),i=n(7462),a=n(4925),s=n(4942),o=n(1413),u=n(3433),l=n(5671),c=n(3144),d=n(7326),f=n(9340),g=n(8557),v=n(344),h=n(334),m="RC_FORM_INTERNAL_HOOKS",p=function(){(0,h.ZP)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")};const F=r.createContext({getFieldValue:p,getFieldsValue:p,getFieldError:p,getFieldWarning:p,getFieldsError:p,isFieldsTouched:p,isFieldTouched:p,isFieldValidating:p,isFieldsValidating:p,resetFields:p,setFields:p,setFieldsValue:p,validateFields:p,submit:p,getInternalHooks:function(){return p(),{dispatch:p,initEntityValue:p,registerField:p,useSubscribe:p,setInitialValues:p,setCallbacks:p,getFields:p,setValidateMessages:p,setPreserve:p,getInitialValue:p}}});function y(e){return null==e?[]:Array.isArray(e)?e:[e]}var Z=n(7757),V=n.n(Z),b=n(5861),k=n(5715),E="'${name}' is not a valid ${type}",P={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:E,method:E,array:E,object:E,number:E,date:E,boolean:E,integer:E,float:E,regexp:E,email:E,url:E,hex:E},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},w=n(1002),C=n(8306),x=n(8880);function N(e){return y(e)}function M(e,t){return(0,C.Z)(e,t)}function I(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(0,x.Z)(e,t,n,r);return i}function $(e,t){var n={};return t.forEach((function(t){var r=M(e,t);n=I(n,t,r)})),n}function R(e,t){return e&&e.some((function(e){return T(e,t)}))}function A(e){return"object"===(0,w.Z)(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function O(e,t){var n=Array.isArray(e)?(0,u.Z)(e):(0,o.Z)({},e);return t?(Object.keys(t).forEach((function(e){var r=n[e],i=t[e],a=A(r)&&A(i);n[e]=a?O(r,i||{}):i})),n):n}function U(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return O(e,t)}),e)}function T(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,n){return t[n]===e}))}function j(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&"object"===(0,w.Z)(t.target)&&e in t.target?t.target[e]:t}function L(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var i=e[t],a=t-n;return a>0?[].concat((0,u.Z)(e.slice(0,n)),[i],(0,u.Z)(e.slice(n,t)),(0,u.Z)(e.slice(t+1,r))):a<0?[].concat((0,u.Z)(e.slice(0,t)),(0,u.Z)(e.slice(t+1,n+1)),[i],(0,u.Z)(e.slice(n+1,r))):e}var S=k.Z;function _(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}function H(e,t,n,r,i){return D.apply(this,arguments)}function D(){return(D=(0,b.Z)(V().mark((function e(t,n,i,a,l){var c,d,f,g,v,h,m,p;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(c=(0,o.Z)({},i)).ruleIndex,d=null,c&&"array"===c.type&&c.defaultField&&(d=c.defaultField,delete c.defaultField),f=new S((0,s.Z)({},t,[c])),g=U({},P,a.validateMessages),f.messages(g),v=[],e.prev=8,e.next=11,Promise.resolve(f.validate((0,s.Z)({},t,n),(0,o.Z)({},a)));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),e.t0.errors?v=e.t0.errors.map((function(e,t){var n=e.message;return r.isValidElement(n)?r.cloneElement(n,{key:"error_".concat(t)}):n})):(console.error(e.t0),v=[g.default]);case 16:if(v.length||!d){e.next=21;break}return e.next=19,Promise.all(n.map((function(e,n){return H("".concat(t,".").concat(n),e,d,a,l)})));case 19:return h=e.sent,e.abrupt("return",h.reduce((function(e,t){return[].concat((0,u.Z)(e),(0,u.Z)(t))}),[]));case 21:return m=(0,o.Z)((0,o.Z)({},i),{},{name:t,enum:(i.enum||[]).join(", ")},l),p=v.map((function(e){return"string"==typeof e?_(e,m):e})),e.abrupt("return",p);case 24:case"end":return e.stop()}}),e,null,[[8,13]])})))).apply(this,arguments)}function W(){return(W=(0,b.Z)(V().mark((function e(t){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,(0,u.Z)(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=(0,b.Z)(V().mark((function e(t){var n;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.errors.length&&e([r]),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=["name"],K=[];function J(e,t,n,r,i,a){return"function"==typeof e?e(t,n,"source"in a?{source:a.source}:{}):r!==i}var Y=function(e){(0,f.Z)(n,e);var t=(0,g.Z)(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this,e)).state={resetCount:0},i.cancelRegisterFunc=null,i.mounted=!1,i.touched=!1,i.dirty=!1,i.validatePromise=null,i.prevValidating=void 0,i.errors=K,i.warnings=K,i.cancelRegister=function(){var e=i.props,t=e.preserve,n=e.isListField,r=e.name;i.cancelRegisterFunc&&i.cancelRegisterFunc(n,t,N(r)),i.cancelRegisterFunc=null},i.getNamePath=function(){var e=i.props,t=e.name,n=e.fieldContext.prefixName,r=void 0===n?[]:n;return void 0!==t?[].concat((0,u.Z)(r),(0,u.Z)(t)):[]},i.getRules=function(){var e=i.props,t=e.rules,n=void 0===t?[]:t,r=e.fieldContext;return n.map((function(e){return"function"==typeof e?e(r):e}))},i.refresh=function(){i.mounted&&i.setState((function(e){return{resetCount:e.resetCount+1}}))},i.triggerMetaEvent=function(e){var t=i.props.onMetaChange;null==t||t((0,o.Z)((0,o.Z)({},i.getMeta()),{},{destroy:e}))},i.onStoreChange=function(e,t,n){var r=i.props,a=r.shouldUpdate,s=r.dependencies,o=void 0===s?[]:s,u=r.onReset,l=n.store,c=i.getNamePath(),d=i.getValue(e),f=i.getValue(l),g=t&&R(t,c);switch("valueUpdate"===n.type&&"external"===n.source&&d!==f&&(i.touched=!0,i.dirty=!0,i.validatePromise=null,i.errors=K,i.warnings=K,i.triggerMetaEvent()),n.type){case"reset":if(!t||g)return i.touched=!1,i.dirty=!1,i.validatePromise=null,i.errors=K,i.warnings=K,i.triggerMetaEvent(),null==u||u(),void i.refresh();break;case"remove":if(a)return void i.reRender();break;case"setField":if(g){var v=n.data;return"touched"in v&&(i.touched=v.touched),"validating"in v&&!("originRCField"in v)&&(i.validatePromise=v.validating?Promise.resolve([]):null),"errors"in v&&(i.errors=v.errors||K),"warnings"in v&&(i.warnings=v.warnings||K),i.dirty=!0,i.triggerMetaEvent(),void i.reRender()}if(a&&!c.length&&J(a,e,l,d,f,n))return void i.reRender();break;case"dependenciesUpdate":if(o.map(N).some((function(e){return R(n.relatedFields,e)})))return void i.reRender();break;default:if(g||(!o.length||c.length||a)&&J(a,e,l,d,f,n))return void i.reRender()}!0===a&&i.reRender()},i.validateRules=function(e){var t=i.getNamePath(),n=i.getValue(),r=Promise.resolve().then((function(){if(!i.mounted)return[];var a=i.props,s=a.validateFirst,l=void 0!==s&&s,c=a.messageVariables,d=(e||{}).triggerName,f=i.getRules();d&&(f=f.filter((function(e){var t=e.validateTrigger;return!t||y(t).includes(d)})));var g=function(e,t,n,r,i,a){var s,u=e.join("."),l=n.map((function(e,t){var n=e.validator,r=(0,o.Z)((0,o.Z)({},e),{},{ruleIndex:t});return n&&(r.validator=function(e,t,r){var i=!1,a=n(e,t,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){(0,h.ZP)(!i,"Your validator function has already return a promise. `callback` will be ignored."),i||r.apply(void 0,t)}))}));i=a&&"function"==typeof a.then&&"function"==typeof a.catch,(0,h.ZP)(i,"`callback` is deprecated. Please return a promise instead."),i&&a.then((function(){r()})).catch((function(e){r(e||" ")}))}),r})).sort((function(e,t){var n=e.warningOnly,r=e.ruleIndex,i=t.warningOnly,a=t.ruleIndex;return!!n==!!i?r-a:n?1:-1}));if(!0===i)s=new Promise(function(){var e=(0,b.Z)(V().mark((function e(n,i){var s,o,c;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=0;case 1:if(!(s<l.length)){e.next=12;break}return o=l[s],e.next=5,H(u,t,o,r,a);case 5:if(!(c=e.sent).length){e.next=9;break}return i([{errors:c,rule:o}]),e.abrupt("return");case 9:s+=1,e.next=1;break;case 12:n([]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var c=l.map((function(e){return H(u,t,e,r,a).then((function(t){return{errors:t,rule:e}}))}));s=(i?function(e){return q.apply(this,arguments)}(c):function(e){return W.apply(this,arguments)}(c)).then((function(e){return Promise.reject(e)}))}return s.catch((function(e){return e})),s}(t,n,f,e,l,c);return g.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;if(i.validatePromise===r){i.validatePromise=null;var t=[],n=[];e.forEach((function(e){var r=e.rule.warningOnly,i=e.errors,a=void 0===i?K:i;r?n.push.apply(n,(0,u.Z)(a)):t.push.apply(t,(0,u.Z)(a))})),i.errors=t,i.warnings=n,i.triggerMetaEvent(),i.reRender()}})),g}));return i.validatePromise=r,i.dirty=!0,i.errors=K,i.warnings=K,i.triggerMetaEvent(),i.reRender(),r},i.isFieldValidating=function(){return!!i.validatePromise},i.isFieldTouched=function(){return i.touched},i.isFieldDirty=function(){return!(!i.dirty&&void 0===i.props.initialValue)||void 0!==(0,i.props.fieldContext.getInternalHooks(m).getInitialValue)(i.getNamePath())},i.getErrors=function(){return i.errors},i.getWarnings=function(){return i.warnings},i.isListField=function(){return i.props.isListField},i.isList=function(){return i.props.isList},i.isPreserve=function(){return i.props.preserve},i.getMeta=function(){return i.prevValidating=i.isFieldValidating(),{touched:i.isFieldTouched(),validating:i.prevValidating,errors:i.errors,warnings:i.warnings,name:i.getNamePath()}},i.getOnlyChild=function(e){if("function"==typeof e){var t=i.getMeta();return(0,o.Z)((0,o.Z)({},i.getOnlyChild(e(i.getControlled(),t,i.props.fieldContext))),{},{isFunction:!0})}var n=(0,v.Z)(e);return 1===n.length&&r.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},i.getValue=function(e){var t=i.props.fieldContext.getFieldsValue,n=i.getNamePath();return M(e||t(!0),n)},i.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.props,n=t.trigger,r=t.validateTrigger,a=t.getValueFromEvent,u=t.normalize,l=t.valuePropName,c=t.getValueProps,d=t.fieldContext,f=void 0!==r?r:d.validateTrigger,g=i.getNamePath(),v=d.getInternalHooks,h=d.getFieldsValue,p=v(m),F=p.dispatch,Z=i.getValue(),V=c||function(e){return(0,s.Z)({},l,e)},b=e[n],k=(0,o.Z)((0,o.Z)({},e),V(Z));k[n]=function(){var e;i.touched=!0,i.dirty=!0,i.triggerMetaEvent();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e=a?a.apply(void 0,n):j.apply(void 0,[l].concat(n)),u&&(e=u(e,Z,h(!0))),F({type:"updateValue",namePath:g,value:e}),b&&b.apply(void 0,n)};var E=y(f||[]);return E.forEach((function(e){var t=k[e];k[e]=function(){t&&t.apply(void 0,arguments);var n=i.props.rules;n&&n.length&&F({type:"validateField",namePath:g,triggerName:e})}})),k},e.fieldContext&&(0,(0,e.fieldContext.getInternalHooks)(m).initEntityValue)((0,d.Z)(i)),i}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(m).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,i=this.getOnlyChild(n),a=i.child;return i.isFunction?e=a:r.isValidElement(a)?e=r.cloneElement(a,this.getControlled(a.props)):((0,h.ZP)(!a,"`children` of Field is not validate ReactElement."),e=a),r.createElement(r.Fragment,{key:t},e)}}]),n}(r.Component);Y.contextType=F,Y.defaultProps={trigger:"onChange",valuePropName:"value"};const B=function(e){var t=e.name,n=(0,a.Z)(e,z),s=r.useContext(F),o=void 0!==t?N(t):void 0,u="keep";return n.isListField||(u="_".concat((o||[]).join("_"))),r.createElement(Y,(0,i.Z)({key:u,name:o},n,{fieldContext:s}))},G=r.createContext(null);var Q=n(9439),X="__@field_split__";function ee(e){return e.map((function(e){return"".concat((0,w.Z)(e),":").concat(e)})).join(X)}const te=function(){function e(){(0,l.Z)(this,e),this.kvs=new Map}return(0,c.Z)(e,[{key:"set",value:function(e,t){this.kvs.set(ee(e),t)}},{key:"get",value:function(e){return this.kvs.get(ee(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(ee(e))}},{key:"map",value:function(e){return(0,u.Z)(this.kvs.entries()).map((function(t){var n=(0,Q.Z)(t,2),r=n[0],i=n[1],a=r.split(X);return e({key:a.map((function(e){var t=e.match(/^([^:]*):(.*)$/),n=(0,Q.Z)(t,3),r=n[1],i=n[2];return"number"===r?Number(i):i})),value:i})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}();var ne=["name","errors"],re=(0,c.Z)((function e(t){var n=this;(0,l.Z)(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(e){return e===m?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue}):((0,h.ZP)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){n.subscribable=e},this.setInitialValues=function(e,t){n.initialValues=e||{},t&&(n.store=U({},e,n.store))},this.getInitialValue=function(e){return M(n.initialValues,e)},this.setCallbacks=function(e){n.callbacks=e},this.setValidateMessages=function(e){n.validateMessages=e},this.setPreserve=function(e){n.preserve=e},this.timeoutId=null,this.warningUnhooked=function(){},this.getFieldEntities=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new te;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=N(e);return t.get(n)||{INVALIDATE_NAME_PATH:N(e)}}))},this.getFieldsValue=function(e,t){if(n.warningUnhooked(),!0===e&&!t)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),i=[];return r.forEach((function(n){var r,a="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(e||!(null===(r=n.isListField)||void 0===r?void 0:r.call(n)))if(t){var s="getMeta"in n?n.getMeta():null;t(s)&&i.push(a)}else i.push(a)})),$(n.store,i.map(N))},this.getFieldValue=function(e){n.warningUnhooked();var t=N(e);return M(n.store,t)},this.getFieldsError=function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors(),warnings:t.getWarnings()}:{name:N(e[n]),errors:[],warnings:[]}}))},this.getFieldError=function(e){n.warningUnhooked();var t=N(e);return n.getFieldsError([t])[0].errors},this.getFieldWarning=function(e){n.warningUnhooked();var t=N(e);return n.getFieldsError([t])[0].warnings},this.isFieldsTouched=function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i,a=t[0],s=t[1],o=!1;0===t.length?i=null:1===t.length?Array.isArray(a)?(i=a.map(N),o=!1):(i=null,o=a):(i=a.map(N),o=s);var l=n.getFieldEntities(!0),c=function(e){return e.isFieldTouched()};if(!i)return o?l.every(c):l.some(c);var d=new te;i.forEach((function(e){d.set(e,[])})),l.forEach((function(e){var t=e.getNamePath();i.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&d.update(n,(function(t){return[].concat((0,u.Z)(t),[e])}))}))}));var f=function(e){return e.some(c)},g=d.map((function(e){return e.value}));return o?g.every(f):g.some(f)},this.isFieldTouched=function(e){return n.warningUnhooked(),n.isFieldsTouched([e])},this.isFieldsValidating=function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(N);return t.some((function(e){var t=e.getNamePath();return R(r,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return n.warningUnhooked(),n.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new te,r=n.getFieldEntities(!0);r.forEach((function(e){var n=e.props.initialValue,r=e.getNamePath();if(void 0!==n){var i=t.get(r)||new Set;i.add({entity:e,value:n}),t.set(r,i)}}));var i,a=function(r){r.forEach((function(r){if(void 0!==r.props.initialValue){var i=r.getNamePath();if(void 0!==n.getInitialValue(i))(0,h.ZP)(!1,"Form already set 'initialValues' with path '".concat(i.join("."),"'. Field can not overwrite it."));else{var a=t.get(i);if(a&&a.size>1)(0,h.ZP)(!1,"Multiple Field with path '".concat(i.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(a){var s=n.getFieldValue(i);e.skipExist&&void 0!==s||(n.store=I(n.store,i,(0,u.Z)(a)[0].value))}}}}))};e.entities?i=e.entities:e.namePathList?(i=[],e.namePathList.forEach((function(e){var n,r=t.get(e);r&&(n=i).push.apply(n,(0,u.Z)((0,u.Z)(r).map((function(e){return e.entity}))))}))):i=r,a(i)},this.resetFields=function(e){n.warningUnhooked();var t=n.store;if(!e)return n.store=U({},n.initialValues),n.resetWithFieldInitialValue(),void n.notifyObservers(t,null,{type:"reset"});var r=e.map(N);r.forEach((function(e){var t=n.getInitialValue(e);n.store=I(n.store,e,t)})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"})},this.setFields=function(e){n.warningUnhooked();var t=n.store;e.forEach((function(e){var r=e.name,i=(e.errors,(0,a.Z)(e,ne)),s=N(r);"value"in i&&(n.store=I(n.store,s,i.value)),n.notifyObservers(t,[s],{type:"setField",data:e})}))},this.getFields=function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=e.getMeta(),i=(0,o.Z)((0,o.Z)({},r),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(i,"originRCField",{value:!0}),i}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===M(n.store,r)&&(n.store=I(n.store,r,t))}},this.registerField=function(e){if(n.fieldEntities.push(e),void 0!==e.props.initialValue){var t=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(t,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e}));var a=void 0!==r?r:n.preserve;if(!1===a&&(!t||i.length>1)){var s=e.getNamePath(),o=t?void 0:M(n.initialValues,s);if(s.length&&n.getFieldValue(s)!==o&&n.fieldEntities.every((function(e){return!T(e.getNamePath(),s)}))){var u=n.store;n.store=I(u,s,o,!0),n.notifyObservers(u,[s],{type:"remove"}),n.triggerDependenciesUpdate(u,s)}}}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var i=e.namePath,a=e.triggerName;n.validateFields([i],{triggerName:a})}},this.notifyObservers=function(e,t,r){if(n.subscribable){var i=(0,o.Z)((0,o.Z)({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,i)}))}else n.forceRootUpdate()},this.triggerDependenciesUpdate=function(e,t){var r=n.getDependencyChildrenFields(t);return r.length&&n.validateFields(r),n.notifyObservers(e,r,{type:"dependenciesUpdate",relatedFields:[t].concat((0,u.Z)(r))}),r},this.updateValue=function(e,t){var r=N(e),i=n.store;n.store=I(n.store,r,t),n.notifyObservers(i,[r],{type:"valueUpdate",source:"internal"});var a=n.triggerDependenciesUpdate(i,r),s=n.callbacks.onValuesChange;s&&s($(n.store,[r]),n.getFieldsValue()),n.triggerOnFieldsChange([r].concat((0,u.Z)(a)))},this.setFieldsValue=function(e){n.warningUnhooked();var t=n.store;e&&(n.store=U(n.store,e)),n.notifyObservers(t,null,{type:"valueUpdate",source:"external"})},this.getDependencyChildrenFields=function(e){var t=new Set,r=[],i=new te;return n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=N(t);i.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))})),function e(n){(i.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var i=n.getNamePath();n.isFieldDirty()&&i.length&&(r.push(i),e(i))}}))}(e),r},this.triggerOnFieldsChange=function(e,t){var r=n.callbacks.onFieldsChange;if(r){var i=n.getFields();if(t){var a=new te;t.forEach((function(e){var t=e.name,n=e.errors;a.set(t,n)})),i.forEach((function(e){e.errors=a.get(e.name)||e.errors}))}r(i.filter((function(t){var n=t.name;return R(e,n)})),i)}},this.validateFields=function(e,t){n.warningUnhooked();var r=!!e,i=r?e.map(N):[],a=[];n.getFieldEntities(!0).forEach((function(s){if(r||i.push(s.getNamePath()),(null==t?void 0:t.recursive)&&r){var l=s.getNamePath();l.every((function(t,n){return e[n]===t||void 0===e[n]}))&&i.push(l)}if(s.props.rules&&s.props.rules.length){var c=s.getNamePath();if(!r||R(i,c)){var d=s.validateRules((0,o.Z)({validateMessages:(0,o.Z)((0,o.Z)({},P),n.validateMessages)},t));a.push(d.then((function(){return{name:c,errors:[],warnings:[]}})).catch((function(e){var t=[],n=[];return e.forEach((function(e){var r=e.rule.warningOnly,i=e.errors;r?n.push.apply(n,(0,u.Z)(i)):t.push.apply(t,(0,u.Z)(i))})),t.length?Promise.reject({name:c,errors:t,warnings:n}):{name:c,errors:t,warnings:n}})))}}}));var s=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(i,a){e.forEach((function(e,s){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[s]=e,n>0||(t&&a(r),i(r))}))}))})):Promise.resolve([])}(a);n.lastValidatePromise=s,s.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var l=s.then((function(){return n.lastValidatePromise===s?Promise.resolve(n.getFieldsValue(i)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(i),errorFields:t,outOfDate:n.lastValidatePromise!==s})}));return l.catch((function(e){return e})),l},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(e){console.error(e)}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t}));const ie=function(e){var t=r.useRef(),n=r.useState({}),i=(0,Q.Z)(n,2)[1];if(!t.current)if(e)t.current=e;else{var a=new re((function(){i({})}));t.current=a.getForm()}return[t.current]};var ae=r.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}});const se=ae;var oe=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"];const ue=function(e,t){var n=e.name,s=e.initialValues,l=e.fields,c=e.form,d=e.preserve,f=e.children,g=e.component,v=void 0===g?"form":g,h=e.validateMessages,p=e.validateTrigger,y=void 0===p?"onChange":p,Z=e.onValuesChange,V=e.onFieldsChange,b=e.onFinish,k=e.onFinishFailed,E=(0,a.Z)(e,oe),P=r.useContext(se),C=ie(c),x=(0,Q.Z)(C,1)[0],N=x.getInternalHooks(m),M=N.useSubscribe,I=N.setInitialValues,$=N.setCallbacks,R=N.setValidateMessages,A=N.setPreserve;r.useImperativeHandle(t,(function(){return x})),r.useEffect((function(){return P.registerForm(n,x),function(){P.unregisterForm(n)}}),[P,x,n]),R((0,o.Z)((0,o.Z)({},P.validateMessages),h)),$({onValuesChange:Z,onFieldsChange:function(e){if(P.triggerFormChange(n,e),V){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];V.apply(void 0,[e].concat(r))}},onFinish:function(e){P.triggerFormFinish(n,e),b&&b(e)},onFinishFailed:k}),A(d);var O=r.useRef(null);I(s,!O.current),O.current||(O.current=!0);var U=f,T="function"==typeof f;T&&(U=f(x.getFieldsValue(!0),x)),M(!T);var j=r.useRef();r.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==(0,w.Z)(e)||"object"!==(0,w.Z)(t))return!1;var n=Object.keys(e),r=Object.keys(t),i=new Set([].concat((0,u.Z)(n),(0,u.Z)(r)));return(0,u.Z)(i).every((function(n){var r=e[n],i=t[n];return"function"==typeof r&&"function"==typeof i||r===i}))})(j.current||[],l||[])||x.setFields(l||[]),j.current=l}),[l,x]);var L=r.useMemo((function(){return(0,o.Z)((0,o.Z)({},x),{},{validateTrigger:y})}),[x,y]),S=r.createElement(F.Provider,{value:L},U);return!1===v?S:r.createElement(v,(0,i.Z)({},E,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),x.submit()},onReset:function(e){var t;e.preventDefault(),x.resetFields(),null===(t=E.onReset)||void 0===t||t.call(E,e)}}),S)};var le=r.forwardRef(ue);le.FormProvider=function(e){var t=e.validateMessages,n=e.onFormChange,i=e.onFormFinish,a=e.children,u=r.useContext(ae),l=r.useRef({});return r.createElement(ae.Provider,{value:(0,o.Z)((0,o.Z)({},u),{},{validateMessages:(0,o.Z)((0,o.Z)({},u.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:l.current}),u.triggerFormChange(e,t)},triggerFormFinish:function(e,t){i&&i(e,{values:t,forms:l.current}),u.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(l.current=(0,o.Z)((0,o.Z)({},l.current),{},(0,s.Z)({},e,t))),u.registerForm(e,t)},unregisterForm:function(e){var t=(0,o.Z)({},l.current);delete t[e],l.current=t,u.unregisterForm(e)}})},a)},le.Field=B,le.List=function(e){var t=e.name,n=e.initialValue,i=e.children,a=e.rules,s=e.validateTrigger,l=r.useContext(F),c=r.useRef({keys:[],id:0}).current,d=r.useMemo((function(){var e=N(l.prefixName)||[];return[].concat((0,u.Z)(e),(0,u.Z)(N(t)))}),[l.prefixName,t]),f=r.useMemo((function(){return(0,o.Z)((0,o.Z)({},l),{},{prefixName:d})}),[l,d]),g=r.useMemo((function(){return{getKey:function(e){var t=d.length,n=e[t];return[c.keys[n],e.slice(t+1)]}}}),[d]);return"function"!=typeof i?((0,h.ZP)(!1,"Form.List only accepts function as children."),null):r.createElement(G.Provider,{value:g},r.createElement(F.Provider,{value:f},r.createElement(B,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:a,validateTrigger:s,initialValue:n,isList:!0},(function(e,t){var n=e.value,r=void 0===n?[]:n,a=e.onChange,s=l.getFieldValue,o=function(){return s(d||[])||[]},f={add:function(e,t){var n=o();t>=0&&t<=n.length?(c.keys=[].concat((0,u.Z)(c.keys.slice(0,t)),[c.id],(0,u.Z)(c.keys.slice(t))),a([].concat((0,u.Z)(n.slice(0,t)),[e],(0,u.Z)(n.slice(t))))):(c.keys=[].concat((0,u.Z)(c.keys),[c.id]),a([].concat((0,u.Z)(n),[e]))),c.id+=1},remove:function(e){var t=o(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(c.keys=c.keys.filter((function(e,t){return!n.has(t)})),a(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=o();e<0||e>=n.length||t<0||t>=n.length||(c.keys=L(c.keys,e,t),a(L(n,e,t)))}}},g=r||[];return Array.isArray(g)||(g=[]),i(g.map((function(e,t){var n=c.keys[t];return void 0===n&&(c.keys[t]=c.id,n=c.keys[t],c.id+=1),{name:t,key:n,isListField:!0}})),f,t)}))))},le.useForm=ie}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdGljL2pzL25wbS5yYy1maWVsZC1mb3JtXzgwM2ZhZTExMjAxZTg5YmQxZGEzLmpzIiwibWFwcGluZ3MiOiJzT0FFV0EsRUFBWSx5QkFFbkJDLEVBQWMsWUFDaEIsRUFBQUMsRUFBQSxLQUFRLEVBQU8sMEVBa0NqQixRQS9CMkIsZ0JBQW9CLENBQzdDQyxjQUFlRixFQUNmRyxlQUFnQkgsRUFDaEJJLGNBQWVKLEVBQ2ZLLGdCQUFpQkwsRUFDakJNLGVBQWdCTixFQUNoQk8sZ0JBQWlCUCxFQUNqQlEsZUFBZ0JSLEVBQ2hCUyxrQkFBbUJULEVBQ25CVSxtQkFBb0JWLEVBQ3BCVyxZQUFhWCxFQUNiWSxVQUFXWixFQUNYYSxlQUFnQmIsRUFDaEJjLGVBQWdCZCxFQUNoQmUsT0FBUWYsRUFDUmdCLGlCQUFrQixXQUVoQixPQURBaEIsSUFDTyxDQUNMaUIsU0FBVWpCLEVBQ1ZrQixnQkFBaUJsQixFQUNqQm1CLGNBQWVuQixFQUNmb0IsYUFBY3BCLEVBQ2RxQixpQkFBa0JyQixFQUNsQnNCLGFBQWN0QixFQUNkdUIsVUFBV3ZCLEVBQ1h3QixvQkFBcUJ4QixFQUNyQnlCLFlBQWF6QixFQUNiMEIsZ0JBQWlCMUIsTUNuQ2hCLFNBQVMsRUFBUTJCLEdBQ3RCLE9BQUlBLE1BQUFBLEVBQ0ssR0FHRkMsTUFBTUMsUUFBUUYsR0FBU0EsRUFBUSxDQUFDQSxHLDJDQ0xyQ0csRUFBZSxtQ0FDUkMsRUFBMEIsQ0FDbkNDLFFBQVMsc0NBQ1RDLFNBQVUsd0JBQ1ZDLEtBQU0scUNBQ05DLFdBQVksNEJBQ1pDLEtBQU0sQ0FDSkMsT0FBUSx1Q0FDUkMsTUFBTyx3Q0FDUEMsUUFBUyw2QkFFWEMsTUFBTyxDQUNMQyxPQUFRWCxFQUNSWSxPQUFRWixFQUNSYSxNQUFPYixFQUNQYyxPQUFRZCxFQUNSZSxPQUFRZixFQUNSTSxLQUFNTixFQUNOZ0IsUUFBU2hCLEVBQ1RpQixRQUFTakIsRUFDVGtCLE1BQU9sQixFQUNQbUIsT0FBUW5CLEVBQ1JvQixNQUFPcEIsRUFDUHFCLElBQUty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QUcvQkMsRUFBWTliLEdBQVMsR0FVekIsT0FSS0MsTUFBTUMsUUFBUTRiLEtBQ2pCQSxFQUFZLElBT1BuTSxFQUFTbU0sRUFBVXJVLEtBQUksU0FBVXNVLEVBQUlwVSxHQUMxQyxJQUFJaEUsRUFBTWlYLEVBQVdsWCxLQUFLaUUsR0FRMUIsWUFOWWpGLElBQVJpQixJQUNGaVgsRUFBV2xYLEtBQUtpRSxHQUFTaVQsRUFBV0MsR0FDcENsWCxFQUFNaVgsRUFBV2xYLEtBQUtpRSxHQUN0QmlULEVBQVdDLElBQU0sR0FHWixDQUNMM1UsS0FBTXlCLEVBQ05oRSxJQUFLQSxFQUNMZ0gsYUFBYSxNQUViMFEsRUFBWXpMLFNEaEpwQnVLLEdBQVE2QixRQUFVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmlydGhkYXkvLi9ub2RlX21vZHVsZXMvcmMtZmllbGQtZm9ybS9lcy9GaWVsZENvbnRleHQuanMiLCJ3ZWJwYWNrOi8vYmlydGhkYXkvLi9ub2RlX21vZHVsZXMvcmMtZmllbGQtZm9ybS9lcy91dGlscy90eXBlVXRpbC5qcyIsIndlYnBhY2s6Ly9iaXJ0aGRheS8uL25vZGVfbW9kdWxlcy9yYy1maWVsZC1mb3JtL2VzL3V0aWxzL21lc3NhZ2VzLmpzIiwid2VicGFjazovL2JpcnRoZGF5Ly4vbm9kZV9tb2R1bGVzL3JjLWZpZWxkLWZvcm0vZXMvdXRpbHMvdmFsdWVVdGlsLmpzIiwid2VicGFjazovL2JpcnRoZGF5Ly4vbm9kZV9tb2R1bGVzL3JjLWZpZWxkLWZvcm0vZXMvdXRpbHMvdmFsaWRhdGVVdGlsLmpzIiwid2VicGFjazovL2JpcnRoZGF5Ly4vbm9kZV9tb2R1bGVzL3JjLWZpZWxkLWZvcm0vZXMvRmllbGQuanMiLCJ3ZWJwYWNrOi8vYmlydGhkYXkvLi9ub2RlX21vZHVsZXMvcmMtZmllbGQtZm9ybS9lcy9MaXN0Q29udGV4dC5qcyIsIndlYnBhY2s6Ly9iaXJ0aGRheS8uL25vZGVfbW9kdWxlcy9yYy1maWVsZC1mb3JtL2VzL3V0aWxzL05hbWVNYXAuanMiLCJ3ZWJwYWNrOi8vYmlydGhkYXkvLi9ub2RlX21vZHVsZXMvcmMtZmllbGQtZm9ybS9lcy91c2VGb3JtLmpzIiwid2VicGFjazovL2JpcnRoZGF5Ly4vbm9kZV9tb2R1bGVzL3JjLWZpZWxkLWZvcm0vZXMvdXRpbHMvYXN5bmNVdGlsLmpzIiwid2VicGFjazovL2JpcnRoZGF5Ly4vbm9kZV9tb2R1bGVzL3JjLWZpZWxkLWZvcm0vZXMvRm9ybUNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vYmlydGhkYXkvLi9ub2RlX21vZHVsZXMvcmMtZmllbGQtZm9ybS9lcy9Gb3JtLmpzIiwid2VicGFjazovL2JpcnRoZGF5Ly4vbm9kZV9tb2R1bGVzL3JjLWZpZWxkLWZvcm0vZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYmlydGhkYXkvLi9ub2RlX21vZHVsZXMvcmMtZmllbGQtZm9ybS9lcy9MaXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB3YXJuaW5nIGZyb20gXCJyYy11dGlsL2VzL3dhcm5pbmdcIjtcbmV4cG9ydCB2YXIgSE9PS19NQVJLID0gJ1JDX0ZPUk1fSU5URVJOQUxfSE9PS1MnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuXG52YXIgd2FybmluZ0Z1bmMgPSBmdW5jdGlvbiB3YXJuaW5nRnVuYygpIHtcbiAgd2FybmluZyhmYWxzZSwgJ0NhbiBub3QgZmluZCBGb3JtQ29udGV4dC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3Ugd3JhcCBGaWVsZCB1bmRlciBGb3JtLicpO1xufTtcblxudmFyIENvbnRleHQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlQ29udGV4dCh7XG4gIGdldEZpZWxkVmFsdWU6IHdhcm5pbmdGdW5jLFxuICBnZXRGaWVsZHNWYWx1ZTogd2FybmluZ0Z1bmMsXG4gIGdldEZpZWxkRXJyb3I6IHdhcm5pbmdGdW5jLFxuICBnZXRGaWVsZFdhcm5pbmc6IHdhcm5pbmdGdW5jLFxuICBnZXRGaWVsZHNFcnJvcjogd2FybmluZ0Z1bmMsXG4gIGlzRmllbGRzVG91Y2hlZDogd2FybmluZ0Z1bmMsXG4gIGlzRmllbGRUb3VjaGVkOiB3YXJuaW5nRnVuYyxcbiAgaXNGaWVsZFZhbGlkYXRpbmc6IHdhcm5pbmdGdW5jLFxuICBpc0ZpZWxkc1ZhbGlkYXRpbmc6IHdhcm5pbmdGdW5jLFxuICByZXNldEZpZWxkczogd2FybmluZ0Z1bmMsXG4gIHNldEZpZWxkczogd2FybmluZ0Z1bmMsXG4gIHNldEZpZWxkc1ZhbHVlOiB3YXJuaW5nRnVuYyxcbiAgdmFsaWRhdGVGaWVsZHM6IHdhcm5pbmdGdW5jLFxuICBzdWJtaXQ6IHdhcm5pbmdGdW5jLFxuICBnZXRJbnRlcm5hbEhvb2tzOiBmdW5jdGlvbiBnZXRJbnRlcm5hbEhvb2tzKCkge1xuICAgIHdhcm5pbmdGdW5jKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc3BhdGNoOiB3YXJuaW5nRnVuYyxcbiAgICAgIGluaXRFbnRpdHlWYWx1ZTogd2FybmluZ0Z1bmMsXG4gICAgICByZWdpc3RlckZpZWxkOiB3YXJuaW5nRnVuYyxcbiAgICAgIHVzZVN1YnNjcmliZTogd2FybmluZ0Z1bmMsXG4gICAgICBzZXRJbml0aWFsVmFsdWVzOiB3YXJuaW5nRnVuYyxcbiAgICAgIHNldENhbGxiYWNrczogd2FybmluZ0Z1bmMsXG4gICAgICBnZXRGaWVsZHM6IHdhcm5pbmdGdW5jLFxuICAgICAgc2V0VmFsaWRhdGVNZXNzYWdlczogd2FybmluZ0Z1bmMsXG4gICAgICBzZXRQcmVzZXJ2ZTogd2FybmluZ0Z1bmMsXG4gICAgICBnZXRJbml0aWFsVmFsdWU6IHdhcm5pbmdGdW5jXG4gICAgfTtcbiAgfVxufSk7XG5leHBvcnQgZGVmYXVsdCBDb250ZXh0OyIsImV4cG9ydCBmdW5jdGlvbiB0b0FycmF5KHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdO1xufSIsInZhciB0eXBlVGVtcGxhdGUgPSBcIicke25hbWV9JyBpcyBub3QgYSB2YWxpZCAke3R5cGV9XCI7XG5leHBvcnQgdmFyIGRlZmF1bHRWYWxpZGF0ZU1lc3NhZ2VzID0ge1xuICBkZWZhdWx0OiBcIlZhbGlkYXRpb24gZXJyb3Igb24gZmllbGQgJyR7bmFtZX0nXCIsXG4gIHJlcXVpcmVkOiBcIicke25hbWV9JyBpcyByZXF1aXJlZFwiLFxuICBlbnVtOiBcIicke25hbWV9JyBtdXN0IGJlIG9uZSBvZiBbJHtlbnVtfV1cIixcbiAgd2hpdGVzcGFjZTogXCInJHtuYW1lfScgY2Fubm90IGJlIGVtcHR5XCIsXG4gIGRhdGU6IHtcbiAgICBmb3JtYXQ6IFwiJyR7bmFtZX0nIGlzIGludmFsaWQgZm9yIGZvcm1hdCBkYXRlXCIsXG4gICAgcGFyc2U6IFwiJyR7bmFtZX0nIGNvdWxkIG5vdCBiZSBwYXJzZWQgYXMgZGF0ZVwiLFxuICAgIGludmFsaWQ6IFwiJyR7bmFtZX0nIGlzIGludmFsaWQgZGF0ZVwiXG4gIH0sXG4gIHR5cGVzOiB7XG4gICAgc3RyaW5nOiB0eXBlVGVtcGxhdGUsXG4gICAgbWV0aG9kOiB0eXBlVGVtcGxhdGUsXG4gICAgYXJyYXk6IHR5cGVUZW1wbGF0ZSxcbiAgICBvYmplY3Q6IHR5cGVUZW1wbGF0ZSxcbiAgICBudW1iZXI6IHR5cGVUZW1wbGF0ZSxcbiAgICBkYXRlOiB0eXBlVGVtcGxhdGUsXG4gICAgYm9vbGVhbjogdHlwZVRlbXBsYXRlLFxuICAgIGludGVnZXI6IHR5cGVUZW1wbGF0ZSxcbiAgICBmbG9hdDogdHlwZVRlbXBsYXRlLFxuICAgIHJlZ2V4cDogdHlwZVRlbXBsYXRlLFxuICAgIGVtYWlsOiB0eXBlVGVtcGxhdGUsXG4gICAgdXJsOiB0eXBlVGVtcGxhdGUsXG4gICAgaGV4OiB0eXBlVGVtcGxhdGVcbiAgfSxcbiAgc3RyaW5nOiB7XG4gICAgbGVuOiBcIicke25hbWV9JyBtdXN0IGJlIGV4YWN0bHkgJHtsZW59IGNoYXJhY3RlcnNcIixcbiAgICBtaW46IFwiJyR7bmFtZX0nIG11c3QgYmUgYXQgbGVhc3QgJHttaW59IGNoYXJhY3RlcnNcIixcbiAgICBtYXg6IFwiJyR7bmFtZX0nIGNhbm5vdCBiZSBsb25nZXIgdGhhbiAke21heH0gY2hhcmFjdGVyc1wiLFxuICAgIHJhbmdlOiBcIicke25hbWV9JyBtdXN0IGJlIGJldHdlZW4gJHttaW59IGFuZCAke21heH0gY2hhcmFjdGVyc1wiXG4gIH0sXG4gIG51bWJlcjoge1xuICAgIGxlbjogXCInJHtuYW1lfScgbXVzdCBlcXVhbCAke2xlbn1cIixcbiAgICBtaW46IFwiJyR7bmFtZX0nIGNhbm5vdCBiZSBsZXNzIHRoYW4gJHttaW59XCIsXG4gICAgbWF4OiBcIicke25hbWV9JyBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuICR7bWF4fVwiLFxuICAgIHJhbmdlOiBcIicke25hbWV9JyBtdXN0IGJlIGJldHdlZW4gJHttaW59IGFuZCAke21heH1cIlxuICB9LFxuICBhcnJheToge1xuICAgIGxlbjogXCInJHtuYW1lfScgbXVzdCBiZSBleGFjdGx5ICR7bGVufSBpbiBsZW5ndGhcIixcbiAgICBtaW46IFwiJyR7bmFtZX0nIGNhbm5vdCBiZSBsZXNzIHRoYW4gJHttaW59IGluIGxlbmd0aFwiLFxuICAgIG1heDogXCInJHtuYW1lfScgY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiAke21heH0gaW4gbGVuZ3RoXCIsXG4gICAgcmFuZ2U6IFwiJyR7bmFtZX0nIG11c3QgYmUgYmV0d2VlbiAke21pbn0gYW5kICR7bWF4fSBpbiBsZW5ndGhcIlxuICB9LFxuICBwYXR0ZXJuOiB7XG4gICAgbWlzbWF0Y2g6IFwiJyR7bmFtZX0nIGRvZXMgbm90IG1hdGNoIHBhdHRlcm4gJHtwYXR0ZXJufVwiXG4gIH1cbn07IiwiaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5XCI7XG5pbXBvcnQgX3R5cGVvZiBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mXCI7XG5pbXBvcnQgZ2V0IGZyb20gXCJyYy11dGlsL2VzL3V0aWxzL2dldFwiO1xuaW1wb3J0IHNldCBmcm9tIFwicmMtdXRpbC9lcy91dGlscy9zZXRcIjtcbmltcG9ydCB7IHRvQXJyYXkgfSBmcm9tICcuL3R5cGVVdGlsJztcbi8qKlxuICogQ29udmVydCBuYW1lIHRvIGludGVybmFsIHN1cHBvcnRlZCBmb3JtYXQuXG4gKiBUaGlzIGZ1bmN0aW9uIHNob3VsZCBrZWVwIHNpbmNlIHdlIHN0aWxsIHRoaW5raW5nIGlmIG5lZWQgc3VwcG9ydCBsaWtlIGBhLmIuY2AgZm9ybWF0LlxuICogJ2EnID0+IFsnYSddXG4gKiAxMjMgPT4gWzEyM11cbiAqIFsnYScsIDEyM10gPT4gWydhJywgMTIzXVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROYW1lUGF0aChwYXRoKSB7XG4gIHJldHVybiB0b0FycmF5KHBhdGgpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlKHN0b3JlLCBuYW1lUGF0aCkge1xuICB2YXIgdmFsdWUgPSBnZXQoc3RvcmUsIG5hbWVQYXRoKTtcbiAgcmV0dXJuIHZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldFZhbHVlKHN0b3JlLCBuYW1lUGF0aCwgdmFsdWUpIHtcbiAgdmFyIHJlbW92ZUlmVW5kZWZpbmVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTtcbiAgdmFyIG5ld1N0b3JlID0gc2V0KHN0b3JlLCBuYW1lUGF0aCwgdmFsdWUsIHJlbW92ZUlmVW5kZWZpbmVkKTtcbiAgcmV0dXJuIG5ld1N0b3JlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lQnlOYW1lUGF0aExpc3Qoc3RvcmUsIG5hbWVQYXRoTGlzdCkge1xuICB2YXIgbmV3U3RvcmUgPSB7fTtcbiAgbmFtZVBhdGhMaXN0LmZvckVhY2goZnVuY3Rpb24gKG5hbWVQYXRoKSB7XG4gICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoc3RvcmUsIG5hbWVQYXRoKTtcbiAgICBuZXdTdG9yZSA9IHNldFZhbHVlKG5ld1N0b3JlLCBuYW1lUGF0aCwgdmFsdWUpO1xuICB9KTtcbiAgcmV0dXJuIG5ld1N0b3JlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zTmFtZVBhdGgobmFtZVBhdGhMaXN0LCBuYW1lUGF0aCkge1xuICByZXR1cm4gbmFtZVBhdGhMaXN0ICYmIG5hbWVQYXRoTGlzdC5zb21lKGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgcmV0dXJuIG1hdGNoTmFtZVBhdGgocGF0aCwgbmFtZVBhdGgpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gIHJldHVybiBfdHlwZW9mKG9iaikgPT09ICdvYmplY3QnICYmIG9iaiAhPT0gbnVsbCAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSA9PT0gT2JqZWN0LnByb3RvdHlwZTtcbn1cbi8qKlxuICogQ29weSB2YWx1ZXMgaW50byBzdG9yZSBhbmQgcmV0dXJuIGEgbmV3IHZhbHVlcyBvYmplY3RcbiAqICh7IGE6IDEsIGI6IHsgYzogMiB9IH0sIHsgYTogNCwgYjogeyBkOiA1IH0gfSkgPT4geyBhOiA0LCBiOiB7IGM6IDIsIGQ6IDUgfSB9XG4gKi9cblxuXG5mdW5jdGlvbiBpbnRlcm5hbFNldFZhbHVlcyhzdG9yZSwgdmFsdWVzKSB7XG4gIHZhciBuZXdTdG9yZSA9IEFycmF5LmlzQXJyYXkoc3RvcmUpID8gX3RvQ29uc3VtYWJsZUFycmF5KHN0b3JlKSA6IF9vYmplY3RTcHJlYWQoe30sIHN0b3JlKTtcblxuICBpZiAoIXZhbHVlcykge1xuICAgIHJldHVybiBuZXdTdG9yZTtcbiAgfVxuXG4gIE9iamVjdC5rZXlzKHZhbHVlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIHByZXZWYWx1ZSA9IG5ld1N0b3JlW2tleV07XG4gICAgdmFyIHZhbHVlID0gdmFsdWVzW2tleV07IC8vIElmIGJvdGggYXJlIG9iamVjdCAoYnV0IHRhcmdldCBpcyBub3QgYXJyYXkpLCB3ZSB1c2UgcmVjdXJzaW9uIHRvIHNldCBkZWVwIHZhbHVlXG5cbiAgICB2YXIgcmVjdXJzaXZlID0gaXNPYmplY3QocHJldlZhbHVlKSAmJiBpc09iamVjdCh2YWx1ZSk7XG4gICAgbmV3U3RvcmVba2V5XSA9IHJlY3Vyc2l2ZSA/IGludGVybmFsU2V0VmFsdWVzKHByZXZWYWx1ZSwgdmFsdWUgfHwge30pIDogdmFsdWU7XG4gIH0pO1xuICByZXR1cm4gbmV3U3RvcmU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRWYWx1ZXMoc3RvcmUpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlc3RWYWx1ZXMgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIHJlc3RWYWx1ZXNbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIHJlc3RWYWx1ZXMucmVkdWNlKGZ1bmN0aW9uIChjdXJyZW50LCBuZXdTdG9yZSkge1xuICAgIHJldHVybiBpbnRlcm5hbFNldFZhbHVlcyhjdXJyZW50LCBuZXdTdG9yZSk7XG4gIH0sIHN0b3JlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaE5hbWVQYXRoKG5hbWVQYXRoLCBjaGFuZ2VkTmFtZVBhdGgpIHtcbiAgaWYgKCFuYW1lUGF0aCB8fCAhY2hhbmdlZE5hbWVQYXRoIHx8IG5hbWVQYXRoLmxlbmd0aCAhPT0gY2hhbmdlZE5hbWVQYXRoLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBuYW1lUGF0aC5ldmVyeShmdW5jdGlvbiAobmFtZVVuaXQsIGkpIHtcbiAgICByZXR1cm4gY2hhbmdlZE5hbWVQYXRoW2ldID09PSBuYW1lVW5pdDtcbiAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNTaW1pbGFyKHNvdXJjZSwgdGFyZ2V0KSB7XG4gIGlmIChzb3VyY2UgPT09IHRhcmdldCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKCFzb3VyY2UgJiYgdGFyZ2V0IHx8IHNvdXJjZSAmJiAhdGFyZ2V0KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKCFzb3VyY2UgfHwgIXRhcmdldCB8fCBfdHlwZW9mKHNvdXJjZSkgIT09ICdvYmplY3QnIHx8IF90eXBlb2YodGFyZ2V0KSAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gIHZhciB0YXJnZXRLZXlzID0gT2JqZWN0LmtleXModGFyZ2V0KTtcbiAgdmFyIGtleXMgPSBuZXcgU2V0KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc291cmNlS2V5cyksIF90b0NvbnN1bWFibGVBcnJheSh0YXJnZXRLZXlzKSkpO1xuICByZXR1cm4gX3RvQ29uc3VtYWJsZUFycmF5KGtleXMpLmV2ZXJ5KGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgc291cmNlVmFsdWUgPSBzb3VyY2Vba2V5XTtcbiAgICB2YXIgdGFyZ2V0VmFsdWUgPSB0YXJnZXRba2V5XTtcblxuICAgIGlmICh0eXBlb2Ygc291cmNlVmFsdWUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHRhcmdldFZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gc291cmNlVmFsdWUgPT09IHRhcmdldFZhbHVlO1xuICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0R2V0VmFsdWVGcm9tRXZlbnQodmFsdWVQcm9wTmFtZSkge1xuICB2YXIgZXZlbnQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbMV07XG5cbiAgaWYgKGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBfdHlwZW9mKGV2ZW50LnRhcmdldCkgPT09ICdvYmplY3QnICYmIHZhbHVlUHJvcE5hbWUgaW4gZXZlbnQudGFyZ2V0KSB7XG4gICAgcmV0dXJuIGV2ZW50LnRhcmdldFt2YWx1ZVByb3BOYW1lXTtcbiAgfVxuXG4gIHJldHVybiBldmVudDtcbn1cbi8qKlxuICogTW92ZXMgYW4gYXJyYXkgaXRlbSBmcm9tIG9uZSBwb3NpdGlvbiBpbiBhbiBhcnJheSB0byBhbm90aGVyLlxuICpcbiAqIE5vdGU6IFRoaXMgaXMgYSBwdXJlIGZ1bmN0aW9uIHNvIGEgbmV3IGFycmF5IHdpbGwgYmUgcmV0dXJuZWQsIGluc3RlYWRcbiAqIG9mIGFsdGVyaW5nIHRoZSBhcnJheSBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0gYXJyYXkgICAgICAgICBBcnJheSBpbiB3aGljaCB0byBtb3ZlIGFuIGl0ZW0uICAgICAgICAgKHJlcXVpcmVkKVxuICogQHBhcmFtIG1vdmVJbmRleCAgICAgVGhlIGluZGV4IG9mIHRoZSBpdGVtIHRvIG1vdmUuICAgICAgICAgIChyZXF1aXJlZClcbiAqIEBwYXJhbSB0b0luZGV4ICAgICAgIFRoZSBpbmRleCB0byBtb3ZlIGl0ZW0gYXQgbW92ZUluZGV4IHRvLiAocmVxdWlyZWQpXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG1vdmUoYXJyYXksIG1vdmVJbmRleCwgdG9JbmRleCkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gIGlmIChtb3ZlSW5kZXggPCAwIHx8IG1vdmVJbmRleCA+PSBsZW5ndGggfHwgdG9JbmRleCA8IDAgfHwgdG9JbmRleCA+PSBsZW5ndGgpIHtcbiAgICByZXR1cm4gYXJyYXk7XG4gIH1cblxuICB2YXIgaXRlbSA9IGFycmF5W21vdmVJbmRleF07XG4gIHZhciBkaWZmID0gbW92ZUluZGV4IC0gdG9JbmRleDtcblxuICBpZiAoZGlmZiA+IDApIHtcbiAgICAvLyBtb3ZlIGxlZnRcbiAgICByZXR1cm4gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShhcnJheS5zbGljZSgwLCB0b0luZGV4KSksIFtpdGVtXSwgX3RvQ29uc3VtYWJsZUFycmF5KGFycmF5LnNsaWNlKHRvSW5kZXgsIG1vdmVJbmRleCkpLCBfdG9Db25zdW1hYmxlQXJyYXkoYXJyYXkuc2xpY2UobW92ZUluZGV4ICsgMSwgbGVuZ3RoKSkpO1xuICB9XG5cbiAgaWYgKGRpZmYgPCAwKSB7XG4gICAgLy8gbW92ZSByaWdodFxuICAgIHJldHVybiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGFycmF5LnNsaWNlKDAsIG1vdmVJbmRleCkpLCBfdG9Db25zdW1hYmxlQXJyYXkoYXJyYXkuc2xpY2UobW92ZUluZGV4ICsgMSwgdG9JbmRleCArIDEpKSwgW2l0ZW1dLCBfdG9Db25zdW1hYmxlQXJyYXkoYXJyYXkuc2xpY2UodG9JbmRleCArIDEsIGxlbmd0aCkpKTtcbiAgfVxuXG4gIHJldHVybiBhcnJheTtcbn0iLCJpbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheVwiO1xuaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gXCJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvclwiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvclwiO1xuaW1wb3J0IFJhd0FzeW5jVmFsaWRhdG9yIGZyb20gJ2FzeW5jLXZhbGlkYXRvcic7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgd2FybmluZyBmcm9tIFwicmMtdXRpbC9lcy93YXJuaW5nXCI7XG5pbXBvcnQgeyBkZWZhdWx0VmFsaWRhdGVNZXNzYWdlcyB9IGZyb20gJy4vbWVzc2FnZXMnO1xuaW1wb3J0IHsgc2V0VmFsdWVzIH0gZnJvbSAnLi92YWx1ZVV0aWwnOyAvLyBSZW1vdmUgaW5jb3JyZWN0IG9yaWdpbmFsIHRzIGRlZmluZVxuXG52YXIgQXN5bmNWYWxpZGF0b3IgPSBSYXdBc3luY1ZhbGlkYXRvcjtcbi8qKlxuICogUmVwbGFjZSB3aXRoIHRlbXBsYXRlLlxuICogICBgSSdtICR7bmFtZX1gICsgeyBuYW1lOiAnYmFtYm9vJyB9ID0gSSdtIGJhbWJvb1xuICovXG5cbmZ1bmN0aW9uIHJlcGxhY2VNZXNzYWdlKHRlbXBsYXRlLCBrdikge1xuICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZSgvXFwkXFx7XFx3K1xcfS9nLCBmdW5jdGlvbiAoc3RyKSB7XG4gICAgdmFyIGtleSA9IHN0ci5zbGljZSgyLCAtMSk7XG4gICAgcmV0dXJuIGt2W2tleV07XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVJ1bGUoX3gsIF94MiwgX3gzLCBfeDQsIF94NSkge1xuICByZXR1cm4gX3ZhbGlkYXRlUnVsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuLyoqXG4gKiBXZSB1c2UgYGFzeW5jLXZhbGlkYXRvcmAgdG8gdmFsaWRhdGUgdGhlIHZhbHVlLlxuICogQnV0IG9ubHkgY2hlY2sgb25lIHZhbHVlIGluIGEgdGltZSB0byBhdm9pZCBuYW1lUGF0aCB2YWxpZGF0ZSBpc3N1ZS5cbiAqL1xuXG5cbmZ1bmN0aW9uIF92YWxpZGF0ZVJ1bGUoKSB7XG4gIF92YWxpZGF0ZVJ1bGUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihuYW1lLCB2YWx1ZSwgcnVsZSwgb3B0aW9ucywgbWVzc2FnZVZhcmlhYmxlcykge1xuICAgIHZhciBjbG9uZVJ1bGUsIHN1YlJ1bGVGaWVsZCwgdmFsaWRhdG9yLCBtZXNzYWdlcywgcmVzdWx0LCBzdWJSZXN1bHRzLCBrdiwgZmlsbFZhcmlhYmxlUmVzdWx0O1xuICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0Mikge1xuICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2xvbmVSdWxlID0gX29iamVjdFNwcmVhZCh7fSwgcnVsZSk7IC8vIEJ1ZyBvZiBgYXN5bmMtdmFsaWRhdG9yYFxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LWNvbXBvbmVudC9maWVsZC1mb3JtL2lzc3Vlcy8zMTZcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1jb21wb25lbnQvZmllbGQtZm9ybS9pc3N1ZXMvMzEzXG5cbiAgICAgICAgICAgIGRlbGV0ZSBjbG9uZVJ1bGUucnVsZUluZGV4OyAvLyBXZSBzaG91bGQgc3BlY2lhbCBoYW5kbGUgYXJyYXkgdmFsaWRhdGVcblxuICAgICAgICAgICAgc3ViUnVsZUZpZWxkID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKGNsb25lUnVsZSAmJiBjbG9uZVJ1bGUudHlwZSA9PT0gJ2FycmF5JyAmJiBjbG9uZVJ1bGUuZGVmYXVsdEZpZWxkKSB7XG4gICAgICAgICAgICAgIHN1YlJ1bGVGaWVsZCA9IGNsb25lUnVsZS5kZWZhdWx0RmllbGQ7XG4gICAgICAgICAgICAgIGRlbGV0ZSBjbG9uZVJ1bGUuZGVmYXVsdEZpZWxkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YWxpZGF0b3IgPSBuZXcgQXN5bmNWYWxpZGF0b3IoX2RlZmluZVByb3BlcnR5KHt9LCBuYW1lLCBbY2xvbmVSdWxlXSkpO1xuICAgICAgICAgICAgbWVzc2FnZXMgPSBzZXRWYWx1ZXMoe30sIGRlZmF1bHRWYWxpZGF0ZU1lc3NhZ2VzLCBvcHRpb25zLnZhbGlkYXRlTWVzc2FnZXMpO1xuICAgICAgICAgICAgdmFsaWRhdG9yLm1lc3NhZ2VzKG1lc3NhZ2VzKTtcbiAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA4O1xuICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsaWRhdG9yLnZhbGlkYXRlKF9kZWZpbmVQcm9wZXJ0eSh7fSwgbmFtZSwgdmFsdWUpLCBfb2JqZWN0U3ByZWFkKHt9LCBvcHRpb25zKSkpO1xuXG4gICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTY7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEzO1xuICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyW1wiY2F0Y2hcIl0oOCk7XG5cbiAgICAgICAgICAgIGlmIChfY29udGV4dDIudDAuZXJyb3JzKSB7XG4gICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi50MC5lcnJvcnMubWFwKGZ1bmN0aW9uIChfcmVmNCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IF9yZWY0Lm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuICgvLyBXcmFwIFJlYWN0Tm9kZSB3aXRoIGBrZXlgXG5cbiAgICAgICAgICAgICAgICAgIC8qI19fUFVSRV9fKi9cbiAgICAgICAgICAgICAgICAgIFJlYWN0LmlzVmFsaWRFbGVtZW50KG1lc3NhZ2UpID8gLyojX19QVVJFX18qL1JlYWN0LmNsb25lRWxlbWVudChtZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogXCJlcnJvcl9cIi5jb25jYXQoaW5kZXgpXG4gICAgICAgICAgICAgICAgICB9KSA6IG1lc3NhZ2VcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQyLnQwKTtcbiAgICAgICAgICAgICAgcmVzdWx0ID0gW21lc3NhZ2VzLmRlZmF1bHRdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgIGlmICghKCFyZXN1bHQubGVuZ3RoICYmIHN1YlJ1bGVGaWVsZCkpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwodmFsdWUubWFwKGZ1bmN0aW9uIChzdWJWYWx1ZSwgaSkge1xuICAgICAgICAgICAgICByZXR1cm4gdmFsaWRhdGVSdWxlKFwiXCIuY29uY2F0KG5hbWUsIFwiLlwiKS5jb25jYXQoaSksIHN1YlZhbHVlLCBzdWJSdWxlRmllbGQsIG9wdGlvbnMsIG1lc3NhZ2VWYXJpYWJsZXMpO1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgY2FzZSAxOTpcbiAgICAgICAgICAgIHN1YlJlc3VsdHMgPSBfY29udGV4dDIuc2VudDtcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KFwicmV0dXJuXCIsIHN1YlJlc3VsdHMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBlcnJvcnMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocHJldiksIF90b0NvbnN1bWFibGVBcnJheShlcnJvcnMpKTtcbiAgICAgICAgICAgIH0sIFtdKSk7XG5cbiAgICAgICAgICBjYXNlIDIxOlxuICAgICAgICAgICAgLy8gUmVwbGFjZSBtZXNzYWdlIHdpdGggdmFyaWFibGVzXG4gICAgICAgICAgICBrdiA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcnVsZSksIHt9LCB7XG4gICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgIGVudW06IChydWxlLmVudW0gfHwgW10pLmpvaW4oJywgJylcbiAgICAgICAgICAgIH0sIG1lc3NhZ2VWYXJpYWJsZXMpO1xuICAgICAgICAgICAgZmlsbFZhcmlhYmxlUmVzdWx0ID0gcmVzdWx0Lm1hcChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVwbGFjZU1lc3NhZ2UoZXJyb3IsIGt2KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoXCJyZXR1cm5cIiwgZmlsbFZhcmlhYmxlUmVzdWx0KTtcblxuICAgICAgICAgIGNhc2UgMjQ6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1s4LCAxM11dKTtcbiAgfSkpO1xuICByZXR1cm4gX3ZhbGlkYXRlUnVsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVSdWxlcyhuYW1lUGF0aCwgdmFsdWUsIHJ1bGVzLCBvcHRpb25zLCB2YWxpZGF0ZUZpcnN0LCBtZXNzYWdlVmFyaWFibGVzKSB7XG4gIHZhciBuYW1lID0gbmFtZVBhdGguam9pbignLicpOyAvLyBGaWxsIHJ1bGUgd2l0aCBjb250ZXh0XG5cbiAgdmFyIGZpbGxlZFJ1bGVzID0gcnVsZXMubWFwKGZ1bmN0aW9uIChjdXJyZW50UnVsZSwgcnVsZUluZGV4KSB7XG4gICAgdmFyIG9yaWdpblZhbGlkYXRvckZ1bmMgPSBjdXJyZW50UnVsZS52YWxpZGF0b3I7XG5cbiAgICB2YXIgY2xvbmVSdWxlID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBjdXJyZW50UnVsZSksIHt9LCB7XG4gICAgICBydWxlSW5kZXg6IHJ1bGVJbmRleFxuICAgIH0pOyAvLyBSZXBsYWNlIHZhbGlkYXRvciBpZiBuZWVkZWRcblxuXG4gICAgaWYgKG9yaWdpblZhbGlkYXRvckZ1bmMpIHtcbiAgICAgIGNsb25lUnVsZS52YWxpZGF0b3IgPSBmdW5jdGlvbiAocnVsZSwgdmFsLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgaGFzUHJvbWlzZSA9IGZhbHNlOyAvLyBXcmFwIGNhbGxiYWNrIG9ubHkgYWNjZXB0IHdoZW4gcHJvbWlzZSBub3QgcHJvdmlkZWRcblxuICAgICAgICB2YXIgd3JhcHBlZENhbGxiYWNrID0gZnVuY3Rpb24gd3JhcHBlZENhbGxiYWNrKCkge1xuICAgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBXYWl0IGEgdGljayB0byBtYWtlIHN1cmUgcmV0dXJuIHR5cGUgaXMgYSBwcm9taXNlXG4gICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3YXJuaW5nKCFoYXNQcm9taXNlLCAnWW91ciB2YWxpZGF0b3IgZnVuY3Rpb24gaGFzIGFscmVhZHkgcmV0dXJuIGEgcHJvbWlzZS4gYGNhbGxiYWNrYCB3aWxsIGJlIGlnbm9yZWQuJyk7XG5cbiAgICAgICAgICAgIGlmICghaGFzUHJvbWlzZSkge1xuICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9OyAvLyBHZXQgcHJvbWlzZVxuXG5cbiAgICAgICAgdmFyIHByb21pc2UgPSBvcmlnaW5WYWxpZGF0b3JGdW5jKHJ1bGUsIHZhbCwgd3JhcHBlZENhbGxiYWNrKTtcbiAgICAgICAgaGFzUHJvbWlzZSA9IHByb21pc2UgJiYgdHlwZW9mIHByb21pc2UudGhlbiA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgcHJvbWlzZS5jYXRjaCA9PT0gJ2Z1bmN0aW9uJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIDEuIFVzZSBwcm9taXNlIGFzIHRoZSBmaXJzdCBwcmlvcml0eS5cbiAgICAgICAgICogMi4gSWYgcHJvbWlzZSBub3QgZXhpc3QsIHVzZSBjYWxsYmFjayB3aXRoIHdhcm5pbmcgaW5zdGVhZFxuICAgICAgICAgKi9cblxuICAgICAgICB3YXJuaW5nKGhhc1Byb21pc2UsICdgY2FsbGJhY2tgIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSByZXR1cm4gYSBwcm9taXNlIGluc3RlYWQuJyk7XG5cbiAgICAgICAgaWYgKGhhc1Byb21pc2UpIHtcbiAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhlcnIgfHwgJyAnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmVSdWxlO1xuICB9KS5zb3J0KGZ1bmN0aW9uIChfcmVmLCBfcmVmMikge1xuICAgIHZhciB3MSA9IF9yZWYud2FybmluZ09ubHksXG4gICAgICAgIGkxID0gX3JlZi5ydWxlSW5kZXg7XG4gICAgdmFyIHcyID0gX3JlZjIud2FybmluZ09ubHksXG4gICAgICAgIGkyID0gX3JlZjIucnVsZUluZGV4O1xuXG4gICAgaWYgKCEhdzEgPT09ICEhdzIpIHtcbiAgICAgIC8vIExldCBrZWVwIG9yaWdpbiBvcmRlclxuICAgICAgcmV0dXJuIGkxIC0gaTI7XG4gICAgfVxuXG4gICAgaWYgKHcxKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gLTE7XG4gIH0pOyAvLyBEbyB2YWxpZGF0ZSBydWxlc1xuXG4gIHZhciBzdW1tYXJ5UHJvbWlzZTtcblxuICBpZiAodmFsaWRhdGVGaXJzdCA9PT0gdHJ1ZSkge1xuICAgIC8vID4+Pj4+IFZhbGlkYXRlIGJ5IHNlcmlhbGl6YXRpb25cbiAgICBzdW1tYXJ5UHJvbWlzZSA9IG5ldyBQcm9taXNlKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIGksIHJ1bGUsIGVycm9ycztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkge1xuICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBpID0gMDtcblxuICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgaWYgKCEoaSA8IGZpbGxlZFJ1bGVzLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJ1bGUgPSBmaWxsZWRSdWxlc1tpXTtcbiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRhdGVSdWxlKG5hbWUsIHZhbHVlLCBydWxlLCBvcHRpb25zLCBtZXNzYWdlVmFyaWFibGVzKTtcblxuICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gX2NvbnRleHQuc2VudDtcblxuICAgICAgICAgICAgICAgIGlmICghZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZWplY3QoW3tcbiAgICAgICAgICAgICAgICAgIGVycm9yczogZXJyb3JzLFxuICAgICAgICAgICAgICAgICAgcnVsZTogcnVsZVxuICAgICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KFwicmV0dXJuXCIpO1xuXG4gICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICBpICs9IDE7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlICovXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShbXSk7XG5cbiAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfY2FsbGVlKTtcbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDYsIF94Nykge1xuICAgICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSgpKTtcbiAgfSBlbHNlIHtcbiAgICAvLyA+Pj4+PiBWYWxpZGF0ZSBieSBwYXJhbGxlbFxuICAgIHZhciBydWxlUHJvbWlzZXMgPSBmaWxsZWRSdWxlcy5tYXAoZnVuY3Rpb24gKHJ1bGUpIHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZVJ1bGUobmFtZSwgdmFsdWUsIHJ1bGUsIG9wdGlvbnMsIG1lc3NhZ2VWYXJpYWJsZXMpLnRoZW4oZnVuY3Rpb24gKGVycm9ycykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVycm9yczogZXJyb3JzLFxuICAgICAgICAgIHJ1bGU6IHJ1bGVcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHN1bW1hcnlQcm9taXNlID0gKHZhbGlkYXRlRmlyc3QgPyBmaW5pc2hPbkZpcnN0RmFpbGVkKHJ1bGVQcm9taXNlcykgOiBmaW5pc2hPbkFsbEZhaWxlZChydWxlUHJvbWlzZXMpKS50aGVuKGZ1bmN0aW9uIChlcnJvcnMpIHtcbiAgICAgIC8vIEFsd2F5cyBjaGFuZ2UgdG8gcmVqZWN0aW9uIGZvciBGaWVsZCB0byBjYXRjaFxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9ycyk7XG4gICAgfSk7XG4gIH0gLy8gSW50ZXJuYWwgY2F0Y2ggZXJyb3IgdG8gYXZvaWQgY29uc29sZSBlcnJvciBsb2cuXG5cblxuICBzdW1tYXJ5UHJvbWlzZS5jYXRjaChmdW5jdGlvbiAoZSkge1xuICAgIHJldHVybiBlO1xuICB9KTtcbiAgcmV0dXJuIHN1bW1hcnlQcm9taXNlO1xufVxuXG5mdW5jdGlvbiBmaW5pc2hPbkFsbEZhaWxlZChfeDgpIHtcbiAgcmV0dXJuIF9maW5pc2hPbkFsbEZhaWxlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5mdW5jdGlvbiBfZmluaXNoT25BbGxGYWlsZWQoKSB7XG4gIF9maW5pc2hPbkFsbEZhaWxlZCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHJ1bGVQcm9taXNlcykge1xuICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0Mykge1xuICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoXCJyZXR1cm5cIiwgUHJvbWlzZS5hbGwocnVsZVByb21pc2VzKS50aGVuKGZ1bmN0aW9uIChlcnJvcnNMaXN0KSB7XG4gICAgICAgICAgICAgIHZhciBfcmVmNTtcblxuICAgICAgICAgICAgICB2YXIgZXJyb3JzID0gKF9yZWY1ID0gW10pLmNvbmNhdC5hcHBseShfcmVmNSwgX3RvQ29uc3VtYWJsZUFycmF5KGVycm9yc0xpc3QpKTtcblxuICAgICAgICAgICAgICByZXR1cm4gZXJyb3JzO1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgX2NhbGxlZTMpO1xuICB9KSk7XG4gIHJldHVybiBfZmluaXNoT25BbGxGYWlsZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuZnVuY3Rpb24gZmluaXNoT25GaXJzdEZhaWxlZChfeDkpIHtcbiAgcmV0dXJuIF9maW5pc2hPbkZpcnN0RmFpbGVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIF9maW5pc2hPbkZpcnN0RmFpbGVkKCkge1xuICBfZmluaXNoT25GaXJzdEZhaWxlZCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KHJ1bGVQcm9taXNlcykge1xuICAgIHZhciBjb3VudDtcbiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHtcbiAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNvdW50ID0gMDtcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgIHJ1bGVQcm9taXNlcy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChydWxlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChydWxlRXJyb3IuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKFtydWxlRXJyb3JdKTtcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgY291bnQgKz0gMTtcblxuICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID09PSBydWxlUHJvbWlzZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoW10pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIF9jYWxsZWU0KTtcbiAgfSkpO1xuICByZXR1cm4gX2ZpbmlzaE9uRmlyc3RGYWlsZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn0iLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCI7XG5pbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5XCI7XG5pbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVja1wiO1xuaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3NcIjtcbmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWRcIjtcbmltcG9ydCBfaW5oZXJpdHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzXCI7XG5pbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlclwiO1xudmFyIF9leGNsdWRlZCA9IFtcIm5hbWVcIl07XG5pbXBvcnQgdG9DaGlsZHJlbkFycmF5IGZyb20gXCJyYy11dGlsL2VzL0NoaWxkcmVuL3RvQXJyYXlcIjtcbmltcG9ydCB3YXJuaW5nIGZyb20gXCJyYy11dGlsL2VzL3dhcm5pbmdcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBGaWVsZENvbnRleHQsIHsgSE9PS19NQVJLIH0gZnJvbSAnLi9GaWVsZENvbnRleHQnO1xuaW1wb3J0IHsgdG9BcnJheSB9IGZyb20gJy4vdXRpbHMvdHlwZVV0aWwnO1xuaW1wb3J0IHsgdmFsaWRhdGVSdWxlcyB9IGZyb20gJy4vdXRpbHMvdmFsaWRhdGVVdGlsJztcbmltcG9ydCB7IGNvbnRhaW5zTmFtZVBhdGgsIGRlZmF1bHRHZXRWYWx1ZUZyb21FdmVudCwgZ2V0TmFtZVBhdGgsIGdldFZhbHVlIH0gZnJvbSAnLi91dGlscy92YWx1ZVV0aWwnO1xudmFyIEVNUFRZX0VSUk9SUyA9IFtdO1xuXG5mdW5jdGlvbiByZXF1aXJlVXBkYXRlKHNob3VsZFVwZGF0ZSwgcHJldiwgbmV4dCwgcHJldlZhbHVlLCBuZXh0VmFsdWUsIGluZm8pIHtcbiAgaWYgKHR5cGVvZiBzaG91bGRVcGRhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gc2hvdWxkVXBkYXRlKHByZXYsIG5leHQsICdzb3VyY2UnIGluIGluZm8gPyB7XG4gICAgICBzb3VyY2U6IGluZm8uc291cmNlXG4gICAgfSA6IHt9KTtcbiAgfVxuXG4gIHJldHVybiBwcmV2VmFsdWUgIT09IG5leHRWYWx1ZTtcbn0gLy8gV2UgdXNlIENsYXNzIGluc3RlYWQgb2YgSG9va3MgaGVyZSBzaW5jZSBpdCB3aWxsIGNvc3QgbXVjaCBjb2RlIGJ5IHVzaW5nIEhvb2tzLlxuXG5cbnZhciBGaWVsZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoRmllbGQsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoRmllbGQpO1xuXG4gIC8qKlxuICAgKiBGb2xsb3cgc3RhdGUgc2hvdWxkIG5vdCBtYW5hZ2VtZW50IGluIFN0YXRlIHNpbmNlIGl0IHdpbGwgYXN5bmMgdXBkYXRlIGJ5IFJlYWN0LlxuICAgKiBUaGlzIG1ha2VzIGZpcnN0IHJlbmRlciBvZiBmb3JtIGNhbiBub3QgZ2V0IGNvcnJlY3Qgc3RhdGUgdmFsdWUuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBNYXJrIHdoZW4gdG91Y2hlZCAmIHZhbGlkYXRlZC4gQ3VycmVudGx5IG9ubHkgdXNlZCBmb3IgYGRlcGVuZGVuY2llc2AuXG4gICAqIE5vdGUgdGhhdCB3ZSBkbyBub3QgdGhpbmsgZmllbGQgd2l0aCBgaW5pdGlhbFZhbHVlYCBpcyBkaXJ0eVxuICAgKiBidXQgdGhpcyB3aWxsIGJlIGJ5IGBpc0ZpZWxkRGlydHlgIGZ1bmMuXG4gICAqL1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gU3Vic2NyaXB0aW9ucyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgZnVuY3Rpb24gRmllbGQocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmllbGQpO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7IC8vIFJlZ2lzdGVyIG9uIGluaXRcblxuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgcmVzZXRDb3VudDogMFxuICAgIH07XG4gICAgX3RoaXMuY2FuY2VsUmVnaXN0ZXJGdW5jID0gbnVsbDtcbiAgICBfdGhpcy5tb3VudGVkID0gZmFsc2U7XG4gICAgX3RoaXMudG91Y2hlZCA9IGZhbHNlO1xuICAgIF90aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgX3RoaXMudmFsaWRhdGVQcm9taXNlID0gbnVsbDtcbiAgICBfdGhpcy5wcmV2VmFsaWRhdGluZyA9IHZvaWQgMDtcbiAgICBfdGhpcy5lcnJvcnMgPSBFTVBUWV9FUlJPUlM7XG4gICAgX3RoaXMud2FybmluZ3MgPSBFTVBUWV9FUlJPUlM7XG5cbiAgICBfdGhpcy5jYW5jZWxSZWdpc3RlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIHByZXNlcnZlID0gX3RoaXMkcHJvcHMucHJlc2VydmUsXG4gICAgICAgICAgaXNMaXN0RmllbGQgPSBfdGhpcyRwcm9wcy5pc0xpc3RGaWVsZCxcbiAgICAgICAgICBuYW1lID0gX3RoaXMkcHJvcHMubmFtZTtcblxuICAgICAgaWYgKF90aGlzLmNhbmNlbFJlZ2lzdGVyRnVuYykge1xuICAgICAgICBfdGhpcy5jYW5jZWxSZWdpc3RlckZ1bmMoaXNMaXN0RmllbGQsIHByZXNlcnZlLCBnZXROYW1lUGF0aChuYW1lKSk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLmNhbmNlbFJlZ2lzdGVyRnVuYyA9IG51bGw7XG4gICAgfTtcblxuICAgIF90aGlzLmdldE5hbWVQYXRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzMiA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIG5hbWUgPSBfdGhpcyRwcm9wczIubmFtZSxcbiAgICAgICAgICBmaWVsZENvbnRleHQgPSBfdGhpcyRwcm9wczIuZmllbGRDb250ZXh0O1xuICAgICAgdmFyIF9maWVsZENvbnRleHQkcHJlZml4TiA9IGZpZWxkQ29udGV4dC5wcmVmaXhOYW1lLFxuICAgICAgICAgIHByZWZpeE5hbWUgPSBfZmllbGRDb250ZXh0JHByZWZpeE4gPT09IHZvaWQgMCA/IFtdIDogX2ZpZWxkQ29udGV4dCRwcmVmaXhOO1xuICAgICAgcmV0dXJuIG5hbWUgIT09IHVuZGVmaW5lZCA/IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocHJlZml4TmFtZSksIF90b0NvbnN1bWFibGVBcnJheShuYW1lKSkgOiBbXTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0UnVsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgX3RoaXMkcHJvcHMzJHJ1bGVzID0gX3RoaXMkcHJvcHMzLnJ1bGVzLFxuICAgICAgICAgIHJ1bGVzID0gX3RoaXMkcHJvcHMzJHJ1bGVzID09PSB2b2lkIDAgPyBbXSA6IF90aGlzJHByb3BzMyRydWxlcyxcbiAgICAgICAgICBmaWVsZENvbnRleHQgPSBfdGhpcyRwcm9wczMuZmllbGRDb250ZXh0O1xuICAgICAgcmV0dXJuIHJ1bGVzLm1hcChmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICBpZiAodHlwZW9mIHJ1bGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICByZXR1cm4gcnVsZShmaWVsZENvbnRleHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghX3RoaXMubW91bnRlZCkgcmV0dXJuO1xuICAgICAgLyoqXG4gICAgICAgKiBDbGVhbiB1cCBjdXJyZW50IG5vZGUuXG4gICAgICAgKi9cblxuICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgICAgdmFyIHJlc2V0Q291bnQgPSBfcmVmLnJlc2V0Q291bnQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVzZXRDb3VudDogcmVzZXRDb3VudCArIDFcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy50cmlnZ2VyTWV0YUV2ZW50ID0gZnVuY3Rpb24gKGRlc3Ryb3kpIHtcbiAgICAgIHZhciBvbk1ldGFDaGFuZ2UgPSBfdGhpcy5wcm9wcy5vbk1ldGFDaGFuZ2U7XG4gICAgICBvbk1ldGFDaGFuZ2UgPT09IG51bGwgfHwgb25NZXRhQ2hhbmdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbk1ldGFDaGFuZ2UoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5nZXRNZXRhKCkpLCB7fSwge1xuICAgICAgICBkZXN0cm95OiBkZXN0cm95XG4gICAgICB9KSk7XG4gICAgfTtcblxuICAgIF90aGlzLm9uU3RvcmVDaGFuZ2UgPSBmdW5jdGlvbiAocHJldlN0b3JlLCBuYW1lUGF0aExpc3QsIGluZm8pIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczQgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICBzaG91bGRVcGRhdGUgPSBfdGhpcyRwcm9wczQuc2hvdWxkVXBkYXRlLFxuICAgICAgICAgIF90aGlzJHByb3BzNCRkZXBlbmRlbiA9IF90aGlzJHByb3BzNC5kZXBlbmRlbmNpZXMsXG4gICAgICAgICAgZGVwZW5kZW5jaWVzID0gX3RoaXMkcHJvcHM0JGRlcGVuZGVuID09PSB2b2lkIDAgPyBbXSA6IF90aGlzJHByb3BzNCRkZXBlbmRlbixcbiAgICAgICAgICBvblJlc2V0ID0gX3RoaXMkcHJvcHM0Lm9uUmVzZXQ7XG4gICAgICB2YXIgc3RvcmUgPSBpbmZvLnN0b3JlO1xuXG4gICAgICB2YXIgbmFtZVBhdGggPSBfdGhpcy5nZXROYW1lUGF0aCgpO1xuXG4gICAgICB2YXIgcHJldlZhbHVlID0gX3RoaXMuZ2V0VmFsdWUocHJldlN0b3JlKTtcblxuICAgICAgdmFyIGN1clZhbHVlID0gX3RoaXMuZ2V0VmFsdWUoc3RvcmUpO1xuXG4gICAgICB2YXIgbmFtZVBhdGhNYXRjaCA9IG5hbWVQYXRoTGlzdCAmJiBjb250YWluc05hbWVQYXRoKG5hbWVQYXRoTGlzdCwgbmFtZVBhdGgpOyAvLyBgc2V0RmllbGRzVmFsdWVgIGlzIGEgcXVpY2sgYWNjZXNzIHRvIHVwZGF0ZSByZWxhdGVkIHN0YXR1c1xuXG4gICAgICBpZiAoaW5mby50eXBlID09PSAndmFsdWVVcGRhdGUnICYmIGluZm8uc291cmNlID09PSAnZXh0ZXJuYWwnICYmIHByZXZWYWx1ZSAhPT0gY3VyVmFsdWUpIHtcbiAgICAgICAgX3RoaXMudG91Y2hlZCA9IHRydWU7XG4gICAgICAgIF90aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgX3RoaXMudmFsaWRhdGVQcm9taXNlID0gbnVsbDtcbiAgICAgICAgX3RoaXMuZXJyb3JzID0gRU1QVFlfRVJST1JTO1xuICAgICAgICBfdGhpcy53YXJuaW5ncyA9IEVNUFRZX0VSUk9SUztcblxuICAgICAgICBfdGhpcy50cmlnZ2VyTWV0YUV2ZW50KCk7XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAoaW5mby50eXBlKSB7XG4gICAgICAgIGNhc2UgJ3Jlc2V0JzpcbiAgICAgICAgICBpZiAoIW5hbWVQYXRoTGlzdCB8fCBuYW1lUGF0aE1hdGNoKSB7XG4gICAgICAgICAgICAvLyBDbGVhbiB1cCBzdGF0ZVxuICAgICAgICAgICAgX3RoaXMudG91Y2hlZCA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuZGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLnZhbGlkYXRlUHJvbWlzZSA9IG51bGw7XG4gICAgICAgICAgICBfdGhpcy5lcnJvcnMgPSBFTVBUWV9FUlJPUlM7XG4gICAgICAgICAgICBfdGhpcy53YXJuaW5ncyA9IEVNUFRZX0VSUk9SUztcblxuICAgICAgICAgICAgX3RoaXMudHJpZ2dlck1ldGFFdmVudCgpO1xuXG4gICAgICAgICAgICBvblJlc2V0ID09PSBudWxsIHx8IG9uUmVzZXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uUmVzZXQoKTtcblxuICAgICAgICAgICAgX3RoaXMucmVmcmVzaCgpO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluIGNhc2UgZmllbGQgd2l0aCBgcHJlc2VydmUgPSBmYWxzZWAgbmVzdCBkZXBzIGxpa2U6XG4gICAgICAgICAqIC0gQSA9IDEgPT4gc2hvdyBCXG4gICAgICAgICAqIC0gQiA9IDEgPT4gc2hvdyBDXG4gICAgICAgICAqIC0gUmVzZXQgQSwgbmVlZCBjbGVhbiBCLCBDXG4gICAgICAgICAqL1xuXG4gICAgICAgIGNhc2UgJ3JlbW92ZSc6XG4gICAgICAgICAge1xuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgICAgICAgICBfdGhpcy5yZVJlbmRlcigpO1xuXG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ3NldEZpZWxkJzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZiAobmFtZVBhdGhNYXRjaCkge1xuICAgICAgICAgICAgICB2YXIgZGF0YSA9IGluZm8uZGF0YTtcblxuICAgICAgICAgICAgICBpZiAoJ3RvdWNoZWQnIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy50b3VjaGVkID0gZGF0YS50b3VjaGVkO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKCd2YWxpZGF0aW5nJyBpbiBkYXRhICYmICEoJ29yaWdpblJDRmllbGQnIGluIGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMudmFsaWRhdGVQcm9taXNlID0gZGF0YS52YWxpZGF0aW5nID8gUHJvbWlzZS5yZXNvbHZlKFtdKSA6IG51bGw7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoJ2Vycm9ycycgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgIF90aGlzLmVycm9ycyA9IGRhdGEuZXJyb3JzIHx8IEVNUFRZX0VSUk9SUztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICgnd2FybmluZ3MnIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy53YXJuaW5ncyA9IGRhdGEud2FybmluZ3MgfHwgRU1QVFlfRVJST1JTO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgX3RoaXMuZGlydHkgPSB0cnVlO1xuXG4gICAgICAgICAgICAgIF90aGlzLnRyaWdnZXJNZXRhRXZlbnQoKTtcblxuICAgICAgICAgICAgICBfdGhpcy5yZVJlbmRlcigpO1xuXG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gLy8gSGFuZGxlIHVwZGF0ZSBieSBgc2V0RmllbGRgIHdpdGggYHNob3VsZFVwZGF0ZWBcblxuXG4gICAgICAgICAgICBpZiAoc2hvdWxkVXBkYXRlICYmICFuYW1lUGF0aC5sZW5ndGggJiYgcmVxdWlyZVVwZGF0ZShzaG91bGRVcGRhdGUsIHByZXZTdG9yZSwgc3RvcmUsIHByZXZWYWx1ZSwgY3VyVmFsdWUsIGluZm8pKSB7XG4gICAgICAgICAgICAgIF90aGlzLnJlUmVuZGVyKCk7XG5cbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAnZGVwZW5kZW5jaWVzVXBkYXRlJzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRyaWdnZXIgd2hlbiBtYXJrZWQgYGRlcGVuZGVuY2llc2AgdXBkYXRlZC4gUmVsYXRlZCBmaWVsZHMgd2lsbCBhbGwgdXBkYXRlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBkZXBlbmRlbmN5TGlzdCA9IGRlcGVuZGVuY2llcy5tYXAoZ2V0TmFtZVBhdGgpOyAvLyBObyBuZWVkIGZvciBgbmFtZVBhdGhNYXRoYCBjaGVjayBhbmQgYHNob3VsZFVwZGF0ZWAgY2hlY2ssIHNpbmNlIGB2YWx1ZVVwZGF0ZWAgd2lsbCBiZVxuICAgICAgICAgICAgLy8gZW1pdHRlZCBlYXJsaWVyIGFuZCB0aGV5IHdpbGwgd29yayB0aGVyZVxuICAgICAgICAgICAgLy8gSWYgc2V0IGl0IG1heSBjYXVzZSB1bm5lY2Vzc2FyeSB0d2ljZSByZXJlbmRlcmluZ1xuXG4gICAgICAgICAgICBpZiAoZGVwZW5kZW5jeUxpc3Quc29tZShmdW5jdGlvbiAoZGVwZW5kZW5jeSkge1xuICAgICAgICAgICAgICByZXR1cm4gY29udGFpbnNOYW1lUGF0aChpbmZvLnJlbGF0ZWRGaWVsZHMsIGRlcGVuZGVuY3kpO1xuICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgX3RoaXMucmVSZW5kZXIoKTtcblxuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIC8vIDEuIElmIGBuYW1lUGF0aGAgZXhpc3RzIGluIGBuYW1lUGF0aExpc3RgLCBtZWFucyBpdCdzIHJlbGF0ZWQgdmFsdWUgYW5kIHNob3VsZCB1cGRhdGVcbiAgICAgICAgICAvLyAgICAgIEZvciBleGFtcGxlIDxMaXN0IG5hbWU9XCJsaXN0XCI+PEZpZWxkIG5hbWU9e1snbGlzdCcsIDBdfT48L0xpc3Q+XG4gICAgICAgICAgLy8gICAgICBJZiBgbmFtZVBhdGhMaXN0YCBpcyBbWydsaXN0J11dIChMaXN0IHZhbHVlIHVwZGF0ZSksIEZpZWxkIHNob3VsZCBiZSB1cGRhdGVkXG4gICAgICAgICAgLy8gICAgICBJZiBgbmFtZVBhdGhMaXN0YCBpcyBbWydsaXN0JywgMF1dIChGaWVsZCB2YWx1ZSB1cGRhdGUpLCBMaXN0IHNob3VsZG4ndCBiZSB1cGRhdGVkXG4gICAgICAgICAgLy8gMi5cbiAgICAgICAgICAvLyAgIDIuMSBJZiBgZGVwZW5kZW5jaWVzYCBpcyBzZXQsIGBuYW1lYCBpcyBub3Qgc2V0IGFuZCBgc2hvdWxkVXBkYXRlYCBpcyBub3Qgc2V0LFxuICAgICAgICAgIC8vICAgICAgIGRvbid0IHVzZSBgc2hvdWxkVXBkYXRlYC4gYGRlcGVuZGVuY2llc2AgaXMgdmlldyBhcyBhIHNob3J0Y3V0IGlmIGBzaG91bGRVcGRhdGVgXG4gICAgICAgICAgLy8gICAgICAgaXMgbm90IHByb3ZpZGVkXG4gICAgICAgICAgLy8gICAyLjIgSWYgYHNob3VsZFVwZGF0ZWAgcHJvdmlkZWQsIHVzZSBjdXN0b21pemUgbG9naWMgdG8gdXBkYXRlIHRoZSBmaWVsZFxuICAgICAgICAgIC8vICAgICAgIGVsc2UgdG8gY2hlY2sgaWYgdmFsdWUgY2hhbmdlZFxuICAgICAgICAgIGlmIChuYW1lUGF0aE1hdGNoIHx8ICghZGVwZW5kZW5jaWVzLmxlbmd0aCB8fCBuYW1lUGF0aC5sZW5ndGggfHwgc2hvdWxkVXBkYXRlKSAmJiByZXF1aXJlVXBkYXRlKHNob3VsZFVwZGF0ZSwgcHJldlN0b3JlLCBzdG9yZSwgcHJldlZhbHVlLCBjdXJWYWx1ZSwgaW5mbykpIHtcbiAgICAgICAgICAgIF90aGlzLnJlUmVuZGVyKCk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKHNob3VsZFVwZGF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICBfdGhpcy5yZVJlbmRlcigpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy52YWxpZGF0ZVJ1bGVzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgIC8vIFdlIHNob3VsZCBmaXhlZCBuYW1lUGF0aCAmIHZhbHVlIHRvIGF2b2lkIGRldmVsb3BlciBjaGFuZ2UgdGhlbiBieSBmb3JtIGZ1bmN0aW9uXG4gICAgICB2YXIgbmFtZVBhdGggPSBfdGhpcy5nZXROYW1lUGF0aCgpO1xuXG4gICAgICB2YXIgY3VycmVudFZhbHVlID0gX3RoaXMuZ2V0VmFsdWUoKTsgLy8gRm9yY2UgY2hhbmdlIHRvIGFzeW5jIHRvIGF2b2lkIHJ1bGUgT09EIHVuZGVyIHJlbmRlclByb3BzIGZpZWxkXG5cblxuICAgICAgdmFyIHJvb3RQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghX3RoaXMubW91bnRlZCkge1xuICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfdGhpcyRwcm9wczUgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIF90aGlzJHByb3BzNSR2YWxpZGF0ZSA9IF90aGlzJHByb3BzNS52YWxpZGF0ZUZpcnN0LFxuICAgICAgICAgICAgdmFsaWRhdGVGaXJzdCA9IF90aGlzJHByb3BzNSR2YWxpZGF0ZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfdGhpcyRwcm9wczUkdmFsaWRhdGUsXG4gICAgICAgICAgICBtZXNzYWdlVmFyaWFibGVzID0gX3RoaXMkcHJvcHM1Lm1lc3NhZ2VWYXJpYWJsZXM7XG5cbiAgICAgICAgdmFyIF9yZWYyID0gb3B0aW9ucyB8fCB7fSxcbiAgICAgICAgICAgIHRyaWdnZXJOYW1lID0gX3JlZjIudHJpZ2dlck5hbWU7XG5cbiAgICAgICAgdmFyIGZpbHRlcmVkUnVsZXMgPSBfdGhpcy5nZXRSdWxlcygpO1xuXG4gICAgICAgIGlmICh0cmlnZ2VyTmFtZSkge1xuICAgICAgICAgIGZpbHRlcmVkUnVsZXMgPSBmaWx0ZXJlZFJ1bGVzLmZpbHRlcihmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgICAgdmFyIHZhbGlkYXRlVHJpZ2dlciA9IHJ1bGUudmFsaWRhdGVUcmlnZ2VyO1xuXG4gICAgICAgICAgICBpZiAoIXZhbGlkYXRlVHJpZ2dlcikge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHRyaWdnZXJMaXN0ID0gdG9BcnJheSh2YWxpZGF0ZVRyaWdnZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRyaWdnZXJMaXN0LmluY2x1ZGVzKHRyaWdnZXJOYW1lKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwcm9taXNlID0gdmFsaWRhdGVSdWxlcyhuYW1lUGF0aCwgY3VycmVudFZhbHVlLCBmaWx0ZXJlZFJ1bGVzLCBvcHRpb25zLCB2YWxpZGF0ZUZpcnN0LCBtZXNzYWdlVmFyaWFibGVzKTtcbiAgICAgICAgcHJvbWlzZS5jYXRjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcnVsZUVycm9ycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogRU1QVFlfRVJST1JTO1xuXG4gICAgICAgICAgaWYgKF90aGlzLnZhbGlkYXRlUHJvbWlzZSA9PT0gcm9vdFByb21pc2UpIHtcbiAgICAgICAgICAgIF90aGlzLnZhbGlkYXRlUHJvbWlzZSA9IG51bGw7IC8vIEdldCBlcnJvcnMgJiB3YXJuaW5nc1xuXG4gICAgICAgICAgICB2YXIgbmV4dEVycm9ycyA9IFtdO1xuICAgICAgICAgICAgdmFyIG5leHRXYXJuaW5ncyA9IFtdO1xuICAgICAgICAgICAgcnVsZUVycm9ycy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgICAgICAgICB2YXIgd2FybmluZ09ubHkgPSBfcmVmMy5ydWxlLndhcm5pbmdPbmx5LFxuICAgICAgICAgICAgICAgICAgX3JlZjMkZXJyb3JzID0gX3JlZjMuZXJyb3JzLFxuICAgICAgICAgICAgICAgICAgZXJyb3JzID0gX3JlZjMkZXJyb3JzID09PSB2b2lkIDAgPyBFTVBUWV9FUlJPUlMgOiBfcmVmMyRlcnJvcnM7XG5cbiAgICAgICAgICAgICAgaWYgKHdhcm5pbmdPbmx5KSB7XG4gICAgICAgICAgICAgICAgbmV4dFdhcm5pbmdzLnB1c2guYXBwbHkobmV4dFdhcm5pbmdzLCBfdG9Db25zdW1hYmxlQXJyYXkoZXJyb3JzKSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV4dEVycm9ycy5wdXNoLmFwcGx5KG5leHRFcnJvcnMsIF90b0NvbnN1bWFibGVBcnJheShlcnJvcnMpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfdGhpcy5lcnJvcnMgPSBuZXh0RXJyb3JzO1xuICAgICAgICAgICAgX3RoaXMud2FybmluZ3MgPSBuZXh0V2FybmluZ3M7XG5cbiAgICAgICAgICAgIF90aGlzLnRyaWdnZXJNZXRhRXZlbnQoKTtcblxuICAgICAgICAgICAgX3RoaXMucmVSZW5kZXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH0pO1xuICAgICAgX3RoaXMudmFsaWRhdGVQcm9taXNlID0gcm9vdFByb21pc2U7XG4gICAgICBfdGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgICBfdGhpcy5lcnJvcnMgPSBFTVBUWV9FUlJPUlM7XG4gICAgICBfdGhpcy53YXJuaW5ncyA9IEVNUFRZX0VSUk9SUztcblxuICAgICAgX3RoaXMudHJpZ2dlck1ldGFFdmVudCgpOyAvLyBGb3JjZSB0cmlnZ2VyIHJlLXJlbmRlciBzaW5jZSB3ZSBuZWVkIHN5bmMgcmVuZGVyUHJvcHMgd2l0aCBuZXcgbWV0YVxuXG5cbiAgICAgIF90aGlzLnJlUmVuZGVyKCk7XG5cbiAgICAgIHJldHVybiByb290UHJvbWlzZTtcbiAgICB9O1xuXG4gICAgX3RoaXMuaXNGaWVsZFZhbGlkYXRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gISFfdGhpcy52YWxpZGF0ZVByb21pc2U7XG4gICAgfTtcblxuICAgIF90aGlzLmlzRmllbGRUb3VjaGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLnRvdWNoZWQ7XG4gICAgfTtcblxuICAgIF90aGlzLmlzRmllbGREaXJ0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIFRvdWNoZWQgb3IgdmFsaWRhdGUgb3IgaGFzIGluaXRpYWxWYWx1ZVxuICAgICAgaWYgKF90aGlzLmRpcnR5IHx8IF90aGlzLnByb3BzLmluaXRpYWxWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSAvLyBGb3JtIHNldCBpbml0aWFsVmFsdWVcblxuXG4gICAgICB2YXIgZmllbGRDb250ZXh0ID0gX3RoaXMucHJvcHMuZmllbGRDb250ZXh0O1xuXG4gICAgICB2YXIgX2ZpZWxkQ29udGV4dCRnZXRJbnRlID0gZmllbGRDb250ZXh0LmdldEludGVybmFsSG9va3MoSE9PS19NQVJLKSxcbiAgICAgICAgICBnZXRJbml0aWFsVmFsdWUgPSBfZmllbGRDb250ZXh0JGdldEludGUuZ2V0SW5pdGlhbFZhbHVlO1xuXG4gICAgICBpZiAoZ2V0SW5pdGlhbFZhbHVlKF90aGlzLmdldE5hbWVQYXRoKCkpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0RXJyb3JzID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmVycm9ycztcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0V2FybmluZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMud2FybmluZ3M7XG4gICAgfTtcblxuICAgIF90aGlzLmlzTGlzdEZpZWxkID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLnByb3BzLmlzTGlzdEZpZWxkO1xuICAgIH07XG5cbiAgICBfdGhpcy5pc0xpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMucHJvcHMuaXNMaXN0O1xuICAgIH07XG5cbiAgICBfdGhpcy5pc1ByZXNlcnZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLnByb3BzLnByZXNlcnZlO1xuICAgIH07XG5cbiAgICBfdGhpcy5nZXRNZXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gTWFrZSBlcnJvciAmIHZhbGlkYXRpbmcgaW4gY2FjaGUgdG8gc2F2ZSBwZXJmXG4gICAgICBfdGhpcy5wcmV2VmFsaWRhdGluZyA9IF90aGlzLmlzRmllbGRWYWxpZGF0aW5nKCk7XG4gICAgICB2YXIgbWV0YSA9IHtcbiAgICAgICAgdG91Y2hlZDogX3RoaXMuaXNGaWVsZFRvdWNoZWQoKSxcbiAgICAgICAgdmFsaWRhdGluZzogX3RoaXMucHJldlZhbGlkYXRpbmcsXG4gICAgICAgIGVycm9yczogX3RoaXMuZXJyb3JzLFxuICAgICAgICB3YXJuaW5nczogX3RoaXMud2FybmluZ3MsXG4gICAgICAgIG5hbWU6IF90aGlzLmdldE5hbWVQYXRoKClcbiAgICAgIH07XG4gICAgICByZXR1cm4gbWV0YTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0T25seUNoaWxkID0gZnVuY3Rpb24gKGNoaWxkcmVuKSB7XG4gICAgICAvLyBTdXBwb3J0IHJlbmRlciBwcm9wc1xuICAgICAgaWYgKHR5cGVvZiBjaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgbWV0YSA9IF90aGlzLmdldE1ldGEoKTtcblxuICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5nZXRPbmx5Q2hpbGQoY2hpbGRyZW4oX3RoaXMuZ2V0Q29udHJvbGxlZCgpLCBtZXRhLCBfdGhpcy5wcm9wcy5maWVsZENvbnRleHQpKSksIHt9LCB7XG4gICAgICAgICAgaXNGdW5jdGlvbjogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0gLy8gRmlsZWQgZWxlbWVudCBvbmx5XG5cblxuICAgICAgdmFyIGNoaWxkTGlzdCA9IHRvQ2hpbGRyZW5BcnJheShjaGlsZHJlbik7XG5cbiAgICAgIGlmIChjaGlsZExpc3QubGVuZ3RoICE9PSAxIHx8ICEgLyojX19QVVJFX18qL1JlYWN0LmlzVmFsaWRFbGVtZW50KGNoaWxkTGlzdFswXSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjaGlsZDogY2hpbGRMaXN0LFxuICAgICAgICAgIGlzRnVuY3Rpb246IGZhbHNlXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNoaWxkOiBjaGlsZExpc3RbMF0sXG4gICAgICAgIGlzRnVuY3Rpb246IGZhbHNlXG4gICAgICB9O1xuICAgIH07XG5cbiAgICBfdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uIChzdG9yZSkge1xuICAgICAgdmFyIGdldEZpZWxkc1ZhbHVlID0gX3RoaXMucHJvcHMuZmllbGRDb250ZXh0LmdldEZpZWxkc1ZhbHVlO1xuXG4gICAgICB2YXIgbmFtZVBhdGggPSBfdGhpcy5nZXROYW1lUGF0aCgpO1xuXG4gICAgICByZXR1cm4gZ2V0VmFsdWUoc3RvcmUgfHwgZ2V0RmllbGRzVmFsdWUodHJ1ZSksIG5hbWVQYXRoKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0Q29udHJvbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjaGlsZFByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICAgIHZhciBfdGhpcyRwcm9wczYgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICB0cmlnZ2VyID0gX3RoaXMkcHJvcHM2LnRyaWdnZXIsXG4gICAgICAgICAgdmFsaWRhdGVUcmlnZ2VyID0gX3RoaXMkcHJvcHM2LnZhbGlkYXRlVHJpZ2dlcixcbiAgICAgICAgICBnZXRWYWx1ZUZyb21FdmVudCA9IF90aGlzJHByb3BzNi5nZXRWYWx1ZUZyb21FdmVudCxcbiAgICAgICAgICBub3JtYWxpemUgPSBfdGhpcyRwcm9wczYubm9ybWFsaXplLFxuICAgICAgICAgIHZhbHVlUHJvcE5hbWUgPSBfdGhpcyRwcm9wczYudmFsdWVQcm9wTmFtZSxcbiAgICAgICAgICBnZXRWYWx1ZVByb3BzID0gX3RoaXMkcHJvcHM2LmdldFZhbHVlUHJvcHMsXG4gICAgICAgICAgZmllbGRDb250ZXh0ID0gX3RoaXMkcHJvcHM2LmZpZWxkQ29udGV4dDtcbiAgICAgIHZhciBtZXJnZWRWYWxpZGF0ZVRyaWdnZXIgPSB2YWxpZGF0ZVRyaWdnZXIgIT09IHVuZGVmaW5lZCA/IHZhbGlkYXRlVHJpZ2dlciA6IGZpZWxkQ29udGV4dC52YWxpZGF0ZVRyaWdnZXI7XG5cbiAgICAgIHZhciBuYW1lUGF0aCA9IF90aGlzLmdldE5hbWVQYXRoKCk7XG5cbiAgICAgIHZhciBnZXRJbnRlcm5hbEhvb2tzID0gZmllbGRDb250ZXh0LmdldEludGVybmFsSG9va3MsXG4gICAgICAgICAgZ2V0RmllbGRzVmFsdWUgPSBmaWVsZENvbnRleHQuZ2V0RmllbGRzVmFsdWU7XG5cbiAgICAgIHZhciBfZ2V0SW50ZXJuYWxIb29rcyA9IGdldEludGVybmFsSG9va3MoSE9PS19NQVJLKSxcbiAgICAgICAgICBkaXNwYXRjaCA9IF9nZXRJbnRlcm5hbEhvb2tzLmRpc3BhdGNoO1xuXG4gICAgICB2YXIgdmFsdWUgPSBfdGhpcy5nZXRWYWx1ZSgpO1xuXG4gICAgICB2YXIgbWVyZ2VkR2V0VmFsdWVQcm9wcyA9IGdldFZhbHVlUHJvcHMgfHwgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICByZXR1cm4gX2RlZmluZVByb3BlcnR5KHt9LCB2YWx1ZVByb3BOYW1lLCB2YWwpO1xuICAgICAgfTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcblxuXG4gICAgICB2YXIgb3JpZ2luVHJpZ2dlckZ1bmMgPSBjaGlsZFByb3BzW3RyaWdnZXJdO1xuXG4gICAgICB2YXIgY29udHJvbCA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY2hpbGRQcm9wcyksIG1lcmdlZEdldFZhbHVlUHJvcHModmFsdWUpKTsgLy8gQWRkIHRyaWdnZXJcblxuXG4gICAgICBjb250cm9sW3RyaWdnZXJdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBNYXJrIGFzIHRvdWNoZWRcbiAgICAgICAgX3RoaXMudG91Y2hlZCA9IHRydWU7XG4gICAgICAgIF90aGlzLmRpcnR5ID0gdHJ1ZTtcblxuICAgICAgICBfdGhpcy50cmlnZ2VyTWV0YUV2ZW50KCk7XG5cbiAgICAgICAgdmFyIG5ld1ZhbHVlO1xuXG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ2V0VmFsdWVGcm9tRXZlbnQpIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IGdldFZhbHVlRnJvbUV2ZW50LmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBkZWZhdWx0R2V0VmFsdWVGcm9tRXZlbnQuYXBwbHkodm9pZCAwLCBbdmFsdWVQcm9wTmFtZV0uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChub3JtYWxpemUpIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IG5vcm1hbGl6ZShuZXdWYWx1ZSwgdmFsdWUsIGdldEZpZWxkc1ZhbHVlKHRydWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiAndXBkYXRlVmFsdWUnLFxuICAgICAgICAgIG5hbWVQYXRoOiBuYW1lUGF0aCxcbiAgICAgICAgICB2YWx1ZTogbmV3VmFsdWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG9yaWdpblRyaWdnZXJGdW5jKSB7XG4gICAgICAgICAgb3JpZ2luVHJpZ2dlckZ1bmMuYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgfTsgLy8gQWRkIHZhbGlkYXRlVHJpZ2dlclxuXG5cbiAgICAgIHZhciB2YWxpZGF0ZVRyaWdnZXJMaXN0ID0gdG9BcnJheShtZXJnZWRWYWxpZGF0ZVRyaWdnZXIgfHwgW10pO1xuICAgICAgdmFsaWRhdGVUcmlnZ2VyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh0cmlnZ2VyTmFtZSkge1xuICAgICAgICAvLyBXcmFwIGFkZGl0aW9uYWwgZnVuY3Rpb24gb2YgY29tcG9uZW50LCBzbyB0aGF0IHdlIGNhbiBnZXQgbGF0ZXN0IHZhbHVlIGZyb20gc3RvcmVcbiAgICAgICAgdmFyIG9yaWdpblRyaWdnZXIgPSBjb250cm9sW3RyaWdnZXJOYW1lXTtcblxuICAgICAgICBjb250cm9sW3RyaWdnZXJOYW1lXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAob3JpZ2luVHJpZ2dlcikge1xuICAgICAgICAgICAgb3JpZ2luVHJpZ2dlci5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfSAvLyBBbHdheXMgdXNlIGxhdGVzdCBydWxlc1xuXG5cbiAgICAgICAgICB2YXIgcnVsZXMgPSBfdGhpcy5wcm9wcy5ydWxlcztcblxuICAgICAgICAgIGlmIChydWxlcyAmJiBydWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIFdlIGRpc3BhdGNoIHZhbGlkYXRlIHRvIHJvb3QsXG4gICAgICAgICAgICAvLyBzaW5jZSBpdCB3aWxsIHVwZGF0ZSByZWxhdGVkIGRhdGEgd2l0aCBvdGhlciBmaWVsZCB3aXRoIHNhbWUgbmFtZVxuICAgICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgICB0eXBlOiAndmFsaWRhdGVGaWVsZCcsXG4gICAgICAgICAgICAgIG5hbWVQYXRoOiBuYW1lUGF0aCxcbiAgICAgICAgICAgICAgdHJpZ2dlck5hbWU6IHRyaWdnZXJOYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjb250cm9sO1xuICAgIH07XG5cbiAgICBpZiAocHJvcHMuZmllbGRDb250ZXh0KSB7XG4gICAgICB2YXIgZ2V0SW50ZXJuYWxIb29rcyA9IHByb3BzLmZpZWxkQ29udGV4dC5nZXRJbnRlcm5hbEhvb2tzO1xuXG4gICAgICB2YXIgX2dldEludGVybmFsSG9va3MyID0gZ2V0SW50ZXJuYWxIb29rcyhIT09LX01BUkspLFxuICAgICAgICAgIGluaXRFbnRpdHlWYWx1ZSA9IF9nZXRJbnRlcm5hbEhvb2tzMi5pbml0RW50aXR5VmFsdWU7XG5cbiAgICAgIGluaXRFbnRpdHlWYWx1ZShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEZpZWxkLCBbe1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczcgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIHNob3VsZFVwZGF0ZSA9IF90aGlzJHByb3BzNy5zaG91bGRVcGRhdGUsXG4gICAgICAgICAgZmllbGRDb250ZXh0ID0gX3RoaXMkcHJvcHM3LmZpZWxkQ29udGV4dDtcbiAgICAgIHRoaXMubW91bnRlZCA9IHRydWU7IC8vIFJlZ2lzdGVyIG9uIGluaXRcblxuICAgICAgaWYgKGZpZWxkQ29udGV4dCkge1xuICAgICAgICB2YXIgZ2V0SW50ZXJuYWxIb29rcyA9IGZpZWxkQ29udGV4dC5nZXRJbnRlcm5hbEhvb2tzO1xuXG4gICAgICAgIHZhciBfZ2V0SW50ZXJuYWxIb29rczMgPSBnZXRJbnRlcm5hbEhvb2tzKEhPT0tfTUFSSyksXG4gICAgICAgICAgICByZWdpc3RlckZpZWxkID0gX2dldEludGVybmFsSG9va3MzLnJlZ2lzdGVyRmllbGQ7XG5cbiAgICAgICAgdGhpcy5jYW5jZWxSZWdpc3RlckZ1bmMgPSByZWdpc3RlckZpZWxkKHRoaXMpO1xuICAgICAgfSAvLyBPbmUgbW9yZSByZW5kZXIgZm9yIGNvbXBvbmVudCBpbiBjYXNlIGZpZWxkcyBub3QgcmVhZHlcblxuXG4gICAgICBpZiAoc2hvdWxkVXBkYXRlID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMucmVSZW5kZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0aGlzLmNhbmNlbFJlZ2lzdGVyKCk7XG4gICAgICB0aGlzLnRyaWdnZXJNZXRhRXZlbnQodHJ1ZSk7XG4gICAgICB0aGlzLm1vdW50ZWQgPSBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVSZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVSZW5kZXIoKSB7XG4gICAgICBpZiAoIXRoaXMubW91bnRlZCkgcmV0dXJuO1xuICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIHJlc2V0Q291bnQgPSB0aGlzLnN0YXRlLnJlc2V0Q291bnQ7XG4gICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuO1xuXG4gICAgICB2YXIgX3RoaXMkZ2V0T25seUNoaWxkID0gdGhpcy5nZXRPbmx5Q2hpbGQoY2hpbGRyZW4pLFxuICAgICAgICAgIGNoaWxkID0gX3RoaXMkZ2V0T25seUNoaWxkLmNoaWxkLFxuICAgICAgICAgIGlzRnVuY3Rpb24gPSBfdGhpcyRnZXRPbmx5Q2hpbGQuaXNGdW5jdGlvbjsgLy8gTm90IG5lZWQgdG8gYGNsb25lRWxlbWVudGAgc2luY2UgdXNlciBjYW4gaGFuZGxlIHRoaXMgaW4gcmVuZGVyIGZ1bmN0aW9uIHNlbGZcblxuXG4gICAgICB2YXIgcmV0dXJuQ2hpbGROb2RlO1xuXG4gICAgICBpZiAoaXNGdW5jdGlvbikge1xuICAgICAgICByZXR1cm5DaGlsZE5vZGUgPSBjaGlsZDtcbiAgICAgIH0gZWxzZSBpZiAoIC8qI19fUFVSRV9fKi9SZWFjdC5pc1ZhbGlkRWxlbWVudChjaGlsZCkpIHtcbiAgICAgICAgcmV0dXJuQ2hpbGROb2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNsb25lRWxlbWVudChjaGlsZCwgdGhpcy5nZXRDb250cm9sbGVkKGNoaWxkLnByb3BzKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuaW5nKCFjaGlsZCwgJ2BjaGlsZHJlbmAgb2YgRmllbGQgaXMgbm90IHZhbGlkYXRlIFJlYWN0RWxlbWVudC4nKTtcbiAgICAgICAgcmV0dXJuQ2hpbGROb2RlID0gY2hpbGQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwge1xuICAgICAgICBrZXk6IHJlc2V0Q291bnRcbiAgICAgIH0sIHJldHVybkNoaWxkTm9kZSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEZpZWxkO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5GaWVsZC5jb250ZXh0VHlwZSA9IEZpZWxkQ29udGV4dDtcbkZpZWxkLmRlZmF1bHRQcm9wcyA9IHtcbiAgdHJpZ2dlcjogJ29uQ2hhbmdlJyxcbiAgdmFsdWVQcm9wTmFtZTogJ3ZhbHVlJ1xufTtcblxuZnVuY3Rpb24gV3JhcHBlckZpZWxkKF9yZWY1KSB7XG4gIHZhciBuYW1lID0gX3JlZjUubmFtZSxcbiAgICAgIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmNSwgX2V4Y2x1ZGVkKTtcblxuICB2YXIgZmllbGRDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChGaWVsZENvbnRleHQpO1xuICB2YXIgbmFtZVBhdGggPSBuYW1lICE9PSB1bmRlZmluZWQgPyBnZXROYW1lUGF0aChuYW1lKSA6IHVuZGVmaW5lZDtcbiAgdmFyIGtleSA9ICdrZWVwJztcblxuICBpZiAoIXJlc3RQcm9wcy5pc0xpc3RGaWVsZCkge1xuICAgIGtleSA9IFwiX1wiLmNvbmNhdCgobmFtZVBhdGggfHwgW10pLmpvaW4oJ18nKSk7XG4gIH0gLy8gV2FybmluZyBpZiBpdCdzIGEgZGlyZWN0bHkgbGlzdCBmaWVsZC5cbiAgLy8gV2UgY2FuIHN0aWxsIHN1cHBvcnQgbXVsdGlwbGUgbGV2ZWwgZmllbGQgcHJlc2VydmUuXG5cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiByZXN0UHJvcHMucHJlc2VydmUgPT09IGZhbHNlICYmIHJlc3RQcm9wcy5pc0xpc3RGaWVsZCAmJiBuYW1lUGF0aC5sZW5ndGggPD0gMSkge1xuICAgIHdhcm5pbmcoZmFsc2UsICdgcHJlc2VydmVgIHNob3VsZCBub3QgYXBwbHkgb24gRm9ybS5MaXN0IGZpZWxkcy4nKTtcbiAgfVxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGaWVsZCwgX2V4dGVuZHMoe1xuICAgIGtleToga2V5LFxuICAgIG5hbWU6IG5hbWVQYXRoXG4gIH0sIHJlc3RQcm9wcywge1xuICAgIGZpZWxkQ29udGV4dDogZmllbGRDb250ZXh0XG4gIH0pKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgV3JhcHBlckZpZWxkOyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbnZhciBMaXN0Q29udGV4dCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpO1xuZXhwb3J0IGRlZmF1bHQgTGlzdENvbnRleHQ7IiwiaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheVwiO1xuaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2tcIjtcbmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzXCI7XG5pbXBvcnQgX3R5cGVvZiBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mXCI7XG52YXIgU1BMSVQgPSAnX19AZmllbGRfc3BsaXRfXyc7XG4vKipcbiAqIENvbnZlcnQgbmFtZSBwYXRoIGludG8gc3RyaW5nIHRvIGZhc3QgdGhlIGZldGNoIHNwZWVkIG9mIE1hcC5cbiAqL1xuXG5mdW5jdGlvbiBub3JtYWxpemUobmFtZVBhdGgpIHtcbiAgcmV0dXJuIG5hbWVQYXRoLm1hcChmdW5jdGlvbiAoY2VsbCkge1xuICAgIHJldHVybiBcIlwiLmNvbmNhdChfdHlwZW9mKGNlbGwpLCBcIjpcIikuY29uY2F0KGNlbGwpO1xuICB9KSAvLyBNYWdpYyBzcGxpdFxuICAuam9pbihTUExJVCk7XG59XG4vKipcbiAqIE5hbWVNYXAgbGlrZSBhIGBNYXBgIGJ1dCBhY2NlcHRzIGBzdHJpbmdbXWAgYXMga2V5LlxuICovXG5cblxudmFyIE5hbWVNYXAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBOYW1lTWFwKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOYW1lTWFwKTtcblxuICAgIHRoaXMua3ZzID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE5hbWVNYXAsIFt7XG4gICAga2V5OiBcInNldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgdGhpcy5rdnMuc2V0KG5vcm1hbGl6ZShrZXkpLCB2YWx1ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQoa2V5KSB7XG4gICAgICByZXR1cm4gdGhpcy5rdnMuZ2V0KG5vcm1hbGl6ZShrZXkpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZShrZXksIHVwZGF0ZXIpIHtcbiAgICAgIHZhciBvcmlnaW4gPSB0aGlzLmdldChrZXkpO1xuICAgICAgdmFyIG5leHQgPSB1cGRhdGVyKG9yaWdpbik7XG5cbiAgICAgIGlmICghbmV4dCkge1xuICAgICAgICB0aGlzLmRlbGV0ZShrZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXQoa2V5LCBuZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZGVsZXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUoa2V5KSB7XG4gICAgICB0aGlzLmt2cy5kZWxldGUobm9ybWFsaXplKGtleSkpO1xuICAgIH0gLy8gU2luY2Ugd2Ugb25seSB1c2UgdGhpcyBpbiB0ZXN0LCBsZXQgc2ltcGx5IHJlYWxpemUgdGhpc1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibWFwXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hcChjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmt2cy5lbnRyaWVzKCkpLm1hcChmdW5jdGlvbiAoX3JlZikge1xuICAgICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSxcbiAgICAgICAgICAgIGtleSA9IF9yZWYyWzBdLFxuICAgICAgICAgICAgdmFsdWUgPSBfcmVmMlsxXTtcblxuICAgICAgICB2YXIgY2VsbHMgPSBrZXkuc3BsaXQoU1BMSVQpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soe1xuICAgICAgICAgIGtleTogY2VsbHMubWFwKGZ1bmN0aW9uIChjZWxsKSB7XG4gICAgICAgICAgICB2YXIgX2NlbGwkbWF0Y2ggPSBjZWxsLm1hdGNoKC9eKFteOl0qKTooLiopJC8pLFxuICAgICAgICAgICAgICAgIF9jZWxsJG1hdGNoMiA9IF9zbGljZWRUb0FycmF5KF9jZWxsJG1hdGNoLCAzKSxcbiAgICAgICAgICAgICAgICB0eXBlID0gX2NlbGwkbWF0Y2gyWzFdLFxuICAgICAgICAgICAgICAgIHVuaXQgPSBfY2VsbCRtYXRjaDJbMl07XG5cbiAgICAgICAgICAgIHJldHVybiB0eXBlID09PSAnbnVtYmVyJyA/IE51bWJlcih1bml0KSA6IHVuaXQ7XG4gICAgICAgICAgfSksXG4gICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInRvSlNPTlwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICB2YXIganNvbiA9IHt9O1xuICAgICAgdGhpcy5tYXAoZnVuY3Rpb24gKF9yZWYzKSB7XG4gICAgICAgIHZhciBrZXkgPSBfcmVmMy5rZXksXG4gICAgICAgICAgICB2YWx1ZSA9IF9yZWYzLnZhbHVlO1xuICAgICAgICBqc29uW2tleS5qb2luKCcuJyldID0gdmFsdWU7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4ganNvbjtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTmFtZU1hcDtcbn0oKTtcblxuZXhwb3J0IGRlZmF1bHQgTmFtZU1hcDsiLCJpbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiO1xuaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXlcIjtcbmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzXCI7XG5pbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVja1wiO1xudmFyIF9leGNsdWRlZCA9IFtcIm5hbWVcIiwgXCJlcnJvcnNcIl07XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgd2FybmluZyBmcm9tIFwicmMtdXRpbC9lcy93YXJuaW5nXCI7XG5pbXBvcnQgeyBIT09LX01BUksgfSBmcm9tICcuL0ZpZWxkQ29udGV4dCc7XG5pbXBvcnQgeyBhbGxQcm9taXNlRmluaXNoIH0gZnJvbSAnLi91dGlscy9hc3luY1V0aWwnO1xuaW1wb3J0IE5hbWVNYXAgZnJvbSAnLi91dGlscy9OYW1lTWFwJztcbmltcG9ydCB7IGRlZmF1bHRWYWxpZGF0ZU1lc3NhZ2VzIH0gZnJvbSAnLi91dGlscy9tZXNzYWdlcyc7XG5pbXBvcnQgeyBjbG9uZUJ5TmFtZVBhdGhMaXN0LCBjb250YWluc05hbWVQYXRoLCBnZXROYW1lUGF0aCwgZ2V0VmFsdWUsIG1hdGNoTmFtZVBhdGgsIHNldFZhbHVlLCBzZXRWYWx1ZXMgfSBmcm9tICcuL3V0aWxzL3ZhbHVlVXRpbCc7XG5leHBvcnQgdmFyIEZvcm1TdG9yZSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlQ2xhc3MoZnVuY3Rpb24gRm9ybVN0b3JlKGZvcmNlUm9vdFVwZGF0ZSkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGb3JtU3RvcmUpO1xuXG4gIHRoaXMuZm9ybUhvb2tlZCA9IGZhbHNlO1xuICB0aGlzLmZvcmNlUm9vdFVwZGF0ZSA9IHZvaWQgMDtcbiAgdGhpcy5zdWJzY3JpYmFibGUgPSB0cnVlO1xuICB0aGlzLnN0b3JlID0ge307XG4gIHRoaXMuZmllbGRFbnRpdGllcyA9IFtdO1xuICB0aGlzLmluaXRpYWxWYWx1ZXMgPSB7fTtcbiAgdGhpcy5jYWxsYmFja3MgPSB7fTtcbiAgdGhpcy52YWxpZGF0ZU1lc3NhZ2VzID0gbnVsbDtcbiAgdGhpcy5wcmVzZXJ2ZSA9IG51bGw7XG4gIHRoaXMubGFzdFZhbGlkYXRlUHJvbWlzZSA9IG51bGw7XG5cbiAgdGhpcy5nZXRGb3JtID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBnZXRGaWVsZFZhbHVlOiBfdGhpcy5nZXRGaWVsZFZhbHVlLFxuICAgICAgZ2V0RmllbGRzVmFsdWU6IF90aGlzLmdldEZpZWxkc1ZhbHVlLFxuICAgICAgZ2V0RmllbGRFcnJvcjogX3RoaXMuZ2V0RmllbGRFcnJvcixcbiAgICAgIGdldEZpZWxkV2FybmluZzogX3RoaXMuZ2V0RmllbGRXYXJuaW5nLFxuICAgICAgZ2V0RmllbGRzRXJyb3I6IF90aGlzLmdldEZpZWxkc0Vycm9yLFxuICAgICAgaXNGaWVsZHNUb3VjaGVkOiBfdGhpcy5pc0ZpZWxkc1RvdWNoZWQsXG4gICAgICBpc0ZpZWxkVG91Y2hlZDogX3RoaXMuaXNGaWVsZFRvdWNoZWQsXG4gICAgICBpc0ZpZWxkVmFsaWRhdGluZzogX3RoaXMuaXNGaWVsZFZhbGlkYXRpbmcsXG4gICAgICBpc0ZpZWxkc1ZhbGlkYXRpbmc6IF90aGlzLmlzRmllbGRzVmFsaWRhdGluZyxcbiAgICAgIHJlc2V0RmllbGRzOiBfdGhpcy5yZXNldEZpZWxkcyxcbiAgICAgIHNldEZpZWxkczogX3RoaXMuc2V0RmllbGRzLFxuICAgICAgc2V0RmllbGRzVmFsdWU6IF90aGlzLnNldEZpZWxkc1ZhbHVlLFxuICAgICAgdmFsaWRhdGVGaWVsZHM6IF90aGlzLnZhbGlkYXRlRmllbGRzLFxuICAgICAgc3VibWl0OiBfdGhpcy5zdWJtaXQsXG4gICAgICBnZXRJbnRlcm5hbEhvb2tzOiBfdGhpcy5nZXRJbnRlcm5hbEhvb2tzXG4gICAgfTtcbiAgfTtcblxuICB0aGlzLmdldEludGVybmFsSG9va3MgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKGtleSA9PT0gSE9PS19NQVJLKSB7XG4gICAgICBfdGhpcy5mb3JtSG9va2VkID0gdHJ1ZTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRpc3BhdGNoOiBfdGhpcy5kaXNwYXRjaCxcbiAgICAgICAgaW5pdEVudGl0eVZhbHVlOiBfdGhpcy5pbml0RW50aXR5VmFsdWUsXG4gICAgICAgIHJlZ2lzdGVyRmllbGQ6IF90aGlzLnJlZ2lzdGVyRmllbGQsXG4gICAgICAgIHVzZVN1YnNjcmliZTogX3RoaXMudXNlU3Vic2NyaWJlLFxuICAgICAgICBzZXRJbml0aWFsVmFsdWVzOiBfdGhpcy5zZXRJbml0aWFsVmFsdWVzLFxuICAgICAgICBzZXRDYWxsYmFja3M6IF90aGlzLnNldENhbGxiYWNrcyxcbiAgICAgICAgc2V0VmFsaWRhdGVNZXNzYWdlczogX3RoaXMuc2V0VmFsaWRhdGVNZXNzYWdlcyxcbiAgICAgICAgZ2V0RmllbGRzOiBfdGhpcy5nZXRGaWVsZHMsXG4gICAgICAgIHNldFByZXNlcnZlOiBfdGhpcy5zZXRQcmVzZXJ2ZSxcbiAgICAgICAgZ2V0SW5pdGlhbFZhbHVlOiBfdGhpcy5nZXRJbml0aWFsVmFsdWVcbiAgICAgIH07XG4gICAgfVxuXG4gICAgd2FybmluZyhmYWxzZSwgJ2BnZXRJbnRlcm5hbEhvb2tzYCBpcyBpbnRlcm5hbCB1c2FnZS4gU2hvdWxkIG5vdCBjYWxsIGRpcmVjdGx5LicpO1xuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHRoaXMudXNlU3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliYWJsZSkge1xuICAgIF90aGlzLnN1YnNjcmliYWJsZSA9IHN1YnNjcmliYWJsZTtcbiAgfTtcblxuICB0aGlzLnNldEluaXRpYWxWYWx1ZXMgPSBmdW5jdGlvbiAoaW5pdGlhbFZhbHVlcywgaW5pdCkge1xuICAgIF90aGlzLmluaXRpYWxWYWx1ZXMgPSBpbml0aWFsVmFsdWVzIHx8IHt9O1xuXG4gICAgaWYgKGluaXQpIHtcbiAgICAgIF90aGlzLnN0b3JlID0gc2V0VmFsdWVzKHt9LCBpbml0aWFsVmFsdWVzLCBfdGhpcy5zdG9yZSk7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuZ2V0SW5pdGlhbFZhbHVlID0gZnVuY3Rpb24gKG5hbWVQYXRoKSB7XG4gICAgcmV0dXJuIGdldFZhbHVlKF90aGlzLmluaXRpYWxWYWx1ZXMsIG5hbWVQYXRoKTtcbiAgfTtcblxuICB0aGlzLnNldENhbGxiYWNrcyA9IGZ1bmN0aW9uIChjYWxsYmFja3MpIHtcbiAgICBfdGhpcy5jYWxsYmFja3MgPSBjYWxsYmFja3M7XG4gIH07XG5cbiAgdGhpcy5zZXRWYWxpZGF0ZU1lc3NhZ2VzID0gZnVuY3Rpb24gKHZhbGlkYXRlTWVzc2FnZXMpIHtcbiAgICBfdGhpcy52YWxpZGF0ZU1lc3NhZ2VzID0gdmFsaWRhdGVNZXNzYWdlcztcbiAgfTtcblxuICB0aGlzLnNldFByZXNlcnZlID0gZnVuY3Rpb24gKHByZXNlcnZlKSB7XG4gICAgX3RoaXMucHJlc2VydmUgPSBwcmVzZXJ2ZTtcbiAgfTtcblxuICB0aGlzLnRpbWVvdXRJZCA9IG51bGw7XG5cbiAgdGhpcy53YXJuaW5nVW5ob29rZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIV90aGlzLnRpbWVvdXRJZCAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgX3RoaXMudGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLnRpbWVvdXRJZCA9IG51bGw7XG5cbiAgICAgICAgaWYgKCFfdGhpcy5mb3JtSG9va2VkKSB7XG4gICAgICAgICAgd2FybmluZyhmYWxzZSwgJ0luc3RhbmNlIGNyZWF0ZWQgYnkgYHVzZUZvcm1gIGlzIG5vdCBjb25uZWN0ZWQgdG8gYW55IEZvcm0gZWxlbWVudC4gRm9yZ2V0IHRvIHBhc3MgYGZvcm1gIHByb3A/Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLmdldEZpZWxkRW50aXRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHB1cmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuXG4gICAgaWYgKCFwdXJlKSB7XG4gICAgICByZXR1cm4gX3RoaXMuZmllbGRFbnRpdGllcztcbiAgICB9XG5cbiAgICByZXR1cm4gX3RoaXMuZmllbGRFbnRpdGllcy5maWx0ZXIoZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICByZXR1cm4gZmllbGQuZ2V0TmFtZVBhdGgoKS5sZW5ndGg7XG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5nZXRGaWVsZHNNYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHB1cmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuICAgIHZhciBjYWNoZSA9IG5ldyBOYW1lTWFwKCk7XG5cbiAgICBfdGhpcy5nZXRGaWVsZEVudGl0aWVzKHB1cmUpLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICB2YXIgbmFtZVBhdGggPSBmaWVsZC5nZXROYW1lUGF0aCgpO1xuICAgICAgY2FjaGUuc2V0KG5hbWVQYXRoLCBmaWVsZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY2FjaGU7XG4gIH07XG5cbiAgdGhpcy5nZXRGaWVsZEVudGl0aWVzRm9yTmFtZVBhdGhMaXN0ID0gZnVuY3Rpb24gKG5hbWVMaXN0KSB7XG4gICAgaWYgKCFuYW1lTGlzdCkge1xuICAgICAgcmV0dXJuIF90aGlzLmdldEZpZWxkRW50aXRpZXModHJ1ZSk7XG4gICAgfVxuXG4gICAgdmFyIGNhY2hlID0gX3RoaXMuZ2V0RmllbGRzTWFwKHRydWUpO1xuXG4gICAgcmV0dXJuIG5hbWVMaXN0Lm1hcChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgdmFyIG5hbWVQYXRoID0gZ2V0TmFtZVBhdGgobmFtZSk7XG4gICAgICByZXR1cm4gY2FjaGUuZ2V0KG5hbWVQYXRoKSB8fCB7XG4gICAgICAgIElOVkFMSURBVEVfTkFNRV9QQVRIOiBnZXROYW1lUGF0aChuYW1lKVxuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLmdldEZpZWxkc1ZhbHVlID0gZnVuY3Rpb24gKG5hbWVMaXN0LCBmaWx0ZXJGdW5jKSB7XG4gICAgX3RoaXMud2FybmluZ1VuaG9va2VkKCk7XG5cbiAgICBpZiAobmFtZUxpc3QgPT09IHRydWUgJiYgIWZpbHRlckZ1bmMpIHtcbiAgICAgIHJldHVybiBfdGhpcy5zdG9yZTtcbiAgICB9XG5cbiAgICB2YXIgZmllbGRFbnRpdGllcyA9IF90aGlzLmdldEZpZWxkRW50aXRpZXNGb3JOYW1lUGF0aExpc3QoQXJyYXkuaXNBcnJheShuYW1lTGlzdCkgPyBuYW1lTGlzdCA6IG51bGwpO1xuXG4gICAgdmFyIGZpbHRlcmVkTmFtZUxpc3QgPSBbXTtcbiAgICBmaWVsZEVudGl0aWVzLmZvckVhY2goZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgdmFyIF9lbnRpdHkkaXNMaXN0RmllbGQ7XG5cbiAgICAgIHZhciBuYW1lUGF0aCA9ICdJTlZBTElEQVRFX05BTUVfUEFUSCcgaW4gZW50aXR5ID8gZW50aXR5LklOVkFMSURBVEVfTkFNRV9QQVRIIDogZW50aXR5LmdldE5hbWVQYXRoKCk7IC8vIElnbm9yZSB3aGVuIGl0J3MgYSBsaXN0IGl0ZW0gYW5kIG5vdCBzcGVjaWZpYyB0aGUgbmFtZVBhdGgsXG4gICAgICAvLyBzaW5jZSBwYXJlbnQgZmllbGQgaXMgYWxyZWFkeSB0YWtlIGluIGNvdW50XG5cbiAgICAgIGlmICghbmFtZUxpc3QgJiYgKChfZW50aXR5JGlzTGlzdEZpZWxkID0gZW50aXR5LmlzTGlzdEZpZWxkKSA9PT0gbnVsbCB8fCBfZW50aXR5JGlzTGlzdEZpZWxkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZW50aXR5JGlzTGlzdEZpZWxkLmNhbGwoZW50aXR5KSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWZpbHRlckZ1bmMpIHtcbiAgICAgICAgZmlsdGVyZWROYW1lTGlzdC5wdXNoKG5hbWVQYXRoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBtZXRhID0gJ2dldE1ldGEnIGluIGVudGl0eSA/IGVudGl0eS5nZXRNZXRhKCkgOiBudWxsO1xuXG4gICAgICAgIGlmIChmaWx0ZXJGdW5jKG1ldGEpKSB7XG4gICAgICAgICAgZmlsdGVyZWROYW1lTGlzdC5wdXNoKG5hbWVQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjbG9uZUJ5TmFtZVBhdGhMaXN0KF90aGlzLnN0b3JlLCBmaWx0ZXJlZE5hbWVMaXN0Lm1hcChnZXROYW1lUGF0aCkpO1xuICB9O1xuXG4gIHRoaXMuZ2V0RmllbGRWYWx1ZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgX3RoaXMud2FybmluZ1VuaG9va2VkKCk7XG5cbiAgICB2YXIgbmFtZVBhdGggPSBnZXROYW1lUGF0aChuYW1lKTtcbiAgICByZXR1cm4gZ2V0VmFsdWUoX3RoaXMuc3RvcmUsIG5hbWVQYXRoKTtcbiAgfTtcblxuICB0aGlzLmdldEZpZWxkc0Vycm9yID0gZnVuY3Rpb24gKG5hbWVMaXN0KSB7XG4gICAgX3RoaXMud2FybmluZ1VuaG9va2VkKCk7XG5cbiAgICB2YXIgZmllbGRFbnRpdGllcyA9IF90aGlzLmdldEZpZWxkRW50aXRpZXNGb3JOYW1lUGF0aExpc3QobmFtZUxpc3QpO1xuXG4gICAgcmV0dXJuIGZpZWxkRW50aXRpZXMubWFwKGZ1bmN0aW9uIChlbnRpdHksIGluZGV4KSB7XG4gICAgICBpZiAoZW50aXR5ICYmICEoJ0lOVkFMSURBVEVfTkFNRV9QQVRIJyBpbiBlbnRpdHkpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbmFtZTogZW50aXR5LmdldE5hbWVQYXRoKCksXG4gICAgICAgICAgZXJyb3JzOiBlbnRpdHkuZ2V0RXJyb3JzKCksXG4gICAgICAgICAgd2FybmluZ3M6IGVudGl0eS5nZXRXYXJuaW5ncygpXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IGdldE5hbWVQYXRoKG5hbWVMaXN0W2luZGV4XSksXG4gICAgICAgIGVycm9yczogW10sXG4gICAgICAgIHdhcm5pbmdzOiBbXVxuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLmdldEZpZWxkRXJyb3IgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIF90aGlzLndhcm5pbmdVbmhvb2tlZCgpO1xuXG4gICAgdmFyIG5hbWVQYXRoID0gZ2V0TmFtZVBhdGgobmFtZSk7XG5cbiAgICB2YXIgZmllbGRFcnJvciA9IF90aGlzLmdldEZpZWxkc0Vycm9yKFtuYW1lUGF0aF0pWzBdO1xuXG4gICAgcmV0dXJuIGZpZWxkRXJyb3IuZXJyb3JzO1xuICB9O1xuXG4gIHRoaXMuZ2V0RmllbGRXYXJuaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBfdGhpcy53YXJuaW5nVW5ob29rZWQoKTtcblxuICAgIHZhciBuYW1lUGF0aCA9IGdldE5hbWVQYXRoKG5hbWUpO1xuXG4gICAgdmFyIGZpZWxkRXJyb3IgPSBfdGhpcy5nZXRGaWVsZHNFcnJvcihbbmFtZVBhdGhdKVswXTtcblxuICAgIHJldHVybiBmaWVsZEVycm9yLndhcm5pbmdzO1xuICB9O1xuXG4gIHRoaXMuaXNGaWVsZHNUb3VjaGVkID0gZnVuY3Rpb24gKCkge1xuICAgIF90aGlzLndhcm5pbmdVbmhvb2tlZCgpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHZhciBhcmcwID0gYXJnc1swXSxcbiAgICAgICAgYXJnMSA9IGFyZ3NbMV07XG4gICAgdmFyIG5hbWVQYXRoTGlzdDtcbiAgICB2YXIgaXNBbGxGaWVsZHNUb3VjaGVkID0gZmFsc2U7XG5cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgIG5hbWVQYXRoTGlzdCA9IG51bGw7XG4gICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnMCkpIHtcbiAgICAgICAgbmFtZVBhdGhMaXN0ID0gYXJnMC5tYXAoZ2V0TmFtZVBhdGgpO1xuICAgICAgICBpc0FsbEZpZWxkc1RvdWNoZWQgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5hbWVQYXRoTGlzdCA9IG51bGw7XG4gICAgICAgIGlzQWxsRmllbGRzVG91Y2hlZCA9IGFyZzA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hbWVQYXRoTGlzdCA9IGFyZzAubWFwKGdldE5hbWVQYXRoKTtcbiAgICAgIGlzQWxsRmllbGRzVG91Y2hlZCA9IGFyZzE7XG4gICAgfVxuXG4gICAgdmFyIGZpZWxkRW50aXRpZXMgPSBfdGhpcy5nZXRGaWVsZEVudGl0aWVzKHRydWUpO1xuXG4gICAgdmFyIGlzRmllbGRUb3VjaGVkID0gZnVuY3Rpb24gaXNGaWVsZFRvdWNoZWQoZmllbGQpIHtcbiAgICAgIHJldHVybiBmaWVsZC5pc0ZpZWxkVG91Y2hlZCgpO1xuICAgIH07IC8vID09PT09IFdpbGwgZ2V0IGZ1bGx5IGNvbXBhcmUgd2hlbiBub3QgY29uZmlnIG5hbWVQYXRoTGlzdCA9PT09PVxuXG5cbiAgICBpZiAoIW5hbWVQYXRoTGlzdCkge1xuICAgICAgcmV0dXJuIGlzQWxsRmllbGRzVG91Y2hlZCA/IGZpZWxkRW50aXRpZXMuZXZlcnkoaXNGaWVsZFRvdWNoZWQpIDogZmllbGRFbnRpdGllcy5zb21lKGlzRmllbGRUb3VjaGVkKTtcbiAgICB9IC8vIEdlbmVyYXRlIGEgbmVzdCB0cmVlIGZvciB2YWxpZGF0ZVxuXG5cbiAgICB2YXIgbWFwID0gbmV3IE5hbWVNYXAoKTtcbiAgICBuYW1lUGF0aExpc3QuZm9yRWFjaChmdW5jdGlvbiAoc2hvcnROYW1lUGF0aCkge1xuICAgICAgbWFwLnNldChzaG9ydE5hbWVQYXRoLCBbXSk7XG4gICAgfSk7XG4gICAgZmllbGRFbnRpdGllcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgdmFyIGZpZWxkTmFtZVBhdGggPSBmaWVsZC5nZXROYW1lUGF0aCgpOyAvLyBGaW5kIG1hdGNoZWQgZW50aXR5IGFuZCBwdXQgaW50byBsaXN0XG5cbiAgICAgIG5hbWVQYXRoTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChzaG9ydE5hbWVQYXRoKSB7XG4gICAgICAgIGlmIChzaG9ydE5hbWVQYXRoLmV2ZXJ5KGZ1bmN0aW9uIChuYW1lVW5pdCwgaSkge1xuICAgICAgICAgIHJldHVybiBmaWVsZE5hbWVQYXRoW2ldID09PSBuYW1lVW5pdDtcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICBtYXAudXBkYXRlKHNob3J0TmFtZVBhdGgsIGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgICAgICAgICByZXR1cm4gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShsaXN0KSwgW2ZpZWxkXSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pOyAvLyBDaGVjayBpZiBOYW1lTWFwIHZhbHVlIGlzIHRvdWNoZWRcblxuICAgIHZhciBpc05hbWVQYXRoTGlzdFRvdWNoZWQgPSBmdW5jdGlvbiBpc05hbWVQYXRoTGlzdFRvdWNoZWQoZW50aXRpZXMpIHtcbiAgICAgIHJldHVybiBlbnRpdGllcy5zb21lKGlzRmllbGRUb3VjaGVkKTtcbiAgICB9O1xuXG4gICAgdmFyIG5hbWVQYXRoTGlzdEVudGl0aWVzID0gbWFwLm1hcChmdW5jdGlvbiAoX3JlZikge1xuICAgICAgdmFyIHZhbHVlID0gX3JlZi52YWx1ZTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaXNBbGxGaWVsZHNUb3VjaGVkID8gbmFtZVBhdGhMaXN0RW50aXRpZXMuZXZlcnkoaXNOYW1lUGF0aExpc3RUb3VjaGVkKSA6IG5hbWVQYXRoTGlzdEVudGl0aWVzLnNvbWUoaXNOYW1lUGF0aExpc3RUb3VjaGVkKTtcbiAgfTtcblxuICB0aGlzLmlzRmllbGRUb3VjaGVkID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBfdGhpcy53YXJuaW5nVW5ob29rZWQoKTtcblxuICAgIHJldHVybiBfdGhpcy5pc0ZpZWxkc1RvdWNoZWQoW25hbWVdKTtcbiAgfTtcblxuICB0aGlzLmlzRmllbGRzVmFsaWRhdGluZyA9IGZ1bmN0aW9uIChuYW1lTGlzdCkge1xuICAgIF90aGlzLndhcm5pbmdVbmhvb2tlZCgpO1xuXG4gICAgdmFyIGZpZWxkRW50aXRpZXMgPSBfdGhpcy5nZXRGaWVsZEVudGl0aWVzKCk7XG5cbiAgICBpZiAoIW5hbWVMaXN0KSB7XG4gICAgICByZXR1cm4gZmllbGRFbnRpdGllcy5zb21lKGZ1bmN0aW9uICh0ZXN0RmllbGQpIHtcbiAgICAgICAgcmV0dXJuIHRlc3RGaWVsZC5pc0ZpZWxkVmFsaWRhdGluZygpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIG5hbWVQYXRoTGlzdCA9IG5hbWVMaXN0Lm1hcChnZXROYW1lUGF0aCk7XG4gICAgcmV0dXJuIGZpZWxkRW50aXRpZXMuc29tZShmdW5jdGlvbiAodGVzdEZpZWxkKSB7XG4gICAgICB2YXIgZmllbGROYW1lUGF0aCA9IHRlc3RGaWVsZC5nZXROYW1lUGF0aCgpO1xuICAgICAgcmV0dXJuIGNvbnRhaW5zTmFtZVBhdGgobmFtZVBhdGhMaXN0LCBmaWVsZE5hbWVQYXRoKSAmJiB0ZXN0RmllbGQuaXNGaWVsZFZhbGlkYXRpbmcoKTtcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLmlzRmllbGRWYWxpZGF0aW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBfdGhpcy53YXJuaW5nVW5ob29rZWQoKTtcblxuICAgIHJldHVybiBfdGhpcy5pc0ZpZWxkc1ZhbGlkYXRpbmcoW25hbWVdKTtcbiAgfTtcblxuICB0aGlzLnJlc2V0V2l0aEZpZWxkSW5pdGlhbFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbmZvID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICAvLyBDcmVhdGUgY2FjaGVcbiAgICB2YXIgY2FjaGUgPSBuZXcgTmFtZU1hcCgpO1xuXG4gICAgdmFyIGZpZWxkRW50aXRpZXMgPSBfdGhpcy5nZXRGaWVsZEVudGl0aWVzKHRydWUpO1xuXG4gICAgZmllbGRFbnRpdGllcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgdmFyIGluaXRpYWxWYWx1ZSA9IGZpZWxkLnByb3BzLmluaXRpYWxWYWx1ZTtcbiAgICAgIHZhciBuYW1lUGF0aCA9IGZpZWxkLmdldE5hbWVQYXRoKCk7IC8vIFJlY29yZCBvbmx5IGlmIGhhcyBgaW5pdGlhbFZhbHVlYFxuXG4gICAgICBpZiAoaW5pdGlhbFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHJlY29yZHMgPSBjYWNoZS5nZXQobmFtZVBhdGgpIHx8IG5ldyBTZXQoKTtcbiAgICAgICAgcmVjb3Jkcy5hZGQoe1xuICAgICAgICAgIGVudGl0eTogZmllbGQsXG4gICAgICAgICAgdmFsdWU6IGluaXRpYWxWYWx1ZVxuICAgICAgICB9KTtcbiAgICAgICAgY2FjaGUuc2V0KG5hbWVQYXRoLCByZWNvcmRzKTtcbiAgICAgIH1cbiAgICB9KTsgLy8gUmVzZXRcblxuICAgIHZhciByZXNldFdpdGhGaWVsZHMgPSBmdW5jdGlvbiByZXNldFdpdGhGaWVsZHMoZW50aXRpZXMpIHtcbiAgICAgIGVudGl0aWVzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgIHZhciBpbml0aWFsVmFsdWUgPSBmaWVsZC5wcm9wcy5pbml0aWFsVmFsdWU7XG5cbiAgICAgICAgaWYgKGluaXRpYWxWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFyIG5hbWVQYXRoID0gZmllbGQuZ2V0TmFtZVBhdGgoKTtcblxuICAgICAgICAgIHZhciBmb3JtSW5pdGlhbFZhbHVlID0gX3RoaXMuZ2V0SW5pdGlhbFZhbHVlKG5hbWVQYXRoKTtcblxuICAgICAgICAgIGlmIChmb3JtSW5pdGlhbFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIFdhcm5pbmcgaWYgY29uZmxpY3Qgd2l0aCBmb3JtIGluaXRpYWxWYWx1ZXMgYW5kIGRvIG5vdCBtb2RpZnkgdmFsdWVcbiAgICAgICAgICAgIHdhcm5pbmcoZmFsc2UsIFwiRm9ybSBhbHJlYWR5IHNldCAnaW5pdGlhbFZhbHVlcycgd2l0aCBwYXRoICdcIi5jb25jYXQobmFtZVBhdGguam9pbignLicpLCBcIicuIEZpZWxkIGNhbiBub3Qgb3ZlcndyaXRlIGl0LlwiKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciByZWNvcmRzID0gY2FjaGUuZ2V0KG5hbWVQYXRoKTtcblxuICAgICAgICAgICAgaWYgKHJlY29yZHMgJiYgcmVjb3Jkcy5zaXplID4gMSkge1xuICAgICAgICAgICAgICAvLyBXYXJuaW5nIGlmIG11bHRpcGxlIGZpZWxkIHNldCBgaW5pdGlhbFZhbHVlYGFuZCBkbyBub3QgbW9kaWZ5IHZhbHVlXG4gICAgICAgICAgICAgIHdhcm5pbmcoZmFsc2UsIFwiTXVsdGlwbGUgRmllbGQgd2l0aCBwYXRoICdcIi5jb25jYXQobmFtZVBhdGguam9pbignLicpLCBcIicgc2V0ICdpbml0aWFsVmFsdWUnLiBDYW4gbm90IGRlY2lkZSB3aGljaCBvbmUgdG8gcGljay5cIikpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWNvcmRzKSB7XG4gICAgICAgICAgICAgIHZhciBvcmlnaW5WYWx1ZSA9IF90aGlzLmdldEZpZWxkVmFsdWUobmFtZVBhdGgpOyAvLyBTZXQgYGluaXRpYWxWYWx1ZWBcblxuXG4gICAgICAgICAgICAgIGlmICghaW5mby5za2lwRXhpc3QgfHwgb3JpZ2luVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnN0b3JlID0gc2V0VmFsdWUoX3RoaXMuc3RvcmUsIG5hbWVQYXRoLCBfdG9Db25zdW1hYmxlQXJyYXkocmVjb3JkcylbMF0udmFsdWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIHJlcXVpcmVkRmllbGRFbnRpdGllcztcblxuICAgIGlmIChpbmZvLmVudGl0aWVzKSB7XG4gICAgICByZXF1aXJlZEZpZWxkRW50aXRpZXMgPSBpbmZvLmVudGl0aWVzO1xuICAgIH0gZWxzZSBpZiAoaW5mby5uYW1lUGF0aExpc3QpIHtcbiAgICAgIHJlcXVpcmVkRmllbGRFbnRpdGllcyA9IFtdO1xuICAgICAgaW5mby5uYW1lUGF0aExpc3QuZm9yRWFjaChmdW5jdGlvbiAobmFtZVBhdGgpIHtcbiAgICAgICAgdmFyIHJlY29yZHMgPSBjYWNoZS5nZXQobmFtZVBhdGgpO1xuXG4gICAgICAgIGlmIChyZWNvcmRzKSB7XG4gICAgICAgICAgdmFyIF9yZXF1aXJlZEZpZWxkRW50aXRpZTtcblxuICAgICAgICAgIChfcmVxdWlyZWRGaWVsZEVudGl0aWUgPSByZXF1aXJlZEZpZWxkRW50aXRpZXMpLnB1c2guYXBwbHkoX3JlcXVpcmVkRmllbGRFbnRpdGllLCBfdG9Db25zdW1hYmxlQXJyYXkoX3RvQ29uc3VtYWJsZUFycmF5KHJlY29yZHMpLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgcmV0dXJuIHIuZW50aXR5O1xuICAgICAgICAgIH0pKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXF1aXJlZEZpZWxkRW50aXRpZXMgPSBmaWVsZEVudGl0aWVzO1xuICAgIH1cblxuICAgIHJlc2V0V2l0aEZpZWxkcyhyZXF1aXJlZEZpZWxkRW50aXRpZXMpO1xuICB9O1xuXG4gIHRoaXMucmVzZXRGaWVsZHMgPSBmdW5jdGlvbiAobmFtZUxpc3QpIHtcbiAgICBfdGhpcy53YXJuaW5nVW5ob29rZWQoKTtcblxuICAgIHZhciBwcmV2U3RvcmUgPSBfdGhpcy5zdG9yZTtcblxuICAgIGlmICghbmFtZUxpc3QpIHtcbiAgICAgIF90aGlzLnN0b3JlID0gc2V0VmFsdWVzKHt9LCBfdGhpcy5pbml0aWFsVmFsdWVzKTtcblxuICAgICAgX3RoaXMucmVzZXRXaXRoRmllbGRJbml0aWFsVmFsdWUoKTtcblxuICAgICAgX3RoaXMubm90aWZ5T2JzZXJ2ZXJzKHByZXZTdG9yZSwgbnVsbCwge1xuICAgICAgICB0eXBlOiAncmVzZXQnXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gUmVzZXQgYnkgYG5hbWVMaXN0YFxuXG5cbiAgICB2YXIgbmFtZVBhdGhMaXN0ID0gbmFtZUxpc3QubWFwKGdldE5hbWVQYXRoKTtcbiAgICBuYW1lUGF0aExpc3QuZm9yRWFjaChmdW5jdGlvbiAobmFtZVBhdGgpIHtcbiAgICAgIHZhciBpbml0aWFsVmFsdWUgPSBfdGhpcy5nZXRJbml0aWFsVmFsdWUobmFtZVBhdGgpO1xuXG4gICAgICBfdGhpcy5zdG9yZSA9IHNldFZhbHVlKF90aGlzLnN0b3JlLCBuYW1lUGF0aCwgaW5pdGlhbFZhbHVlKTtcbiAgICB9KTtcblxuICAgIF90aGlzLnJlc2V0V2l0aEZpZWxkSW5pdGlhbFZhbHVlKHtcbiAgICAgIG5hbWVQYXRoTGlzdDogbmFtZVBhdGhMaXN0XG4gICAgfSk7XG5cbiAgICBfdGhpcy5ub3RpZnlPYnNlcnZlcnMocHJldlN0b3JlLCBuYW1lUGF0aExpc3QsIHtcbiAgICAgIHR5cGU6ICdyZXNldCdcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLnNldEZpZWxkcyA9IGZ1bmN0aW9uIChmaWVsZHMpIHtcbiAgICBfdGhpcy53YXJuaW5nVW5ob29rZWQoKTtcblxuICAgIHZhciBwcmV2U3RvcmUgPSBfdGhpcy5zdG9yZTtcbiAgICBmaWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGREYXRhKSB7XG4gICAgICB2YXIgbmFtZSA9IGZpZWxkRGF0YS5uYW1lLFxuICAgICAgICAgIGVycm9ycyA9IGZpZWxkRGF0YS5lcnJvcnMsXG4gICAgICAgICAgZGF0YSA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhmaWVsZERhdGEsIF9leGNsdWRlZCk7XG5cbiAgICAgIHZhciBuYW1lUGF0aCA9IGdldE5hbWVQYXRoKG5hbWUpOyAvLyBWYWx1ZVxuXG4gICAgICBpZiAoJ3ZhbHVlJyBpbiBkYXRhKSB7XG4gICAgICAgIF90aGlzLnN0b3JlID0gc2V0VmFsdWUoX3RoaXMuc3RvcmUsIG5hbWVQYXRoLCBkYXRhLnZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMubm90aWZ5T2JzZXJ2ZXJzKHByZXZTdG9yZSwgW25hbWVQYXRoXSwge1xuICAgICAgICB0eXBlOiAnc2V0RmllbGQnLFxuICAgICAgICBkYXRhOiBmaWVsZERhdGFcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuZ2V0RmllbGRzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbnRpdGllcyA9IF90aGlzLmdldEZpZWxkRW50aXRpZXModHJ1ZSk7XG5cbiAgICB2YXIgZmllbGRzID0gZW50aXRpZXMubWFwKGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgdmFyIG5hbWVQYXRoID0gZmllbGQuZ2V0TmFtZVBhdGgoKTtcbiAgICAgIHZhciBtZXRhID0gZmllbGQuZ2V0TWV0YSgpO1xuXG4gICAgICB2YXIgZmllbGREYXRhID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtZXRhKSwge30sIHtcbiAgICAgICAgbmFtZTogbmFtZVBhdGgsXG4gICAgICAgIHZhbHVlOiBfdGhpcy5nZXRGaWVsZFZhbHVlKG5hbWVQYXRoKVxuICAgICAgfSk7XG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmaWVsZERhdGEsICdvcmlnaW5SQ0ZpZWxkJywge1xuICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZmllbGREYXRhO1xuICAgIH0pO1xuICAgIHJldHVybiBmaWVsZHM7XG4gIH07XG5cbiAgdGhpcy5pbml0RW50aXR5VmFsdWUgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgdmFyIGluaXRpYWxWYWx1ZSA9IGVudGl0eS5wcm9wcy5pbml0aWFsVmFsdWU7XG5cbiAgICBpZiAoaW5pdGlhbFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBuYW1lUGF0aCA9IGVudGl0eS5nZXROYW1lUGF0aCgpO1xuICAgICAgdmFyIHByZXZWYWx1ZSA9IGdldFZhbHVlKF90aGlzLnN0b3JlLCBuYW1lUGF0aCk7XG5cbiAgICAgIGlmIChwcmV2VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBfdGhpcy5zdG9yZSA9IHNldFZhbHVlKF90aGlzLnN0b3JlLCBuYW1lUGF0aCwgaW5pdGlhbFZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdGhpcy5yZWdpc3RlckZpZWxkID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgIF90aGlzLmZpZWxkRW50aXRpZXMucHVzaChlbnRpdHkpOyAvLyBTZXQgaW5pdGlhbCB2YWx1ZXNcblxuXG4gICAgaWYgKGVudGl0eS5wcm9wcy5pbml0aWFsVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIHByZXZTdG9yZSA9IF90aGlzLnN0b3JlO1xuXG4gICAgICBfdGhpcy5yZXNldFdpdGhGaWVsZEluaXRpYWxWYWx1ZSh7XG4gICAgICAgIGVudGl0aWVzOiBbZW50aXR5XSxcbiAgICAgICAgc2tpcEV4aXN0OiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgX3RoaXMubm90aWZ5T2JzZXJ2ZXJzKHByZXZTdG9yZSwgW2VudGl0eS5nZXROYW1lUGF0aCgpXSwge1xuICAgICAgICB0eXBlOiAndmFsdWVVcGRhdGUnLFxuICAgICAgICBzb3VyY2U6ICdpbnRlcm5hbCdcbiAgICAgIH0pO1xuICAgIH0gLy8gdW4tcmVnaXN0ZXIgZmllbGQgY2FsbGJhY2tcblxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChpc0xpc3RGaWVsZCwgcHJlc2VydmUpIHtcbiAgICAgIHZhciBzdWJOYW1lUGF0aCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogW107XG4gICAgICBfdGhpcy5maWVsZEVudGl0aWVzID0gX3RoaXMuZmllbGRFbnRpdGllcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0gIT09IGVudGl0eTtcbiAgICAgIH0pOyAvLyBDbGVhbiB1cCBzdG9yZSB2YWx1ZSBpZiBub3QgcHJlc2VydmVcblxuICAgICAgdmFyIG1lcmdlZFByZXNlcnZlID0gcHJlc2VydmUgIT09IHVuZGVmaW5lZCA/IHByZXNlcnZlIDogX3RoaXMucHJlc2VydmU7XG5cbiAgICAgIGlmIChtZXJnZWRQcmVzZXJ2ZSA9PT0gZmFsc2UgJiYgKCFpc0xpc3RGaWVsZCB8fCBzdWJOYW1lUGF0aC5sZW5ndGggPiAxKSkge1xuICAgICAgICB2YXIgbmFtZVBhdGggPSBlbnRpdHkuZ2V0TmFtZVBhdGgoKTtcbiAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9IGlzTGlzdEZpZWxkID8gdW5kZWZpbmVkIDogZ2V0VmFsdWUoX3RoaXMuaW5pdGlhbFZhbHVlcywgbmFtZVBhdGgpO1xuXG4gICAgICAgIGlmIChuYW1lUGF0aC5sZW5ndGggJiYgX3RoaXMuZ2V0RmllbGRWYWx1ZShuYW1lUGF0aCkgIT09IGRlZmF1bHRWYWx1ZSAmJiBfdGhpcy5maWVsZEVudGl0aWVzLmV2ZXJ5KGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgIHJldHVybiAoLy8gT25seSByZXNldCB3aGVuIG5vIG5hbWVQYXRoIGV4aXN0XG4gICAgICAgICAgICAhbWF0Y2hOYW1lUGF0aChmaWVsZC5nZXROYW1lUGF0aCgpLCBuYW1lUGF0aClcbiAgICAgICAgICApO1xuICAgICAgICB9KSkge1xuICAgICAgICAgIHZhciBfcHJldlN0b3JlID0gX3RoaXMuc3RvcmU7XG4gICAgICAgICAgX3RoaXMuc3RvcmUgPSBzZXRWYWx1ZShfcHJldlN0b3JlLCBuYW1lUGF0aCwgZGVmYXVsdFZhbHVlLCB0cnVlKTsgLy8gTm90aWZ5IHRoYXQgZmllbGQgaXMgdW5tb3VudFxuXG4gICAgICAgICAgX3RoaXMubm90aWZ5T2JzZXJ2ZXJzKF9wcmV2U3RvcmUsIFtuYW1lUGF0aF0sIHtcbiAgICAgICAgICAgIHR5cGU6ICdyZW1vdmUnXG4gICAgICAgICAgfSk7IC8vIERlcGVuZGVuY2llcyB1cGRhdGVcblxuXG4gICAgICAgICAgX3RoaXMudHJpZ2dlckRlcGVuZGVuY2llc1VwZGF0ZShfcHJldlN0b3JlLCBuYW1lUGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIHRoaXMuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgY2FzZSAndXBkYXRlVmFsdWUnOlxuICAgICAgICB7XG4gICAgICAgICAgdmFyIG5hbWVQYXRoID0gYWN0aW9uLm5hbWVQYXRoLFxuICAgICAgICAgICAgICB2YWx1ZSA9IGFjdGlvbi52YWx1ZTtcblxuICAgICAgICAgIF90aGlzLnVwZGF0ZVZhbHVlKG5hbWVQYXRoLCB2YWx1ZSk7XG5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICBjYXNlICd2YWxpZGF0ZUZpZWxkJzpcbiAgICAgICAge1xuICAgICAgICAgIHZhciBfbmFtZVBhdGggPSBhY3Rpb24ubmFtZVBhdGgsXG4gICAgICAgICAgICAgIHRyaWdnZXJOYW1lID0gYWN0aW9uLnRyaWdnZXJOYW1lO1xuXG4gICAgICAgICAgX3RoaXMudmFsaWRhdGVGaWVsZHMoW19uYW1lUGF0aF0sIHtcbiAgICAgICAgICAgIHRyaWdnZXJOYW1lOiB0cmlnZ2VyTmFtZVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgZGVmYXVsdDogLy8gQ3VycmVudGx5IHdlIGRvbid0IGhhdmUgb3RoZXIgYWN0aW9uLiBEbyBub3RoaW5nLlxuXG4gICAgfVxuICB9O1xuXG4gIHRoaXMubm90aWZ5T2JzZXJ2ZXJzID0gZnVuY3Rpb24gKHByZXZTdG9yZSwgbmFtZVBhdGhMaXN0LCBpbmZvKSB7XG4gICAgaWYgKF90aGlzLnN1YnNjcmliYWJsZSkge1xuICAgICAgdmFyIG1lcmdlZEluZm8gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGluZm8pLCB7fSwge1xuICAgICAgICBzdG9yZTogX3RoaXMuZ2V0RmllbGRzVmFsdWUodHJ1ZSlcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpcy5nZXRGaWVsZEVudGl0aWVzKCkuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICAgICAgdmFyIG9uU3RvcmVDaGFuZ2UgPSBfcmVmMi5vblN0b3JlQ2hhbmdlO1xuICAgICAgICBvblN0b3JlQ2hhbmdlKHByZXZTdG9yZSwgbmFtZVBhdGhMaXN0LCBtZXJnZWRJbmZvKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBfdGhpcy5mb3JjZVJvb3RVcGRhdGUoKTtcbiAgICB9XG4gIH07XG5cbiAgdGhpcy50cmlnZ2VyRGVwZW5kZW5jaWVzVXBkYXRlID0gZnVuY3Rpb24gKHByZXZTdG9yZSwgbmFtZVBhdGgpIHtcbiAgICB2YXIgY2hpbGRyZW5GaWVsZHMgPSBfdGhpcy5nZXREZXBlbmRlbmN5Q2hpbGRyZW5GaWVsZHMobmFtZVBhdGgpO1xuXG4gICAgaWYgKGNoaWxkcmVuRmllbGRzLmxlbmd0aCkge1xuICAgICAgX3RoaXMudmFsaWRhdGVGaWVsZHMoY2hpbGRyZW5GaWVsZHMpO1xuICAgIH1cblxuICAgIF90aGlzLm5vdGlmeU9ic2VydmVycyhwcmV2U3RvcmUsIGNoaWxkcmVuRmllbGRzLCB7XG4gICAgICB0eXBlOiAnZGVwZW5kZW5jaWVzVXBkYXRlJyxcbiAgICAgIHJlbGF0ZWRGaWVsZHM6IFtuYW1lUGF0aF0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShjaGlsZHJlbkZpZWxkcykpXG4gICAgfSk7XG5cbiAgICByZXR1cm4gY2hpbGRyZW5GaWVsZHM7XG4gIH07XG5cbiAgdGhpcy51cGRhdGVWYWx1ZSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgIHZhciBuYW1lUGF0aCA9IGdldE5hbWVQYXRoKG5hbWUpO1xuICAgIHZhciBwcmV2U3RvcmUgPSBfdGhpcy5zdG9yZTtcbiAgICBfdGhpcy5zdG9yZSA9IHNldFZhbHVlKF90aGlzLnN0b3JlLCBuYW1lUGF0aCwgdmFsdWUpO1xuXG4gICAgX3RoaXMubm90aWZ5T2JzZXJ2ZXJzKHByZXZTdG9yZSwgW25hbWVQYXRoXSwge1xuICAgICAgdHlwZTogJ3ZhbHVlVXBkYXRlJyxcbiAgICAgIHNvdXJjZTogJ2ludGVybmFsJ1xuICAgIH0pOyAvLyBEZXBlbmRlbmNpZXMgdXBkYXRlXG5cblxuICAgIHZhciBjaGlsZHJlbkZpZWxkcyA9IF90aGlzLnRyaWdnZXJEZXBlbmRlbmNpZXNVcGRhdGUocHJldlN0b3JlLCBuYW1lUGF0aCk7IC8vIHRyaWdnZXIgY2FsbGJhY2sgZnVuY3Rpb25cblxuXG4gICAgdmFyIG9uVmFsdWVzQ2hhbmdlID0gX3RoaXMuY2FsbGJhY2tzLm9uVmFsdWVzQ2hhbmdlO1xuXG4gICAgaWYgKG9uVmFsdWVzQ2hhbmdlKSB7XG4gICAgICB2YXIgY2hhbmdlZFZhbHVlcyA9IGNsb25lQnlOYW1lUGF0aExpc3QoX3RoaXMuc3RvcmUsIFtuYW1lUGF0aF0pO1xuICAgICAgb25WYWx1ZXNDaGFuZ2UoY2hhbmdlZFZhbHVlcywgX3RoaXMuZ2V0RmllbGRzVmFsdWUoKSk7XG4gICAgfVxuXG4gICAgX3RoaXMudHJpZ2dlck9uRmllbGRzQ2hhbmdlKFtuYW1lUGF0aF0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShjaGlsZHJlbkZpZWxkcykpKTtcbiAgfTtcblxuICB0aGlzLnNldEZpZWxkc1ZhbHVlID0gZnVuY3Rpb24gKHN0b3JlKSB7XG4gICAgX3RoaXMud2FybmluZ1VuaG9va2VkKCk7XG5cbiAgICB2YXIgcHJldlN0b3JlID0gX3RoaXMuc3RvcmU7XG5cbiAgICBpZiAoc3RvcmUpIHtcbiAgICAgIF90aGlzLnN0b3JlID0gc2V0VmFsdWVzKF90aGlzLnN0b3JlLCBzdG9yZSk7XG4gICAgfVxuXG4gICAgX3RoaXMubm90aWZ5T2JzZXJ2ZXJzKHByZXZTdG9yZSwgbnVsbCwge1xuICAgICAgdHlwZTogJ3ZhbHVlVXBkYXRlJyxcbiAgICAgIHNvdXJjZTogJ2V4dGVybmFsJ1xuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMuZ2V0RGVwZW5kZW5jeUNoaWxkcmVuRmllbGRzID0gZnVuY3Rpb24gKHJvb3ROYW1lUGF0aCkge1xuICAgIHZhciBjaGlsZHJlbiA9IG5ldyBTZXQoKTtcbiAgICB2YXIgY2hpbGRyZW5GaWVsZHMgPSBbXTtcbiAgICB2YXIgZGVwZW5kZW5jaWVzMmZpZWxkcyA9IG5ldyBOYW1lTWFwKCk7XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgbWFwc1xuICAgICAqIENhbiB1c2UgY2FjaGUgdG8gc2F2ZSBwZXJmIGlmIHVzZXIgcmVwb3J0IHBlcmZvcm1hbmNlIGlzc3VlIHdpdGggdGhpc1xuICAgICAqL1xuXG4gICAgX3RoaXMuZ2V0RmllbGRFbnRpdGllcygpLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICB2YXIgZGVwZW5kZW5jaWVzID0gZmllbGQucHJvcHMuZGVwZW5kZW5jaWVzO1xuICAgICAgKGRlcGVuZGVuY2llcyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbiAoZGVwZW5kZW5jeSkge1xuICAgICAgICB2YXIgZGVwZW5kZW5jeU5hbWVQYXRoID0gZ2V0TmFtZVBhdGgoZGVwZW5kZW5jeSk7XG4gICAgICAgIGRlcGVuZGVuY2llczJmaWVsZHMudXBkYXRlKGRlcGVuZGVuY3lOYW1lUGF0aCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBmaWVsZHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG5ldyBTZXQoKTtcbiAgICAgICAgICBmaWVsZHMuYWRkKGZpZWxkKTtcbiAgICAgICAgICByZXR1cm4gZmllbGRzO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdmFyIGZpbGxDaGlsZHJlbiA9IGZ1bmN0aW9uIGZpbGxDaGlsZHJlbihuYW1lUGF0aCkge1xuICAgICAgdmFyIGZpZWxkcyA9IGRlcGVuZGVuY2llczJmaWVsZHMuZ2V0KG5hbWVQYXRoKSB8fCBuZXcgU2V0KCk7XG4gICAgICBmaWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgaWYgKCFjaGlsZHJlbi5oYXMoZmllbGQpKSB7XG4gICAgICAgICAgY2hpbGRyZW4uYWRkKGZpZWxkKTtcbiAgICAgICAgICB2YXIgZmllbGROYW1lUGF0aCA9IGZpZWxkLmdldE5hbWVQYXRoKCk7XG5cbiAgICAgICAgICBpZiAoZmllbGQuaXNGaWVsZERpcnR5KCkgJiYgZmllbGROYW1lUGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNoaWxkcmVuRmllbGRzLnB1c2goZmllbGROYW1lUGF0aCk7XG4gICAgICAgICAgICBmaWxsQ2hpbGRyZW4oZmllbGROYW1lUGF0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgZmlsbENoaWxkcmVuKHJvb3ROYW1lUGF0aCk7XG4gICAgcmV0dXJuIGNoaWxkcmVuRmllbGRzO1xuICB9O1xuXG4gIHRoaXMudHJpZ2dlck9uRmllbGRzQ2hhbmdlID0gZnVuY3Rpb24gKG5hbWVQYXRoTGlzdCwgZmlsZWRFcnJvcnMpIHtcbiAgICB2YXIgb25GaWVsZHNDaGFuZ2UgPSBfdGhpcy5jYWxsYmFja3Mub25GaWVsZHNDaGFuZ2U7XG5cbiAgICBpZiAob25GaWVsZHNDaGFuZ2UpIHtcbiAgICAgIHZhciBmaWVsZHMgPSBfdGhpcy5nZXRGaWVsZHMoKTtcbiAgICAgIC8qKlxuICAgICAgICogRmlsbCBlcnJvcnMgc2luY2UgYGZpZWxkc2AgbWF5IGJlIHJlcGxhY2VkIGJ5IGNvbnRyb2xsZWQgZmllbGRzXG4gICAgICAgKi9cblxuXG4gICAgICBpZiAoZmlsZWRFcnJvcnMpIHtcbiAgICAgICAgdmFyIGNhY2hlID0gbmV3IE5hbWVNYXAoKTtcbiAgICAgICAgZmlsZWRFcnJvcnMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjMpIHtcbiAgICAgICAgICB2YXIgbmFtZSA9IF9yZWYzLm5hbWUsXG4gICAgICAgICAgICAgIGVycm9ycyA9IF9yZWYzLmVycm9ycztcbiAgICAgICAgICBjYWNoZS5zZXQobmFtZSwgZXJyb3JzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgIGZpZWxkLmVycm9ycyA9IGNhY2hlLmdldChmaWVsZC5uYW1lKSB8fCBmaWVsZC5lcnJvcnM7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2hhbmdlZEZpZWxkcyA9IGZpZWxkcy5maWx0ZXIoZnVuY3Rpb24gKF9yZWY0KSB7XG4gICAgICAgIHZhciBmaWVsZE5hbWUgPSBfcmVmNC5uYW1lO1xuICAgICAgICByZXR1cm4gY29udGFpbnNOYW1lUGF0aChuYW1lUGF0aExpc3QsIGZpZWxkTmFtZSk7XG4gICAgICB9KTtcbiAgICAgIG9uRmllbGRzQ2hhbmdlKGNoYW5nZWRGaWVsZHMsIGZpZWxkcyk7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMudmFsaWRhdGVGaWVsZHMgPSBmdW5jdGlvbiAobmFtZUxpc3QsIG9wdGlvbnMpIHtcbiAgICBfdGhpcy53YXJuaW5nVW5ob29rZWQoKTtcblxuICAgIHZhciBwcm92aWRlTmFtZUxpc3QgPSAhIW5hbWVMaXN0O1xuICAgIHZhciBuYW1lUGF0aExpc3QgPSBwcm92aWRlTmFtZUxpc3QgPyBuYW1lTGlzdC5tYXAoZ2V0TmFtZVBhdGgpIDogW107IC8vIENvbGxlY3QgcmVzdWx0IGluIHByb21pc2UgbGlzdFxuXG4gICAgdmFyIHByb21pc2VMaXN0ID0gW107XG5cbiAgICBfdGhpcy5nZXRGaWVsZEVudGl0aWVzKHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAvLyBBZGQgZmllbGQgaWYgbm90IHByb3ZpZGUgYG5hbWVMaXN0YFxuICAgICAgaWYgKCFwcm92aWRlTmFtZUxpc3QpIHtcbiAgICAgICAgbmFtZVBhdGhMaXN0LnB1c2goZmllbGQuZ2V0TmFtZVBhdGgoKSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFJlY3Vyc2l2ZSB2YWxpZGF0ZSBpZiBjb25maWd1cmVkLlxuICAgICAgICogVE9ETzogcGVyZiBpbXByb3ZlbWVudCBAem9tYmllSlxuICAgICAgICovXG5cblxuICAgICAgaWYgKChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucmVjdXJzaXZlKSAmJiBwcm92aWRlTmFtZUxpc3QpIHtcbiAgICAgICAgdmFyIG5hbWVQYXRoID0gZmllbGQuZ2V0TmFtZVBhdGgoKTtcblxuICAgICAgICBpZiAoIC8vIG5hbWVMaXN0W2ldID09PSB1bmRlZmluZWQg6K+05piO5piv5LulIG5hbWVMaXN0IOW8gOWktOeahFxuICAgICAgICAvLyBbJ25hbWUnXSAtPiBbJ25hbWUnLCdsaXN0J11cbiAgICAgICAgbmFtZVBhdGguZXZlcnkoZnVuY3Rpb24gKG5hbWVVbml0LCBpKSB7XG4gICAgICAgICAgcmV0dXJuIG5hbWVMaXN0W2ldID09PSBuYW1lVW5pdCB8fCBuYW1lTGlzdFtpXSA9PT0gdW5kZWZpbmVkO1xuICAgICAgICB9KSkge1xuICAgICAgICAgIG5hbWVQYXRoTGlzdC5wdXNoKG5hbWVQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfSAvLyBTa2lwIGlmIHdpdGhvdXQgcnVsZVxuXG5cbiAgICAgIGlmICghZmllbGQucHJvcHMucnVsZXMgfHwgIWZpZWxkLnByb3BzLnJ1bGVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBmaWVsZE5hbWVQYXRoID0gZmllbGQuZ2V0TmFtZVBhdGgoKTsgLy8gQWRkIGZpZWxkIHZhbGlkYXRlIHJ1bGUgaW4gdG8gcHJvbWlzZSBsaXN0XG5cbiAgICAgIGlmICghcHJvdmlkZU5hbWVMaXN0IHx8IGNvbnRhaW5zTmFtZVBhdGgobmFtZVBhdGhMaXN0LCBmaWVsZE5hbWVQYXRoKSkge1xuICAgICAgICB2YXIgcHJvbWlzZSA9IGZpZWxkLnZhbGlkYXRlUnVsZXMoX29iamVjdFNwcmVhZCh7XG4gICAgICAgICAgdmFsaWRhdGVNZXNzYWdlczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0VmFsaWRhdGVNZXNzYWdlcyksIF90aGlzLnZhbGlkYXRlTWVzc2FnZXMpXG4gICAgICAgIH0sIG9wdGlvbnMpKTsgLy8gV3JhcCBwcm9taXNlIHdpdGggZmllbGRcblxuICAgICAgICBwcm9taXNlTGlzdC5wdXNoKHByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IGZpZWxkTmFtZVBhdGgsXG4gICAgICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICAgICAgd2FybmluZ3M6IFtdXG4gICAgICAgICAgfTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJ1bGVFcnJvcnMpIHtcbiAgICAgICAgICB2YXIgbWVyZ2VkRXJyb3JzID0gW107XG4gICAgICAgICAgdmFyIG1lcmdlZFdhcm5pbmdzID0gW107XG4gICAgICAgICAgcnVsZUVycm9ycy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmNSkge1xuICAgICAgICAgICAgdmFyIHdhcm5pbmdPbmx5ID0gX3JlZjUucnVsZS53YXJuaW5nT25seSxcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSBfcmVmNS5lcnJvcnM7XG5cbiAgICAgICAgICAgIGlmICh3YXJuaW5nT25seSkge1xuICAgICAgICAgICAgICBtZXJnZWRXYXJuaW5ncy5wdXNoLmFwcGx5KG1lcmdlZFdhcm5pbmdzLCBfdG9Db25zdW1hYmxlQXJyYXkoZXJyb3JzKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtZXJnZWRFcnJvcnMucHVzaC5hcHBseShtZXJnZWRFcnJvcnMsIF90b0NvbnN1bWFibGVBcnJheShlcnJvcnMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChtZXJnZWRFcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3Qoe1xuICAgICAgICAgICAgICBuYW1lOiBmaWVsZE5hbWVQYXRoLFxuICAgICAgICAgICAgICBlcnJvcnM6IG1lcmdlZEVycm9ycyxcbiAgICAgICAgICAgICAgd2FybmluZ3M6IG1lcmdlZFdhcm5pbmdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogZmllbGROYW1lUGF0aCxcbiAgICAgICAgICAgIGVycm9yczogbWVyZ2VkRXJyb3JzLFxuICAgICAgICAgICAgd2FybmluZ3M6IG1lcmdlZFdhcm5pbmdzXG4gICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIHN1bW1hcnlQcm9taXNlID0gYWxsUHJvbWlzZUZpbmlzaChwcm9taXNlTGlzdCk7XG4gICAgX3RoaXMubGFzdFZhbGlkYXRlUHJvbWlzZSA9IHN1bW1hcnlQcm9taXNlOyAvLyBOb3RpZnkgZmllbGRzIHdpdGggcnVsZSB0aGF0IHZhbGlkYXRlIGhhcyBmaW5pc2hlZCBhbmQgbmVlZCB1cGRhdGVcblxuICAgIHN1bW1hcnlQcm9taXNlLmNhdGNoKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICB2YXIgcmVzdWx0TmFtZVBhdGhMaXN0ID0gcmVzdWx0cy5tYXAoZnVuY3Rpb24gKF9yZWY2KSB7XG4gICAgICAgIHZhciBuYW1lID0gX3JlZjYubmFtZTtcbiAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgICB9KTtcblxuICAgICAgX3RoaXMubm90aWZ5T2JzZXJ2ZXJzKF90aGlzLnN0b3JlLCByZXN1bHROYW1lUGF0aExpc3QsIHtcbiAgICAgICAgdHlwZTogJ3ZhbGlkYXRlRmluaXNoJ1xuICAgICAgfSk7XG5cbiAgICAgIF90aGlzLnRyaWdnZXJPbkZpZWxkc0NoYW5nZShyZXN1bHROYW1lUGF0aExpc3QsIHJlc3VsdHMpO1xuICAgIH0pO1xuICAgIHZhciByZXR1cm5Qcm9taXNlID0gc3VtbWFyeVByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX3RoaXMubGFzdFZhbGlkYXRlUHJvbWlzZSA9PT0gc3VtbWFyeVByb21pc2UpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShfdGhpcy5nZXRGaWVsZHNWYWx1ZShuYW1lUGF0aExpc3QpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFtdKTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgdmFyIGVycm9yTGlzdCA9IHJlc3VsdHMuZmlsdGVyKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCAmJiByZXN1bHQuZXJyb3JzLmxlbmd0aDtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHtcbiAgICAgICAgdmFsdWVzOiBfdGhpcy5nZXRGaWVsZHNWYWx1ZShuYW1lUGF0aExpc3QpLFxuICAgICAgICBlcnJvckZpZWxkczogZXJyb3JMaXN0LFxuICAgICAgICBvdXRPZkRhdGU6IF90aGlzLmxhc3RWYWxpZGF0ZVByb21pc2UgIT09IHN1bW1hcnlQcm9taXNlXG4gICAgICB9KTtcbiAgICB9KTsgLy8gRG8gbm90IHRocm93IGluIGNvbnNvbGVcblxuICAgIHJldHVyblByb21pc2UuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiBlO1xuICAgIH0pO1xuICAgIHJldHVybiByZXR1cm5Qcm9taXNlO1xuICB9O1xuXG4gIHRoaXMuc3VibWl0ID0gZnVuY3Rpb24gKCkge1xuICAgIF90aGlzLndhcm5pbmdVbmhvb2tlZCgpO1xuXG4gICAgX3RoaXMudmFsaWRhdGVGaWVsZHMoKS50aGVuKGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgIHZhciBvbkZpbmlzaCA9IF90aGlzLmNhbGxiYWNrcy5vbkZpbmlzaDtcblxuICAgICAgaWYgKG9uRmluaXNoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgb25GaW5pc2godmFsdWVzKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgLy8gU2hvdWxkIHByaW50IGVycm9yIGlmIHVzZXIgYG9uRmluaXNoYCBjYWxsYmFjayBmYWlsZWRcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIG9uRmluaXNoRmFpbGVkID0gX3RoaXMuY2FsbGJhY2tzLm9uRmluaXNoRmFpbGVkO1xuXG4gICAgICBpZiAob25GaW5pc2hGYWlsZWQpIHtcbiAgICAgICAgb25GaW5pc2hGYWlsZWQoZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5mb3JjZVJvb3RVcGRhdGUgPSBmb3JjZVJvb3RVcGRhdGU7XG59KTtcblxuZnVuY3Rpb24gdXNlRm9ybShmb3JtKSB7XG4gIHZhciBmb3JtUmVmID0gUmVhY3QudXNlUmVmKCk7XG5cbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlKHt9KSxcbiAgICAgIF9SZWFjdCR1c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfUmVhY3QkdXNlU3RhdGUsIDIpLFxuICAgICAgZm9yY2VVcGRhdGUgPSBfUmVhY3QkdXNlU3RhdGUyWzFdO1xuXG4gIGlmICghZm9ybVJlZi5jdXJyZW50KSB7XG4gICAgaWYgKGZvcm0pIHtcbiAgICAgIGZvcm1SZWYuY3VycmVudCA9IGZvcm07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBGb3JtU3RvcmUgaWYgbm90IHByb3ZpZGVkXG4gICAgICB2YXIgZm9yY2VSZVJlbmRlciA9IGZ1bmN0aW9uIGZvcmNlUmVSZW5kZXIoKSB7XG4gICAgICAgIGZvcmNlVXBkYXRlKHt9KTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBmb3JtU3RvcmUgPSBuZXcgRm9ybVN0b3JlKGZvcmNlUmVSZW5kZXIpO1xuICAgICAgZm9ybVJlZi5jdXJyZW50ID0gZm9ybVN0b3JlLmdldEZvcm0oKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gW2Zvcm1SZWYuY3VycmVudF07XG59XG5cbmV4cG9ydCBkZWZhdWx0IHVzZUZvcm07IiwiZXhwb3J0IGZ1bmN0aW9uIGFsbFByb21pc2VGaW5pc2gocHJvbWlzZUxpc3QpIHtcbiAgdmFyIGhhc0Vycm9yID0gZmFsc2U7XG4gIHZhciBjb3VudCA9IHByb21pc2VMaXN0Lmxlbmd0aDtcbiAgdmFyIHJlc3VsdHMgPSBbXTtcblxuICBpZiAoIXByb21pc2VMaXN0Lmxlbmd0aCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBwcm9taXNlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChwcm9taXNlLCBpbmRleCkge1xuICAgICAgcHJvbWlzZS5jYXRjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBoYXNFcnJvciA9IHRydWU7XG4gICAgICAgIHJldHVybiBlO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIGNvdW50IC09IDE7XG4gICAgICAgIHJlc3VsdHNbaW5kZXhdID0gcmVzdWx0O1xuXG4gICAgICAgIGlmIChjb3VudCA+IDApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzRXJyb3IpIHtcbiAgICAgICAgICByZWplY3QocmVzdWx0cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSIsImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xudmFyIEZvcm1Db250ZXh0ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUNvbnRleHQoe1xuICB0cmlnZ2VyRm9ybUNoYW5nZTogZnVuY3Rpb24gdHJpZ2dlckZvcm1DaGFuZ2UoKSB7fSxcbiAgdHJpZ2dlckZvcm1GaW5pc2g6IGZ1bmN0aW9uIHRyaWdnZXJGb3JtRmluaXNoKCkge30sXG4gIHJlZ2lzdGVyRm9ybTogZnVuY3Rpb24gcmVnaXN0ZXJGb3JtKCkge30sXG4gIHVucmVnaXN0ZXJGb3JtOiBmdW5jdGlvbiB1bnJlZ2lzdGVyRm9ybSgpIHt9XG59KTtcblxudmFyIEZvcm1Qcm92aWRlciA9IGZ1bmN0aW9uIEZvcm1Qcm92aWRlcihfcmVmKSB7XG4gIHZhciB2YWxpZGF0ZU1lc3NhZ2VzID0gX3JlZi52YWxpZGF0ZU1lc3NhZ2VzLFxuICAgICAgb25Gb3JtQ2hhbmdlID0gX3JlZi5vbkZvcm1DaGFuZ2UsXG4gICAgICBvbkZvcm1GaW5pc2ggPSBfcmVmLm9uRm9ybUZpbmlzaCxcbiAgICAgIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjtcbiAgdmFyIGZvcm1Db250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChGb3JtQ29udGV4dCk7XG4gIHZhciBmb3Jtc1JlZiA9IFJlYWN0LnVzZVJlZih7fSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGZvcm1Db250ZXh0KSwge30sIHtcbiAgICAgIHZhbGlkYXRlTWVzc2FnZXM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZm9ybUNvbnRleHQudmFsaWRhdGVNZXNzYWdlcyksIHZhbGlkYXRlTWVzc2FnZXMpLFxuICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAvLyA9ICAgICAgICAgICAgICAgICAgR2xvYmFsIEZvcm0gQ29udHJvbCAgICAgICAgICAgICAgICAgID1cbiAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgdHJpZ2dlckZvcm1DaGFuZ2U6IGZ1bmN0aW9uIHRyaWdnZXJGb3JtQ2hhbmdlKG5hbWUsIGNoYW5nZWRGaWVsZHMpIHtcbiAgICAgICAgaWYgKG9uRm9ybUNoYW5nZSkge1xuICAgICAgICAgIG9uRm9ybUNoYW5nZShuYW1lLCB7XG4gICAgICAgICAgICBjaGFuZ2VkRmllbGRzOiBjaGFuZ2VkRmllbGRzLFxuICAgICAgICAgICAgZm9ybXM6IGZvcm1zUmVmLmN1cnJlbnRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcm1Db250ZXh0LnRyaWdnZXJGb3JtQ2hhbmdlKG5hbWUsIGNoYW5nZWRGaWVsZHMpO1xuICAgICAgfSxcbiAgICAgIHRyaWdnZXJGb3JtRmluaXNoOiBmdW5jdGlvbiB0cmlnZ2VyRm9ybUZpbmlzaChuYW1lLCB2YWx1ZXMpIHtcbiAgICAgICAgaWYgKG9uRm9ybUZpbmlzaCkge1xuICAgICAgICAgIG9uRm9ybUZpbmlzaChuYW1lLCB7XG4gICAgICAgICAgICB2YWx1ZXM6IHZhbHVlcyxcbiAgICAgICAgICAgIGZvcm1zOiBmb3Jtc1JlZi5jdXJyZW50XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3JtQ29udGV4dC50cmlnZ2VyRm9ybUZpbmlzaChuYW1lLCB2YWx1ZXMpO1xuICAgICAgfSxcbiAgICAgIHJlZ2lzdGVyRm9ybTogZnVuY3Rpb24gcmVnaXN0ZXJGb3JtKG5hbWUsIGZvcm0pIHtcbiAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICBmb3Jtc1JlZi5jdXJyZW50ID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBmb3Jtc1JlZi5jdXJyZW50KSwge30sIF9kZWZpbmVQcm9wZXJ0eSh7fSwgbmFtZSwgZm9ybSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9ybUNvbnRleHQucmVnaXN0ZXJGb3JtKG5hbWUsIGZvcm0pO1xuICAgICAgfSxcbiAgICAgIHVucmVnaXN0ZXJGb3JtOiBmdW5jdGlvbiB1bnJlZ2lzdGVyRm9ybShuYW1lKSB7XG4gICAgICAgIHZhciBuZXdGb3JtcyA9IF9vYmplY3RTcHJlYWQoe30sIGZvcm1zUmVmLmN1cnJlbnQpO1xuXG4gICAgICAgIGRlbGV0ZSBuZXdGb3Jtc1tuYW1lXTtcbiAgICAgICAgZm9ybXNSZWYuY3VycmVudCA9IG5ld0Zvcm1zO1xuICAgICAgICBmb3JtQ29udGV4dC51bnJlZ2lzdGVyRm9ybShuYW1lKTtcbiAgICAgIH1cbiAgICB9KVxuICB9LCBjaGlsZHJlbik7XG59O1xuXG5leHBvcnQgeyBGb3JtUHJvdmlkZXIgfTtcbmV4cG9ydCBkZWZhdWx0IEZvcm1Db250ZXh0OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNcIjtcbnZhciBfZXhjbHVkZWQgPSBbXCJuYW1lXCIsIFwiaW5pdGlhbFZhbHVlc1wiLCBcImZpZWxkc1wiLCBcImZvcm1cIiwgXCJwcmVzZXJ2ZVwiLCBcImNoaWxkcmVuXCIsIFwiY29tcG9uZW50XCIsIFwidmFsaWRhdGVNZXNzYWdlc1wiLCBcInZhbGlkYXRlVHJpZ2dlclwiLCBcIm9uVmFsdWVzQ2hhbmdlXCIsIFwib25GaWVsZHNDaGFuZ2VcIiwgXCJvbkZpbmlzaFwiLCBcIm9uRmluaXNoRmFpbGVkXCJdO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHVzZUZvcm0gZnJvbSAnLi91c2VGb3JtJztcbmltcG9ydCBGaWVsZENvbnRleHQsIHsgSE9PS19NQVJLIH0gZnJvbSAnLi9GaWVsZENvbnRleHQnO1xuaW1wb3J0IEZvcm1Db250ZXh0IGZyb20gJy4vRm9ybUNvbnRleHQnO1xuaW1wb3J0IHsgaXNTaW1pbGFyIH0gZnJvbSAnLi91dGlscy92YWx1ZVV0aWwnO1xuXG52YXIgRm9ybSA9IGZ1bmN0aW9uIEZvcm0oX3JlZiwgcmVmKSB7XG4gIHZhciBuYW1lID0gX3JlZi5uYW1lLFxuICAgICAgaW5pdGlhbFZhbHVlcyA9IF9yZWYuaW5pdGlhbFZhbHVlcyxcbiAgICAgIGZpZWxkcyA9IF9yZWYuZmllbGRzLFxuICAgICAgZm9ybSA9IF9yZWYuZm9ybSxcbiAgICAgIHByZXNlcnZlID0gX3JlZi5wcmVzZXJ2ZSxcbiAgICAgIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbixcbiAgICAgIF9yZWYkY29tcG9uZW50ID0gX3JlZi5jb21wb25lbnQsXG4gICAgICBDb21wb25lbnQgPSBfcmVmJGNvbXBvbmVudCA9PT0gdm9pZCAwID8gJ2Zvcm0nIDogX3JlZiRjb21wb25lbnQsXG4gICAgICB2YWxpZGF0ZU1lc3NhZ2VzID0gX3JlZi52YWxpZGF0ZU1lc3NhZ2VzLFxuICAgICAgX3JlZiR2YWxpZGF0ZVRyaWdnZXIgPSBfcmVmLnZhbGlkYXRlVHJpZ2dlcixcbiAgICAgIHZhbGlkYXRlVHJpZ2dlciA9IF9yZWYkdmFsaWRhdGVUcmlnZ2VyID09PSB2b2lkIDAgPyAnb25DaGFuZ2UnIDogX3JlZiR2YWxpZGF0ZVRyaWdnZXIsXG4gICAgICBvblZhbHVlc0NoYW5nZSA9IF9yZWYub25WYWx1ZXNDaGFuZ2UsXG4gICAgICBfb25GaWVsZHNDaGFuZ2UgPSBfcmVmLm9uRmllbGRzQ2hhbmdlLFxuICAgICAgX29uRmluaXNoID0gX3JlZi5vbkZpbmlzaCxcbiAgICAgIG9uRmluaXNoRmFpbGVkID0gX3JlZi5vbkZpbmlzaEZhaWxlZCxcbiAgICAgIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBfZXhjbHVkZWQpO1xuXG4gIHZhciBmb3JtQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoRm9ybUNvbnRleHQpOyAvLyBXZSBjdXN0b21pemUgaGFuZGxlIGV2ZW50IHNpbmNlIENvbnRleHQgd2lsbCBtYWtlcyBhbGwgdGhlIGNvbnN1bWVyIHJlLXJlbmRlcjpcbiAgLy8gaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL2NvbnRleHQuaHRtbCNjb250ZXh0cHJvdmlkZXJcblxuICB2YXIgX3VzZUZvcm0gPSB1c2VGb3JtKGZvcm0pLFxuICAgICAgX3VzZUZvcm0yID0gX3NsaWNlZFRvQXJyYXkoX3VzZUZvcm0sIDEpLFxuICAgICAgZm9ybUluc3RhbmNlID0gX3VzZUZvcm0yWzBdO1xuXG4gIHZhciBfZm9ybUluc3RhbmNlJGdldEludGUgPSBmb3JtSW5zdGFuY2UuZ2V0SW50ZXJuYWxIb29rcyhIT09LX01BUkspLFxuICAgICAgdXNlU3Vic2NyaWJlID0gX2Zvcm1JbnN0YW5jZSRnZXRJbnRlLnVzZVN1YnNjcmliZSxcbiAgICAgIHNldEluaXRpYWxWYWx1ZXMgPSBfZm9ybUluc3RhbmNlJGdldEludGUuc2V0SW5pdGlhbFZhbHVlcyxcbiAgICAgIHNldENhbGxiYWNrcyA9IF9mb3JtSW5zdGFuY2UkZ2V0SW50ZS5zZXRDYWxsYmFja3MsXG4gICAgICBzZXRWYWxpZGF0ZU1lc3NhZ2VzID0gX2Zvcm1JbnN0YW5jZSRnZXRJbnRlLnNldFZhbGlkYXRlTWVzc2FnZXMsXG4gICAgICBzZXRQcmVzZXJ2ZSA9IF9mb3JtSW5zdGFuY2UkZ2V0SW50ZS5zZXRQcmVzZXJ2ZTsgLy8gUGFzcyByZWYgd2l0aCBmb3JtIGluc3RhbmNlXG5cblxuICBSZWFjdC51c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmb3JtSW5zdGFuY2U7XG4gIH0pOyAvLyBSZWdpc3RlciBmb3JtIGludG8gQ29udGV4dFxuXG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgZm9ybUNvbnRleHQucmVnaXN0ZXJGb3JtKG5hbWUsIGZvcm1JbnN0YW5jZSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvcm1Db250ZXh0LnVucmVnaXN0ZXJGb3JtKG5hbWUpO1xuICAgIH07XG4gIH0sIFtmb3JtQ29udGV4dCwgZm9ybUluc3RhbmNlLCBuYW1lXSk7IC8vIFBhc3MgcHJvcHMgdG8gc3RvcmVcblxuICBzZXRWYWxpZGF0ZU1lc3NhZ2VzKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZm9ybUNvbnRleHQudmFsaWRhdGVNZXNzYWdlcyksIHZhbGlkYXRlTWVzc2FnZXMpKTtcbiAgc2V0Q2FsbGJhY2tzKHtcbiAgICBvblZhbHVlc0NoYW5nZTogb25WYWx1ZXNDaGFuZ2UsXG4gICAgb25GaWVsZHNDaGFuZ2U6IGZ1bmN0aW9uIG9uRmllbGRzQ2hhbmdlKGNoYW5nZWRGaWVsZHMpIHtcbiAgICAgIGZvcm1Db250ZXh0LnRyaWdnZXJGb3JtQ2hhbmdlKG5hbWUsIGNoYW5nZWRGaWVsZHMpO1xuXG4gICAgICBpZiAoX29uRmllbGRzQ2hhbmdlKSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCByZXN0ID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICByZXN0W19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIF9vbkZpZWxkc0NoYW5nZS5hcHBseSh2b2lkIDAsIFtjaGFuZ2VkRmllbGRzXS5jb25jYXQocmVzdCkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgb25GaW5pc2g6IGZ1bmN0aW9uIG9uRmluaXNoKHZhbHVlcykge1xuICAgICAgZm9ybUNvbnRleHQudHJpZ2dlckZvcm1GaW5pc2gobmFtZSwgdmFsdWVzKTtcblxuICAgICAgaWYgKF9vbkZpbmlzaCkge1xuICAgICAgICBfb25GaW5pc2godmFsdWVzKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIG9uRmluaXNoRmFpbGVkOiBvbkZpbmlzaEZhaWxlZFxuICB9KTtcbiAgc2V0UHJlc2VydmUocHJlc2VydmUpOyAvLyBTZXQgaW5pdGlhbCB2YWx1ZSwgaW5pdCBzdG9yZSB2YWx1ZSB3aGVuIGZpcnN0IG1vdW50XG5cbiAgdmFyIG1vdW50UmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICBzZXRJbml0aWFsVmFsdWVzKGluaXRpYWxWYWx1ZXMsICFtb3VudFJlZi5jdXJyZW50KTtcblxuICBpZiAoIW1vdW50UmVmLmN1cnJlbnQpIHtcbiAgICBtb3VudFJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgfSAvLyBQcmVwYXJlIGNoaWxkcmVuIGJ5IGBjaGlsZHJlbmAgdHlwZVxuXG5cbiAgdmFyIGNoaWxkcmVuTm9kZSA9IGNoaWxkcmVuO1xuICB2YXIgY2hpbGRyZW5SZW5kZXJQcm9wcyA9IHR5cGVvZiBjaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJztcblxuICBpZiAoY2hpbGRyZW5SZW5kZXJQcm9wcykge1xuICAgIHZhciB2YWx1ZXMgPSBmb3JtSW5zdGFuY2UuZ2V0RmllbGRzVmFsdWUodHJ1ZSk7XG4gICAgY2hpbGRyZW5Ob2RlID0gY2hpbGRyZW4odmFsdWVzLCBmb3JtSW5zdGFuY2UpO1xuICB9IC8vIE5vdCB1c2Ugc3Vic2NyaWJlIHdoZW4gdXNpbmcgcmVuZGVyIHByb3BzXG5cblxuICB1c2VTdWJzY3JpYmUoIWNoaWxkcmVuUmVuZGVyUHJvcHMpOyAvLyBMaXN0ZW4gaWYgZmllbGRzIHByb3ZpZGVkLiBXZSB1c2UgcmVmIHRvIHNhdmUgcHJldiBkYXRhIGhlcmUgdG8gYXZvaWQgYWRkaXRpb25hbCByZW5kZXJcblxuICB2YXIgcHJldkZpZWxkc1JlZiA9IFJlYWN0LnVzZVJlZigpO1xuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghaXNTaW1pbGFyKHByZXZGaWVsZHNSZWYuY3VycmVudCB8fCBbXSwgZmllbGRzIHx8IFtdKSkge1xuICAgICAgZm9ybUluc3RhbmNlLnNldEZpZWxkcyhmaWVsZHMgfHwgW10pO1xuICAgIH1cblxuICAgIHByZXZGaWVsZHNSZWYuY3VycmVudCA9IGZpZWxkcztcbiAgfSwgW2ZpZWxkcywgZm9ybUluc3RhbmNlXSk7XG4gIHZhciBmb3JtQ29udGV4dFZhbHVlID0gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZm9ybUluc3RhbmNlKSwge30sIHtcbiAgICAgIHZhbGlkYXRlVHJpZ2dlcjogdmFsaWRhdGVUcmlnZ2VyXG4gICAgfSk7XG4gIH0sIFtmb3JtSW5zdGFuY2UsIHZhbGlkYXRlVHJpZ2dlcl0pO1xuICB2YXIgd3JhcHBlck5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGaWVsZENvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogZm9ybUNvbnRleHRWYWx1ZVxuICB9LCBjaGlsZHJlbk5vZGUpO1xuXG4gIGlmIChDb21wb25lbnQgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIHdyYXBwZXJOb2RlO1xuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgX2V4dGVuZHMoe30sIHJlc3RQcm9wcywge1xuICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZm9ybUluc3RhbmNlLnN1Ym1pdCgpO1xuICAgIH0sXG4gICAgb25SZXNldDogZnVuY3Rpb24gb25SZXNldChldmVudCkge1xuICAgICAgdmFyIF9yZXN0UHJvcHMkb25SZXNldDtcblxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGZvcm1JbnN0YW5jZS5yZXNldEZpZWxkcygpO1xuICAgICAgKF9yZXN0UHJvcHMkb25SZXNldCA9IHJlc3RQcm9wcy5vblJlc2V0KSA9PT0gbnVsbCB8fCBfcmVzdFByb3BzJG9uUmVzZXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXN0UHJvcHMkb25SZXNldC5jYWxsKHJlc3RQcm9wcywgZXZlbnQpO1xuICAgIH1cbiAgfSksIHdyYXBwZXJOb2RlKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm07IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEZpZWxkIGZyb20gJy4vRmllbGQnO1xuaW1wb3J0IExpc3QgZnJvbSAnLi9MaXN0JztcbmltcG9ydCB1c2VGb3JtIGZyb20gJy4vdXNlRm9ybSc7XG5pbXBvcnQgRmllbGRGb3JtIGZyb20gJy4vRm9ybSc7XG5pbXBvcnQgeyBGb3JtUHJvdmlkZXIgfSBmcm9tICcuL0Zvcm1Db250ZXh0JztcbmltcG9ydCBGaWVsZENvbnRleHQgZnJvbSAnLi9GaWVsZENvbnRleHQnO1xuaW1wb3J0IExpc3RDb250ZXh0IGZyb20gJy4vTGlzdENvbnRleHQnO1xudmFyIEludGVybmFsRm9ybSA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKEZpZWxkRm9ybSk7XG52YXIgUmVmRm9ybSA9IEludGVybmFsRm9ybTtcblJlZkZvcm0uRm9ybVByb3ZpZGVyID0gRm9ybVByb3ZpZGVyO1xuUmVmRm9ybS5GaWVsZCA9IEZpZWxkO1xuUmVmRm9ybS5MaXN0ID0gTGlzdDtcblJlZkZvcm0udXNlRm9ybSA9IHVzZUZvcm07XG5leHBvcnQgeyBGaWVsZCwgTGlzdCwgdXNlRm9ybSwgRm9ybVByb3ZpZGVyLCBGaWVsZENvbnRleHQsIExpc3RDb250ZXh0IH07XG5leHBvcnQgZGVmYXVsdCBSZWZGb3JtOyIsImltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHdhcm5pbmcgZnJvbSBcInJjLXV0aWwvZXMvd2FybmluZ1wiO1xuaW1wb3J0IEZpZWxkQ29udGV4dCBmcm9tICcuL0ZpZWxkQ29udGV4dCc7XG5pbXBvcnQgRmllbGQgZnJvbSAnLi9GaWVsZCc7XG5pbXBvcnQgeyBtb3ZlIGFzIF9tb3ZlLCBnZXROYW1lUGF0aCB9IGZyb20gJy4vdXRpbHMvdmFsdWVVdGlsJztcbmltcG9ydCBMaXN0Q29udGV4dCBmcm9tICcuL0xpc3RDb250ZXh0JztcblxudmFyIExpc3QgPSBmdW5jdGlvbiBMaXN0KF9yZWYpIHtcbiAgdmFyIG5hbWUgPSBfcmVmLm5hbWUsXG4gICAgICBpbml0aWFsVmFsdWUgPSBfcmVmLmluaXRpYWxWYWx1ZSxcbiAgICAgIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbixcbiAgICAgIHJ1bGVzID0gX3JlZi5ydWxlcyxcbiAgICAgIHZhbGlkYXRlVHJpZ2dlciA9IF9yZWYudmFsaWRhdGVUcmlnZ2VyO1xuICB2YXIgY29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoRmllbGRDb250ZXh0KTtcbiAgdmFyIGtleVJlZiA9IFJlYWN0LnVzZVJlZih7XG4gICAga2V5czogW10sXG4gICAgaWQ6IDBcbiAgfSk7XG4gIHZhciBrZXlNYW5hZ2VyID0ga2V5UmVmLmN1cnJlbnQ7XG4gIHZhciBwcmVmaXhOYW1lID0gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBhcmVudFByZWZpeE5hbWUgPSBnZXROYW1lUGF0aChjb250ZXh0LnByZWZpeE5hbWUpIHx8IFtdO1xuICAgIHJldHVybiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHBhcmVudFByZWZpeE5hbWUpLCBfdG9Db25zdW1hYmxlQXJyYXkoZ2V0TmFtZVBhdGgobmFtZSkpKTtcbiAgfSwgW2NvbnRleHQucHJlZml4TmFtZSwgbmFtZV0pO1xuICB2YXIgZmllbGRDb250ZXh0ID0gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY29udGV4dCksIHt9LCB7XG4gICAgICBwcmVmaXhOYW1lOiBwcmVmaXhOYW1lXG4gICAgfSk7XG4gIH0sIFtjb250ZXh0LCBwcmVmaXhOYW1lXSk7IC8vIExpc3QgY29udGV4dFxuXG4gIHZhciBsaXN0Q29udGV4dCA9IFJlYWN0LnVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBnZXRLZXk6IGZ1bmN0aW9uIGdldEtleShuYW1lUGF0aCkge1xuICAgICAgICB2YXIgbGVuID0gcHJlZml4TmFtZS5sZW5ndGg7XG4gICAgICAgIHZhciBwYXRoTmFtZSA9IG5hbWVQYXRoW2xlbl07XG4gICAgICAgIHJldHVybiBba2V5TWFuYWdlci5rZXlzW3BhdGhOYW1lXSwgbmFtZVBhdGguc2xpY2UobGVuICsgMSldO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtwcmVmaXhOYW1lXSk7IC8vIFVzZXIgc2hvdWxkIG5vdCBwYXNzIGBjaGlsZHJlbmAgYXMgb3RoZXIgdHlwZS5cblxuICBpZiAodHlwZW9mIGNoaWxkcmVuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgd2FybmluZyhmYWxzZSwgJ0Zvcm0uTGlzdCBvbmx5IGFjY2VwdHMgZnVuY3Rpb24gYXMgY2hpbGRyZW4uJyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgc2hvdWxkVXBkYXRlID0gZnVuY3Rpb24gc2hvdWxkVXBkYXRlKHByZXZWYWx1ZSwgbmV4dFZhbHVlLCBfcmVmMikge1xuICAgIHZhciBzb3VyY2UgPSBfcmVmMi5zb3VyY2U7XG5cbiAgICBpZiAoc291cmNlID09PSAnaW50ZXJuYWwnKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXZWYWx1ZSAhPT0gbmV4dFZhbHVlO1xuICB9O1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0Q29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBsaXN0Q29udGV4dFxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGaWVsZENvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogZmllbGRDb250ZXh0XG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZpZWxkLCB7XG4gICAgbmFtZTogW10sXG4gICAgc2hvdWxkVXBkYXRlOiBzaG91bGRVcGRhdGUsXG4gICAgcnVsZXM6IHJ1bGVzLFxuICAgIHZhbGlkYXRlVHJpZ2dlcjogdmFsaWRhdGVUcmlnZ2VyLFxuICAgIGluaXRpYWxWYWx1ZTogaW5pdGlhbFZhbHVlLFxuICAgIGlzTGlzdDogdHJ1ZVxuICB9LCBmdW5jdGlvbiAoX3JlZjMsIG1ldGEpIHtcbiAgICB2YXIgX3JlZjMkdmFsdWUgPSBfcmVmMy52YWx1ZSxcbiAgICAgICAgdmFsdWUgPSBfcmVmMyR2YWx1ZSA9PT0gdm9pZCAwID8gW10gOiBfcmVmMyR2YWx1ZSxcbiAgICAgICAgb25DaGFuZ2UgPSBfcmVmMy5vbkNoYW5nZTtcbiAgICB2YXIgZ2V0RmllbGRWYWx1ZSA9IGNvbnRleHQuZ2V0RmllbGRWYWx1ZTtcblxuICAgIHZhciBnZXROZXdWYWx1ZSA9IGZ1bmN0aW9uIGdldE5ld1ZhbHVlKCkge1xuICAgICAgdmFyIHZhbHVlcyA9IGdldEZpZWxkVmFsdWUocHJlZml4TmFtZSB8fCBbXSk7XG4gICAgICByZXR1cm4gdmFsdWVzIHx8IFtdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWx3YXlzIGdldCBsYXRlc3QgdmFsdWUgaW4gY2FzZSB1c2VyIHVwZGF0ZSBmaWVsZHMgYnkgYGZvcm1gIGFwaS5cbiAgICAgKi9cblxuXG4gICAgdmFyIG9wZXJhdGlvbnMgPSB7XG4gICAgICBhZGQ6IGZ1bmN0aW9uIGFkZChkZWZhdWx0VmFsdWUsIGluZGV4KSB7XG4gICAgICAgIC8vIE1hcHBpbmcga2V5c1xuICAgICAgICB2YXIgbmV3VmFsdWUgPSBnZXROZXdWYWx1ZSgpO1xuXG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDw9IG5ld1ZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgIGtleU1hbmFnZXIua2V5cyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoa2V5TWFuYWdlci5rZXlzLnNsaWNlKDAsIGluZGV4KSksIFtrZXlNYW5hZ2VyLmlkXSwgX3RvQ29uc3VtYWJsZUFycmF5KGtleU1hbmFnZXIua2V5cy5zbGljZShpbmRleCkpKTtcbiAgICAgICAgICBvbkNoYW5nZShbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KG5ld1ZhbHVlLnNsaWNlKDAsIGluZGV4KSksIFtkZWZhdWx0VmFsdWVdLCBfdG9Db25zdW1hYmxlQXJyYXkobmV3VmFsdWUuc2xpY2UoaW5kZXgpKSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIChpbmRleCA8IDAgfHwgaW5kZXggPiBuZXdWYWx1ZS5sZW5ndGgpKSB7XG4gICAgICAgICAgICB3YXJuaW5nKGZhbHNlLCAnVGhlIHNlY29uZCBwYXJhbWV0ZXIgb2YgdGhlIGFkZCBmdW5jdGlvbiBzaG91bGQgYmUgYSB2YWxpZCBwb3NpdGl2ZSBudW1iZXIuJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAga2V5TWFuYWdlci5rZXlzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShrZXlNYW5hZ2VyLmtleXMpLCBba2V5TWFuYWdlci5pZF0pO1xuICAgICAgICAgIG9uQ2hhbmdlKFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkobmV3VmFsdWUpLCBbZGVmYXVsdFZhbHVlXSkpO1xuICAgICAgICB9XG5cbiAgICAgICAga2V5TWFuYWdlci5pZCArPSAxO1xuICAgICAgfSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGluZGV4KSB7XG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IGdldE5ld1ZhbHVlKCk7XG4gICAgICAgIHZhciBpbmRleFNldCA9IG5ldyBTZXQoQXJyYXkuaXNBcnJheShpbmRleCkgPyBpbmRleCA6IFtpbmRleF0pO1xuXG4gICAgICAgIGlmIChpbmRleFNldC5zaXplIDw9IDApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBrZXlNYW5hZ2VyLmtleXMgPSBrZXlNYW5hZ2VyLmtleXMuZmlsdGVyKGZ1bmN0aW9uIChfLCBrZXlzSW5kZXgpIHtcbiAgICAgICAgICByZXR1cm4gIWluZGV4U2V0LmhhcyhrZXlzSW5kZXgpO1xuICAgICAgICB9KTsgLy8gVHJpZ2dlciBzdG9yZSBjaGFuZ2VcblxuICAgICAgICBvbkNoYW5nZShuZXdWYWx1ZS5maWx0ZXIoZnVuY3Rpb24gKF8sIHZhbHVlSW5kZXgpIHtcbiAgICAgICAgICByZXR1cm4gIWluZGV4U2V0Lmhhcyh2YWx1ZUluZGV4KTtcbiAgICAgICAgfSkpO1xuICAgICAgfSxcbiAgICAgIG1vdmU6IGZ1bmN0aW9uIG1vdmUoZnJvbSwgdG8pIHtcbiAgICAgICAgaWYgKGZyb20gPT09IHRvKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG5ld1ZhbHVlID0gZ2V0TmV3VmFsdWUoKTsgLy8gRG8gbm90IGhhbmRsZSBvdXQgb2YgcmFuZ2VcblxuICAgICAgICBpZiAoZnJvbSA8IDAgfHwgZnJvbSA+PSBuZXdWYWx1ZS5sZW5ndGggfHwgdG8gPCAwIHx8IHRvID49IG5ld1ZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGtleU1hbmFnZXIua2V5cyA9IF9tb3ZlKGtleU1hbmFnZXIua2V5cywgZnJvbSwgdG8pOyAvLyBUcmlnZ2VyIHN0b3JlIGNoYW5nZVxuXG4gICAgICAgIG9uQ2hhbmdlKF9tb3ZlKG5ld1ZhbHVlLCBmcm9tLCB0bykpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIGxpc3RWYWx1ZSA9IHZhbHVlIHx8IFtdO1xuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGxpc3RWYWx1ZSkpIHtcbiAgICAgIGxpc3RWYWx1ZSA9IFtdO1xuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuaW5nKGZhbHNlLCBcIkN1cnJlbnQgdmFsdWUgb2YgJ1wiLmNvbmNhdChwcmVmaXhOYW1lLmpvaW4oJyA+ICcpLCBcIicgaXMgbm90IGFuIGFycmF5IHR5cGUuXCIpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2hpbGRyZW4obGlzdFZhbHVlLm1hcChmdW5jdGlvbiAoX18sIGluZGV4KSB7XG4gICAgICB2YXIga2V5ID0ga2V5TWFuYWdlci5rZXlzW2luZGV4XTtcblxuICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGtleU1hbmFnZXIua2V5c1tpbmRleF0gPSBrZXlNYW5hZ2VyLmlkO1xuICAgICAgICBrZXkgPSBrZXlNYW5hZ2VyLmtleXNbaW5kZXhdO1xuICAgICAgICBrZXlNYW5hZ2VyLmlkICs9IDE7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IGluZGV4LFxuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgaXNMaXN0RmllbGQ6IHRydWVcbiAgICAgIH07XG4gICAgfSksIG9wZXJhdGlvbnMsIG1ldGEpO1xuICB9KSkpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTGlzdDsiXSwibmFtZXMiOlsiSE9PS19NQVJLIiwid2FybmluZ0Z1bmMiLCJ3YXJuaW5nIiwiZ2V0RmllbGRWYWx1ZSIsImdldEZpZWxkc1ZhbHVlIiwiZ2V0RmllbGRFcnJvciIsImdldEZpZWxkV2FybmluZyIsImdldEZpZWxkc0Vycm9yIiwiaXNGaWVsZHNUb3VjaGVkIiwiaXNGaWVsZFRvdWNoZWQiLCJpc0ZpZWxkVmFsaWRhdGluZyIsImlzRmllbGRzVmFsaWRhdGluZyIsInJlc2V0RmllbGRzIiwic2V0RmllbGRzIiwic2V0RmllbGRzVmFsdWUiLCJ2YWxpZGF0ZUZpZWxkcyIsInN1Ym1pdCIsImdldEludGVybmFsSG9va3MiLCJkaXNwYXRjaCIsImluaXRFbnRpdHlWYWx1ZSIsInJlZ2lzdGVyRmllbGQiLCJ1c2VTdWJzY3JpYmUiLCJzZXRJbml0aWFsVmFsdWVzIiwic2V0Q2FsbGJhY2tzIiwiZ2V0RmllbGRzIiwic2V0VmFsaWRhdGVNZXNzYWdlcyIsInNldFByZXNlcnZlIiwiZ2V0SW5pdGlhbFZhbHVlIiwidmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJ0eXBlVGVtcGxhdGUiLCJkZWZhdWx0VmFsaWRhdGVNZXNzYWdlcyIsImRlZmF1bHQiLCJyZXF1aXJlZCIsImVudW0iLCJ3aGl0ZXNwYWNlIiwiZGF0ZSIsImZvcm1hdCIsInBhcnNlIiwiaW52YWxpZCIsInR5cGVzIiwic3RyaW5nIiwibWV0aG9kIiwiYXJyYXkiLCJvYmplY3QiLCJudW1iZXIiLCJib29sZWFuIiwiaW50ZWdlciIsImZsb2F0IiwicmVnZXhwIiwiZW1haWwiLCJ1cmwiLCJoZXgiLCJsZW4iLCJtaW4iLCJtYXgiLCJyYW5nZSIsInBhdHRlcm4iLCJtaXNtYXRjaCIsImdldE5hbWVQYXRoIiwicGF0aCIsImdldFZhbHVlIiwic3RvcmUiLCJuYW1lUGF0aCIsImdldCIsInNldFZhbHVlIiwicmVtb3ZlSWZVbmRlZmluZWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJuZXdTdG9yZSIsInNldCIsImNsb25lQnlOYW1lUGF0aExpc3QiLCJuYW1lUGF0aExpc3QiLCJmb3JFYWNoIiwiY29udGFpbnNOYW1lUGF0aCIsInNvbWUiLCJtYXRjaE5hbWVQYXRoIiwiaXNPYmplY3QiLCJvYmoiLCJPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImludGVybmFsU2V0VmFsdWVzIiwidmFsdWVzIiwia2V5cyIsImtleSIsInByZXZWYWx1ZSIsInJlY3Vyc2l2ZSIsInNldFZhbHVlcyIsIl9sZW4iLCJyZXN0VmFsdWVzIiwiX2tleSIsInJlZHVjZSIsImN1cnJlbnQiLCJjaGFuZ2VkTmFtZVBhdGgiLCJldmVyeSIsIm5hbWVVbml0IiwiaSIsImRlZmF1bHRHZXRWYWx1ZUZyb21FdmVudCIsInZhbHVlUHJvcE5hbWUiLCJldmVudCIsInRhcmdldCIsIm1vdmVJbmRleCIsInRvSW5kZXgiLCJpdGVtIiwiZGlmZiIsImNvbmNhdCIsInNsaWNlIiwiQXN5bmNWYWxpZGF0b3IiLCJyZXBsYWNlTWVzc2FnZSIsInRlbXBsYXRlIiwia3YiLCJyZXBsYWNlIiwic3RyIiwidmFsaWRhdGVSdWxlIiwiX3giLCJfeDIiLCJfeDMiLCJfeDQiLCJfeDUiLCJfdmFsaWRhdGVSdWxlIiwiYXBwbHkiLCJ0aGlzIiwiX2NhbGxlZTIiLCJuYW1lIiwicnVsZSIsIm9wdGlvbnMiLCJtZXNzYWdlVmFyaWFibGVzIiwiY2xvbmVSdWxlIiwic3ViUnVsZUZpZWxkIiwidmFsaWRhdG9yIiwibWVzc2FnZXMiLCJyZXN1bHQiLCJzdWJSZXN1bHRzIiwiZmlsbFZhcmlhYmxlUmVzdWx0IiwiX2NvbnRleHQyIiwicHJldiIsIm5leHQiLCJydWxlSW5kZXgiLCJ0eXBlIiwiZGVmYXVsdEZpZWxkIiwidmFsaWRhdGVNZXNzYWdlcyIsIlByb21pc2UiLCJyZXNvbHZlIiwidmFsaWRhdGUiLCJ0MCIsImVycm9ycyIsIm1hcCIsIl9yZWY0IiwiaW5kZXgiLCJtZXNzYWdlIiwiY29uc29sZSIsImVycm9yIiwiYWxsIiwic3ViVmFsdWUiLCJzZW50IiwiYWJydXB0Iiwiam9pbiIsInN0b3AiLCJfZmluaXNoT25BbGxGYWlsZWQiLCJfY2FsbGVlMyIsInJ1bGVQcm9taXNlcyIsIl9jb250ZXh0MyIsInRoZW4iLCJlcnJvcnNMaXN0IiwiX3JlZjUiLCJfZmluaXNoT25GaXJzdEZhaWxlZCIsIl9jYWxsZWU0IiwiY291bnQiLCJfY29udGV4dDQiLCJwcm9taXNlIiwicnVsZUVycm9yIiwiX2V4Y2x1ZGVkIiwiRU1QVFlfRVJST1JTIiwicmVxdWlyZVVwZGF0ZSIsInNob3VsZFVwZGF0ZSIsIm5leHRWYWx1ZSIsImluZm8iLCJzb3VyY2UiLCJGaWVsZCIsIl9SZWFjdCRDb21wb25lbnQiLCJfc3VwZXIiLCJwcm9wcyIsIl90aGlzIiwiY2FsbCIsInN0YXRlIiwicmVzZXRDb3VudCIsImNhbmNlbFJlZ2lzdGVyRnVuYyIsIm1vdW50ZWQiLCJ0b3VjaGVkIiwiZGlydHkiLCJ2YWxpZGF0ZVByb21pc2UiLCJwcmV2VmFsaWRhdGluZyIsIndhcm5pbmdzIiwiY2FuY2VsUmVnaXN0ZXIiLCJfdGhpcyRwcm9wcyIsInByZXNlcnZlIiwiaXNMaXN0RmllbGQiLCJfdGhpcyRwcm9wczIiLCJfZmllbGRDb250ZXh0JHByZWZpeE4iLCJmaWVsZENvbnRleHQiLCJwcmVmaXhOYW1lIiwiZ2V0UnVsZXMiLCJfdGhpcyRwcm9wczMiLCJfdGhpcyRwcm9wczMkcnVsZXMiLCJydWxlcyIsInJlZnJlc2giLCJzZXRTdGF0ZSIsIl9yZWYiLCJ0cmlnZ2VyTWV0YUV2ZW50IiwiZGVzdHJveSIsIm9uTWV0YUNoYW5nZSIsImdldE1ldGEiLCJvblN0b3JlQ2hhbmdlIiwicHJldlN0b3JlIiwiX3RoaXMkcHJvcHM0IiwiX3RoaXMkcHJvcHM0JGRlcGVuZGVuIiwiZGVwZW5kZW5jaWVzIiwib25SZXNldCIsImN1clZhbHVlIiwibmFtZVBhdGhNYXRjaCIsInJlUmVuZGVyIiwiZGF0YSIsInZhbGlkYXRpbmciLCJkZXBlbmRlbmN5IiwicmVsYXRlZEZpZWxkcyIsInZhbGlkYXRlUnVsZXMiLCJjdXJyZW50VmFsdWUiLCJyb290UHJvbWlzZSIsIl90aGlzJHByb3BzNSIsIl90aGlzJHByb3BzNSR2YWxpZGF0ZSIsInZhbGlkYXRlRmlyc3QiLCJ0cmlnZ2VyTmFtZSIsImZpbHRlcmVkUnVsZXMiLCJmaWx0ZXIiLCJ2YWxpZGF0ZVRyaWdnZXIiLCJpbmNsdWRlcyIsInN1bW1hcnlQcm9taXNlIiwiZmlsbGVkUnVsZXMiLCJjdXJyZW50UnVsZSIsIm9yaWdpblZhbGlkYXRvckZ1bmMiLCJ2YWwiLCJjYWxsYmFjayIsImhhc1Byb21pc2UiLCJhcmdzIiwiY2F0Y2giLCJlcnIiLCJzb3J0IiwiX3JlZjIiLCJ3MSIsIndhcm5pbmdPbmx5IiwiaTEiLCJ3MiIsImkyIiwiX3JlZjMiLCJfY2FsbGVlIiwicmVqZWN0IiwiX2NvbnRleHQiLCJfeDYiLCJfeDciLCJfeDkiLCJmaW5pc2hPbkZpcnN0RmFpbGVkIiwiX3g4IiwiZmluaXNoT25BbGxGYWlsZWQiLCJlIiwicnVsZUVycm9ycyIsIm5leHRFcnJvcnMiLCJuZXh0V2FybmluZ3MiLCJfcmVmMyRlcnJvcnMiLCJwdXNoIiwiaXNGaWVsZERpcnR5IiwiaW5pdGlhbFZhbHVlIiwiZ2V0RXJyb3JzIiwiZ2V0V2FybmluZ3MiLCJpc0xpc3QiLCJpc1ByZXNlcnZlIiwiZ2V0T25seUNoaWxkIiwiY2hpbGRyZW4iLCJtZXRhIiwiZ2V0Q29udHJvbGxlZCIsImlzRnVuY3Rpb24iLCJjaGlsZExpc3QiLCJjaGlsZCIsImNoaWxkUHJvcHMiLCJfdGhpcyRwcm9wczYiLCJ0cmlnZ2VyIiwiZ2V0VmFsdWVGcm9tRXZlbnQiLCJub3JtYWxpemUiLCJnZXRWYWx1ZVByb3BzIiwibWVyZ2VkVmFsaWRhdGVUcmlnZ2VyIiwiX2dldEludGVybmFsSG9va3MiLCJtZXJnZWRHZXRWYWx1ZVByb3BzIiwib3JpZ2luVHJpZ2dlckZ1bmMiLCJjb250cm9sIiwibmV3VmFsdWUiLCJ2YWxpZGF0ZVRyaWdnZXJMaXN0Iiwib3JpZ2luVHJpZ2dlciIsIl90aGlzJHByb3BzNyIsImZvcmNlVXBkYXRlIiwicmV0dXJuQ2hpbGROb2RlIiwiX3RoaXMkZ2V0T25seUNoaWxkIiwiY29udGV4dFR5cGUiLCJGaWVsZENvbnRleHQiLCJkZWZhdWx0UHJvcHMiLCJyZXN0UHJvcHMiLCJTUExJVCIsImNlbGwiLCJOYW1lTWFwIiwia3ZzIiwiTWFwIiwidXBkYXRlciIsImRlbGV0ZSIsImVudHJpZXMiLCJjZWxscyIsInNwbGl0IiwiX2NlbGwkbWF0Y2giLCJtYXRjaCIsIl9jZWxsJG1hdGNoMiIsInVuaXQiLCJOdW1iZXIiLCJqc29uIiwiRm9ybVN0b3JlIiwiZm9yY2VSb290VXBkYXRlIiwiZm9ybUhvb2tlZCIsInN1YnNjcmliYWJsZSIsImZpZWxkRW50aXRpZXMiLCJpbml0aWFsVmFsdWVzIiwiY2FsbGJhY2tzIiwibGFzdFZhbGlkYXRlUHJvbWlzZSIsImdldEZvcm0iLCJpbml0IiwidGltZW91dElkIiwid2FybmluZ1VuaG9va2VkIiwiZ2V0RmllbGRFbnRpdGllcyIsInB1cmUiLCJmaWVsZCIsImdldEZpZWxkc01hcCIsImNhY2hlIiwiZ2V0RmllbGRFbnRpdGllc0Zvck5hbWVQYXRoTGlzdCIsIm5hbWVMaXN0IiwiSU5WQUxJREFURV9OQU1FX1BBVEgiLCJmaWx0ZXJGdW5jIiwiZmlsdGVyZWROYW1lTGlzdCIsImVudGl0eSIsIl9lbnRpdHkkaXNMaXN0RmllbGQiLCJhcmcwIiwiYXJnMSIsImlzQWxsRmllbGRzVG91Y2hlZCIsInNob3J0TmFtZVBhdGgiLCJmaWVsZE5hbWVQYXRoIiwidXBkYXRlIiwibGlzdCIsImlzTmFtZVBhdGhMaXN0VG91Y2hlZCIsImVudGl0aWVzIiwibmFtZVBhdGhMaXN0RW50aXRpZXMiLCJ0ZXN0RmllbGQiLCJyZXNldFdpdGhGaWVsZEluaXRpYWxWYWx1ZSIsInJlY29yZHMiLCJTZXQiLCJhZGQiLCJyZXF1aXJlZEZpZWxkRW50aXRpZXMiLCJyZXNldFdpdGhGaWVsZHMiLCJzaXplIiwib3JpZ2luVmFsdWUiLCJza2lwRXhpc3QiLCJfcmVxdWlyZWRGaWVsZEVudGl0aWUiLCJyIiwibm90aWZ5T2JzZXJ2ZXJzIiwiZmllbGRzIiwiZmllbGREYXRhIiwiZGVmaW5lUHJvcGVydHkiLCJzdWJOYW1lUGF0aCIsIm1lcmdlZFByZXNlcnZlIiwiZGVmYXVsdFZhbHVlIiwiX3ByZXZTdG9yZSIsInRyaWdnZXJEZXBlbmRlbmNpZXNVcGRhdGUiLCJhY3Rpb24iLCJ1cGRhdGVWYWx1ZSIsIl9uYW1lUGF0aCIsIm1lcmdlZEluZm8iLCJjaGlsZHJlbkZpZWxkcyIsImdldERlcGVuZGVuY3lDaGlsZHJlbkZpZWxkcyIsIm9uVmFsdWVzQ2hhbmdlIiwidHJpZ2dlck9uRmllbGRzQ2hhbmdlIiwicm9vdE5hbWVQYXRoIiwiZGVwZW5kZW5jaWVzMmZpZWxkcyIsImRlcGVuZGVuY3lOYW1lUGF0aCIsImZpbGxDaGlsZHJlbiIsImhhcyIsImZpbGVkRXJyb3JzIiwib25GaWVsZHNDaGFuZ2UiLCJmaWVsZE5hbWUiLCJwcm92aWRlTmFtZUxpc3QiLCJwcm9taXNlTGlzdCIsIm1lcmdlZEVycm9ycyIsIm1lcmdlZFdhcm5pbmdzIiwiaGFzRXJyb3IiLCJyZXN1bHRzIiwiYWxsUHJvbWlzZUZpbmlzaCIsInJlc3VsdE5hbWVQYXRoTGlzdCIsIl9yZWY2IiwicmV0dXJuUHJvbWlzZSIsImVycm9yTGlzdCIsImVycm9yRmllbGRzIiwib3V0T2ZEYXRlIiwib25GaW5pc2giLCJvbkZpbmlzaEZhaWxlZCIsImZvcm0iLCJmb3JtUmVmIiwiX1JlYWN0JHVzZVN0YXRlIiwiZm9ybVN0b3JlIiwiRm9ybUNvbnRleHQiLCJ0cmlnZ2VyRm9ybUNoYW5nZSIsInRyaWdnZXJGb3JtRmluaXNoIiwicmVnaXN0ZXJGb3JtIiwidW5yZWdpc3RlckZvcm0iLCJyZWYiLCJfcmVmJGNvbXBvbmVudCIsImNvbXBvbmVudCIsIkNvbXBvbmVudCIsIl9yZWYkdmFsaWRhdGVUcmlnZ2VyIiwiX29uRmllbGRzQ2hhbmdlIiwiX29uRmluaXNoIiwiZm9ybUNvbnRleHQiLCJfdXNlRm9ybSIsImZvcm1JbnN0YW5jZSIsIl9mb3JtSW5zdGFuY2UkZ2V0SW50ZSIsImNoYW5nZWRGaWVsZHMiLCJyZXN0IiwibW91bnRSZWYiLCJjaGlsZHJlbk5vZGUiLCJjaGlsZHJlblJlbmRlclByb3BzIiwicHJldkZpZWxkc1JlZiIsInNvdXJjZUtleXMiLCJ0YXJnZXRLZXlzIiwic291cmNlVmFsdWUiLCJ0YXJnZXRWYWx1ZSIsImlzU2ltaWxhciIsImZvcm1Db250ZXh0VmFsdWUiLCJ3cmFwcGVyTm9kZSIsIlByb3ZpZGVyIiwib25TdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsIl9yZXN0UHJvcHMkb25SZXNldCIsIlJlZkZvcm0iLCJGb3JtUHJvdmlkZXIiLCJvbkZvcm1DaGFuZ2UiLCJvbkZvcm1GaW5pc2giLCJmb3Jtc1JlZiIsImZvcm1zIiwibmV3Rm9ybXMiLCJMaXN0IiwiY29udGV4dCIsImtleU1hbmFnZXIiLCJpZCIsInBhcmVudFByZWZpeE5hbWUiLCJsaXN0Q29udGV4dCIsImdldEtleSIsInBhdGhOYW1lIiwiX3JlZjMkdmFsdWUiLCJvbkNoYW5nZSIsImdldE5ld1ZhbHVlIiwib3BlcmF0aW9ucyIsInJlbW92ZSIsImluZGV4U2V0IiwiXyIsImtleXNJbmRleCIsInZhbHVlSW5kZXgiLCJtb3ZlIiwiZnJvbSIsInRvIiwibGlzdFZhbHVlIiwiX18iLCJ1c2VGb3JtIl0sInNvdXJjZVJvb3QiOiIifQ==