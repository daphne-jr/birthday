"use strict";(self.webpackChunkbirthday=self.webpackChunkbirthday||[]).push([[843],{4084:(e,t,a)=>{a.d(t,{Z:()=>E});var n,r=a(7462),i=a(5671),o=a(3144),s=a(9340),l=a(8557),u=a(7294),d=a(1413),c=a(4942),p=a(8717),h=a(8423),v=a(4184),m=a.n(v),x="\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",f=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],g={};function b(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&g[a])return g[a];var n=window.getComputedStyle(e),r=n.getPropertyValue("box-sizing")||n.getPropertyValue("-moz-box-sizing")||n.getPropertyValue("-webkit-box-sizing"),i=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),o=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),s=f.map((function(e){return"".concat(e,":").concat(n.getPropertyValue(e))})).join(";"),l={sizingStyle:s,paddingSize:i,borderSize:o,boxSizing:r};return t&&a&&(g[a]=l),l}var z,A=a(6774),S=a.n(A);!function(e){e[e.NONE=0]="NONE",e[e.RESIZING=1]="RESIZING",e[e.RESIZED=2]="RESIZED"}(z||(z={}));const y=function(e){(0,s.Z)(a,e);var t=(0,l.Z)(a);function a(e){var o;return(0,i.Z)(this,a),(o=t.call(this,e)).nextFrameActionId=void 0,o.resizeFrameId=void 0,o.textArea=void 0,o.saveTextArea=function(e){o.textArea=e},o.handleResize=function(e){var t=o.state.resizeStatus,a=o.props,n=a.autoSize,r=a.onResize;t===z.NONE&&("function"==typeof r&&r(e),n&&o.resizeOnNextFrame())},o.resizeOnNextFrame=function(){cancelAnimationFrame(o.nextFrameActionId),o.nextFrameActionId=requestAnimationFrame(o.resizeTextarea)},o.resizeTextarea=function(){var e=o.props.autoSize;if(e&&o.textArea){var t=e.minRows,a=e.maxRows,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n||((n=document.createElement("textarea")).setAttribute("tab-index","-1"),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),e.getAttribute("wrap")?n.setAttribute("wrap",e.getAttribute("wrap")):n.removeAttribute("wrap");var i=b(e,t),o=i.paddingSize,s=i.borderSize,l=i.boxSizing,u=i.sizingStyle;n.setAttribute("style","".concat(u,";").concat(x)),n.value=e.value||e.placeholder||"";var d,c=Number.MIN_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER,h=n.scrollHeight;if("border-box"===l?h+=s:"content-box"===l&&(h-=o),null!==a||null!==r){n.value=" ";var v=n.scrollHeight-o;null!==a&&(c=v*a,"border-box"===l&&(c=c+o+s),h=Math.max(c,h)),null!==r&&(p=v*r,"border-box"===l&&(p=p+o+s),d=h>p?"":"hidden",h=Math.min(p,h))}return{height:h,minHeight:c,maxHeight:p,overflowY:d,resize:"none"}}(o.textArea,!1,t,a);o.setState({textareaStyles:r,resizeStatus:z.RESIZING},(function(){cancelAnimationFrame(o.resizeFrameId),o.resizeFrameId=requestAnimationFrame((function(){o.setState({resizeStatus:z.RESIZED},(function(){o.resizeFrameId=requestAnimationFrame((function(){o.setState({resizeStatus:z.NONE}),o.fixFirefoxAutoScroll()}))}))}))}))}},o.renderTextArea=function(){var e=o.props,t=e.prefixCls,a=void 0===t?"rc-textarea":t,n=e.autoSize,i=e.onResize,s=e.className,l=e.disabled,v=o.state,x=v.textareaStyles,f=v.resizeStatus,g=(0,h.Z)(o.props,["prefixCls","onPressEnter","autoSize","defaultValue","onResize"]),b=m()(a,s,(0,c.Z)({},"".concat(a,"-disabled"),l));"value"in g&&(g.value=g.value||"");var A=(0,d.Z)((0,d.Z)((0,d.Z)({},o.props.style),x),f===z.RESIZING?{overflowX:"hidden",overflowY:"hidden"}:null);return u.createElement(p.Z,{onResize:o.handleResize,disabled:!(n||i)},u.createElement("textarea",(0,r.Z)({},g,{className:b,style:A,ref:o.saveTextArea})))},o.state={textareaStyles:{},resizeStatus:z.NONE},o}return(0,o.Z)(a,[{key:"componentDidUpdate",value:function(e){e.value===this.props.value&&S()(e.autoSize,this.props.autoSize)||this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.nextFrameActionId),cancelAnimationFrame(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var e=this.textArea.selectionStart,t=this.textArea.selectionEnd;this.textArea.setSelectionRange(e,t)}}catch(e){}}},{key:"render",value:function(){return this.renderTextArea()}}]),a}(u.Component),E=function(e){(0,s.Z)(a,e);var t=(0,l.Z)(a);function a(e){var n;(0,i.Z)(this,a),(n=t.call(this,e)).resizableTextArea=void 0,n.focus=function(){n.resizableTextArea.textArea.focus()},n.saveTextArea=function(e){n.resizableTextArea=e},n.handleChange=function(e){var t=n.props.onChange;n.setValue(e.target.value,(function(){n.resizableTextArea.resizeTextarea()})),t&&t(e)},n.handleKeyDown=function(e){var t=n.props,a=t.onPressEnter,r=t.onKeyDown;13===e.keyCode&&a&&a(e),r&&r(e)};var r=void 0===e.value||null===e.value?e.defaultValue:e.value;return n.state={value:r},n}return(0,o.Z)(a,[{key:"setValue",value:function(e,t){"value"in this.props||this.setState({value:e},t)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return u.createElement(y,(0,r.Z)({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?{value:e.value}:null}}]),a}(u.Component)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdGljL2pzL25wbS5yYy10ZXh0YXJlYV9hZDIyZmQ0NjZiZTE4NzU2YzU1MS5qcyIsIm1hcHBpbmdzIjoid0hBUUlBLEUsdUhBSEFDLEVBQXdCLGlRQUN4QkMsRUFBZSxDQUFDLGlCQUFrQixjQUFlLGNBQWUsaUJBQWtCLGNBQWUsY0FBZSxZQUFhLGVBQWdCLGlCQUFrQixpQkFBa0IsUUFBUyxjQUFlLGVBQWdCLGdCQUFpQixlQUFnQixhQUFjLGNBQ3hRQyxFQUFxQixHQUVsQixTQUFTQyxFQUFxQkMsR0FDbkMsSUFBSUMsRUFBV0MsVUFBVUMsT0FBUyxRQUFzQkMsSUFBakJGLFVBQVUsSUFBbUJBLFVBQVUsR0FDMUVHLEVBQVVMLEVBQUtNLGFBQWEsT0FBU04sRUFBS00sYUFBYSxpQkFBbUJOLEVBQUtNLGFBQWEsUUFFaEcsR0FBSUwsR0FBWUgsRUFBbUJPLEdBQ2pDLE9BQU9QLEVBQW1CTyxHQUc1QixJQUFJRSxFQUFRQyxPQUFPQyxpQkFBaUJULEdBQ2hDVSxFQUFZSCxFQUFNSSxpQkFBaUIsZUFBaUJKLEVBQU1JLGlCQUFpQixvQkFBc0JKLEVBQU1JLGlCQUFpQixzQkFDeEhDLEVBQWNDLFdBQVdOLEVBQU1JLGlCQUFpQixtQkFBcUJFLFdBQVdOLEVBQU1JLGlCQUFpQixnQkFDdkdHLEVBQWFELFdBQVdOLEVBQU1JLGlCQUFpQix3QkFBMEJFLFdBQVdOLEVBQU1JLGlCQUFpQixxQkFDM0dJLEVBQWNsQixFQUFhbUIsS0FBSSxTQUFVQyxHQUMzQyxNQUFPLEdBQUdDLE9BQU9ELEVBQU0sS0FBS0MsT0FBT1gsRUFBTUksaUJBQWlCTSxPQUN6REUsS0FBSyxLQUNKQyxFQUFXLENBQ2JMLFlBQWFBLEVBQ2JILFlBQWFBLEVBQ2JFLFdBQVlBLEVBQ1pKLFVBQVdBLEdBT2IsT0FKSVQsR0FBWUksSUFDZFAsRUFBbUJPLEdBQVdlLEdBR3pCQSxFLElDckJMQyxFLG9CQUVKLFNBQVdBLEdBQ1RBLEVBQWNBLEVBQW9CLEtBQUksR0FBSyxPQUMzQ0EsRUFBY0EsRUFB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YS9lcy9jYWxjdWxhdGVOb2RlSGVpZ2h0LmpzIiwid2VicGFjazovL2JpcnRoZGF5Ly4vbm9kZV9tb2R1bGVzL3JjLXRleHRhcmVhL2VzL1Jlc2l6YWJsZVRleHRBcmVhLmpzIiwid2VicGFjazovL2JpcnRoZGF5Ly4vbm9kZV9tb2R1bGVzL3JjLXRleHRhcmVhL2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoYW5rcyB0byBodHRwczovL2dpdGh1Yi5jb20vYW5kcmV5cG9wcC9yZWFjdC10ZXh0YXJlYS1hdXRvc2l6ZS9cblxuLyoqXG4gKiBjYWxjdWxhdGVOb2RlSGVpZ2h0KHVpVGV4dE5vZGUsIHVzZUNhY2hlID0gZmFsc2UpXG4gKi9cbnZhciBISURERU5fVEVYVEFSRUFfU1RZTEUgPSBcIlxcbiAgbWluLWhlaWdodDowICFpbXBvcnRhbnQ7XFxuICBtYXgtaGVpZ2h0Om5vbmUgIWltcG9ydGFudDtcXG4gIGhlaWdodDowICFpbXBvcnRhbnQ7XFxuICB2aXNpYmlsaXR5OmhpZGRlbiAhaW1wb3J0YW50O1xcbiAgb3ZlcmZsb3c6aGlkZGVuICFpbXBvcnRhbnQ7XFxuICBwb3NpdGlvbjphYnNvbHV0ZSAhaW1wb3J0YW50O1xcbiAgei1pbmRleDotMTAwMCAhaW1wb3J0YW50O1xcbiAgdG9wOjAgIWltcG9ydGFudDtcXG4gIHJpZ2h0OjAgIWltcG9ydGFudFxcblwiO1xudmFyIFNJWklOR19TVFlMRSA9IFsnbGV0dGVyLXNwYWNpbmcnLCAnbGluZS1oZWlnaHQnLCAncGFkZGluZy10b3AnLCAncGFkZGluZy1ib3R0b20nLCAnZm9udC1mYW1pbHknLCAnZm9udC13ZWlnaHQnLCAnZm9udC1zaXplJywgJ2ZvbnQtdmFyaWFudCcsICd0ZXh0LXJlbmRlcmluZycsICd0ZXh0LXRyYW5zZm9ybScsICd3aWR0aCcsICd0ZXh0LWluZGVudCcsICdwYWRkaW5nLWxlZnQnLCAncGFkZGluZy1yaWdodCcsICdib3JkZXItd2lkdGgnLCAnYm94LXNpemluZycsICd3b3JkLWJyZWFrJ107XG52YXIgY29tcHV0ZWRTdHlsZUNhY2hlID0ge307XG52YXIgaGlkZGVuVGV4dGFyZWE7XG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlTm9kZVN0eWxpbmcobm9kZSkge1xuICB2YXIgdXNlQ2FjaGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlO1xuICB2YXIgbm9kZVJlZiA9IG5vZGUuZ2V0QXR0cmlidXRlKCdpZCcpIHx8IG5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXJlYWN0aWQnKSB8fCBub2RlLmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuXG4gIGlmICh1c2VDYWNoZSAmJiBjb21wdXRlZFN0eWxlQ2FjaGVbbm9kZVJlZl0pIHtcbiAgICByZXR1cm4gY29tcHV0ZWRTdHlsZUNhY2hlW25vZGVSZWZdO1xuICB9XG5cbiAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gIHZhciBib3hTaXppbmcgPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdib3gtc2l6aW5nJykgfHwgc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnLW1vei1ib3gtc2l6aW5nJykgfHwgc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnLXdlYmtpdC1ib3gtc2l6aW5nJyk7XG4gIHZhciBwYWRkaW5nU2l6ZSA9IHBhcnNlRmxvYXQoc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy1ib3R0b20nKSkgKyBwYXJzZUZsb2F0KHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctdG9wJykpO1xuICB2YXIgYm9yZGVyU2l6ZSA9IHBhcnNlRmxvYXQoc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnYm9yZGVyLWJvdHRvbS13aWR0aCcpKSArIHBhcnNlRmxvYXQoc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnYm9yZGVyLXRvcC13aWR0aCcpKTtcbiAgdmFyIHNpemluZ1N0eWxlID0gU0laSU5HX1NUWUxFLm1hcChmdW5jdGlvbiAobmFtZSkge1xuICAgIHJldHVybiBcIlwiLmNvbmNhdChuYW1lLCBcIjpcIikuY29uY2F0KHN0eWxlLmdldFByb3BlcnR5VmFsdWUobmFtZSkpO1xuICB9KS5qb2luKCc7Jyk7XG4gIHZhciBub2RlSW5mbyA9IHtcbiAgICBzaXppbmdTdHlsZTogc2l6aW5nU3R5bGUsXG4gICAgcGFkZGluZ1NpemU6IHBhZGRpbmdTaXplLFxuICAgIGJvcmRlclNpemU6IGJvcmRlclNpemUsXG4gICAgYm94U2l6aW5nOiBib3hTaXppbmdcbiAgfTtcblxuICBpZiAodXNlQ2FjaGUgJiYgbm9kZVJlZikge1xuICAgIGNvbXB1dGVkU3R5bGVDYWNoZVtub2RlUmVmXSA9IG5vZGVJbmZvO1xuICB9XG5cbiAgcmV0dXJuIG5vZGVJbmZvO1xufVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY2FsY3VsYXRlTm9kZUhlaWdodCh1aVRleHROb2RlKSB7XG4gIHZhciB1c2VDYWNoZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG4gIHZhciBtaW5Sb3dzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuICB2YXIgbWF4Um93cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogbnVsbDtcblxuICBpZiAoIWhpZGRlblRleHRhcmVhKSB7XG4gICAgaGlkZGVuVGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIGhpZGRlblRleHRhcmVhLnNldEF0dHJpYnV0ZSgndGFiLWluZGV4JywgJy0xJyk7XG4gICAgaGlkZGVuVGV4dGFyZWEuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChoaWRkZW5UZXh0YXJlYSk7XG4gIH0gLy8gRml4IHdyYXA9XCJvZmZcIiBpc3N1ZVxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW50LWRlc2lnbi9hbnQtZGVzaWduL2lzc3Vlcy82NTc3XG5cblxuICBpZiAodWlUZXh0Tm9kZS5nZXRBdHRyaWJ1dGUoJ3dyYXAnKSkge1xuICAgIGhpZGRlblRleHRhcmVhLnNldEF0dHJpYnV0ZSgnd3JhcCcsIHVpVGV4dE5vZGUuZ2V0QXR0cmlidXRlKCd3cmFwJykpO1xuICB9IGVsc2Uge1xuICAgIGhpZGRlblRleHRhcmVhLnJlbW92ZUF0dHJpYnV0ZSgnd3JhcCcpO1xuICB9IC8vIENvcHkgYWxsIENTUyBwcm9wZXJ0aWVzIHRoYXQgaGF2ZSBhbiBpbXBhY3Qgb24gdGhlIGhlaWdodCBvZiB0aGUgY29udGVudCBpblxuICAvLyB0aGUgdGV4dGJveFxuXG5cbiAgdmFyIF9jYWxjdWxhdGVOb2RlU3R5bGluZyA9IGNhbGN1bGF0ZU5vZGVTdHlsaW5nKHVpVGV4dE5vZGUsIHVzZUNhY2hlKSxcbiAgICAgIHBhZGRpbmdTaXplID0gX2NhbGN1bGF0ZU5vZGVTdHlsaW5nLnBhZGRpbmdTaXplLFxuICAgICAgYm9yZGVyU2l6ZSA9IF9jYWxjdWxhdGVOb2RlU3R5bGluZy5ib3JkZXJTaXplLFxuICAgICAgYm94U2l6aW5nID0gX2NhbGN1bGF0ZU5vZGVTdHlsaW5nLmJveFNpemluZyxcbiAgICAgIHNpemluZ1N0eWxlID0gX2NhbGN1bGF0ZU5vZGVTdHlsaW5nLnNpemluZ1N0eWxlOyAvLyBOZWVkIHRvIGhhdmUgdGhlIG92ZXJmbG93IGF0dHJpYnV0ZSB0byBoaWRlIHRoZSBzY3JvbGxiYXIgb3RoZXJ3aXNlXG4gIC8vIHRleHQtbGluZXMgd2lsbCBub3QgY2FsY3VsYXRlZCBwcm9wZXJseSBhcyB0aGUgc2hhZG93IHdpbGwgdGVjaG5pY2FsbHkgYmVcbiAgLy8gbmFycm93ZXIgZm9yIGNvbnRlbnRcblxuXG4gIGhpZGRlblRleHRhcmVhLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBcIlwiLmNvbmNhdChzaXppbmdTdHlsZSwgXCI7XCIpLmNvbmNhdChISURERU5fVEVYVEFSRUFfU1RZTEUpKTtcbiAgaGlkZGVuVGV4dGFyZWEudmFsdWUgPSB1aVRleHROb2RlLnZhbHVlIHx8IHVpVGV4dE5vZGUucGxhY2Vob2xkZXIgfHwgJyc7XG4gIHZhciBtaW5IZWlnaHQgPSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjtcbiAgdmFyIG1heEhlaWdodCA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuICB2YXIgaGVpZ2h0ID0gaGlkZGVuVGV4dGFyZWEuc2Nyb2xsSGVpZ2h0O1xuICB2YXIgb3ZlcmZsb3dZO1xuXG4gIGlmIChib3hTaXppbmcgPT09ICdib3JkZXItYm94Jykge1xuICAgIC8vIGJvcmRlci1ib3g6IGFkZCBib3JkZXIsIHNpbmNlIGhlaWdodCA9IGNvbnRlbnQgKyBwYWRkaW5nICsgYm9yZGVyXG4gICAgaGVpZ2h0ICs9IGJvcmRlclNpemU7XG4gIH0gZWxzZSBpZiAoYm94U2l6aW5nID09PSAnY29udGVudC1ib3gnKSB7XG4gICAgLy8gcmVtb3ZlIHBhZGRpbmcsIHNpbmNlIGhlaWdodCA9IGNvbnRlbnRcbiAgICBoZWlnaHQgLT0gcGFkZGluZ1NpemU7XG4gIH1cblxuICBpZiAobWluUm93cyAhPT0gbnVsbCB8fCBtYXhSb3dzICE9PSBudWxsKSB7XG4gICAgLy8gbWVhc3VyZSBoZWlnaHQgb2YgYSB0ZXh0YXJlYSB3aXRoIGEgc2luZ2xlIHJvd1xuICAgIGhpZGRlblRleHRhcmVhLnZhbHVlID0gJyAnO1xuICAgIHZhciBzaW5nbGVSb3dIZWlnaHQgPSBoaWRkZW5UZXh0YXJlYS5zY3JvbGxIZWlnaHQgLSBwYWRkaW5nU2l6ZTtcblxuICAgIGlmIChtaW5Sb3dzICE9PSBudWxsKSB7XG4gICAgICBtaW5IZWlnaHQgPSBzaW5nbGVSb3dIZWlnaHQgKiBtaW5Sb3dzO1xuXG4gICAgICBpZiAoYm94U2l6aW5nID09PSAnYm9yZGVyLWJveCcpIHtcbiAgICAgICAgbWluSGVpZ2h0ID0gbWluSGVpZ2h0ICsgcGFkZGluZ1NpemUgKyBib3JkZXJTaXplO1xuICAgICAgfVxuXG4gICAgICBoZWlnaHQgPSBNYXRoLm1heChtaW5IZWlnaHQsIGhlaWdodCk7XG4gICAgfVxuXG4gICAgaWYgKG1heFJvd3MgIT09IG51bGwpIHtcbiAgICAgIG1heEhlaWdodCA9IHNpbmdsZVJvd0hlaWdodCAqIG1heFJvd3M7XG5cbiAgICAgIGlmIChib3hTaXppbmcgPT09ICdib3JkZXItYm94Jykge1xuICAgICAgICBtYXhIZWlnaHQgPSBtYXhIZWlnaHQgKyBwYWRkaW5nU2l6ZSArIGJvcmRlclNpemU7XG4gICAgICB9XG5cbiAgICAgIG92ZXJmbG93WSA9IGhlaWdodCA+IG1heEhlaWdodCA/ICcnIDogJ2hpZGRlbic7XG4gICAgICBoZWlnaHQgPSBNYXRoLm1pbihtYXhIZWlnaHQsIGhlaWdodCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICBtaW5IZWlnaHQ6IG1pbkhlaWdodCxcbiAgICBtYXhIZWlnaHQ6IG1heEhlaWdodCxcbiAgICBvdmVyZmxvd1k6IG92ZXJmbG93WSxcbiAgICByZXNpemU6ICdub25lJ1xuICB9O1xufSIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVja1wiO1xuaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3NcIjtcbmltcG9ydCBfaW5oZXJpdHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzXCI7XG5pbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlclwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gJ3JjLXJlc2l6ZS1vYnNlcnZlcic7XG5pbXBvcnQgb21pdCBmcm9tIFwicmMtdXRpbC9lcy9vbWl0XCI7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBjYWxjdWxhdGVOb2RlSGVpZ2h0IGZyb20gJy4vY2FsY3VsYXRlTm9kZUhlaWdodCc7XG5pbXBvcnQgc2hhbGxvd0VxdWFsIGZyb20gJ3NoYWxsb3dlcXVhbCc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cblxudmFyIFJFU0laRV9TVEFUVVM7XG5cbihmdW5jdGlvbiAoUkVTSVpFX1NUQVRVUykge1xuICBSRVNJWkVfU1RBVFVTW1JFU0laRV9TVEFUVVNbXCJOT05FXCJdID0gMF0gPSBcIk5PTkVcIjtcbiAgUkVTSVpFX1NUQVRVU1tSRVNJWkVfU1RBVFVTW1wiUkVTSVpJTkdcIl0gPSAxXSA9IFwiUkVTSVpJTkdcIjtcbiAgUkVTSVpFX1NUQVRVU1tSRVNJWkVfU1RBVFVTW1wiUkVTSVpFRFwiXSA9IDJdID0gXCJSRVNJWkVEXCI7XG59KShSRVNJWkVfU1RBVFVTIHx8IChSRVNJWkVfU1RBVFVTID0ge30pKTtcblxudmFyIFJlc2l6YWJsZVRleHRBcmVhID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhSZXNpemFibGVUZXh0QXJlYSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihSZXNpemFibGVUZXh0QXJlYSk7XG5cbiAgZnVuY3Rpb24gUmVzaXphYmxlVGV4dEFyZWEocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVzaXphYmxlVGV4dEFyZWEpO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7XG4gICAgX3RoaXMubmV4dEZyYW1lQWN0aW9uSWQgPSB2b2lkIDA7XG4gICAgX3RoaXMucmVzaXplRnJhbWVJZCA9IHZvaWQgMDtcbiAgICBfdGhpcy50ZXh0QXJlYSA9IHZvaWQgMDtcblxuICAgIF90aGlzLnNhdmVUZXh0QXJlYSA9IGZ1bmN0aW9uICh0ZXh0QXJlYSkge1xuICAgICAgX3RoaXMudGV4dEFyZWEgPSB0ZXh0QXJlYTtcbiAgICB9O1xuXG4gICAgX3RoaXMuaGFuZGxlUmVzaXplID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICAgIHZhciByZXNpemVTdGF0dXMgPSBfdGhpcy5zdGF0ZS5yZXNpemVTdGF0dXM7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICBhdXRvU2l6ZSA9IF90aGlzJHByb3BzLmF1dG9TaXplLFxuICAgICAgICAgIG9uUmVzaXplID0gX3RoaXMkcHJvcHMub25SZXNpemU7XG5cbiAgICAgIGlmIChyZXNpemVTdGF0dXMgIT09IFJFU0laRV9TVEFUVVMuTk9ORSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygb25SZXNpemUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgb25SZXNpemUoc2l6ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChhdXRvU2l6ZSkge1xuICAgICAgICBfdGhpcy5yZXNpemVPbk5leHRGcmFtZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5yZXNpemVPbk5leHRGcmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKF90aGlzLm5leHRGcmFtZUFjdGlvbklkKTtcbiAgICAgIF90aGlzLm5leHRGcmFtZUFjdGlvbklkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKF90aGlzLnJlc2l6ZVRleHRhcmVhKTtcbiAgICB9O1xuXG4gICAgX3RoaXMucmVzaXplVGV4dGFyZWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXV0b1NpemUgPSBfdGhpcy5wcm9wcy5hdXRvU2l6ZTtcblxuICAgICAgaWYgKCFhdXRvU2l6ZSB8fCAhX3RoaXMudGV4dEFyZWEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgbWluUm93cyA9IGF1dG9TaXplLm1pblJvd3MsXG4gICAgICAgICAgbWF4Um93cyA9IGF1dG9TaXplLm1heFJvd3M7XG4gICAgICB2YXIgdGV4dGFyZWFTdHlsZXMgPSBjYWxjdWxhdGVOb2RlSGVpZ2h0KF90aGlzLnRleHRBcmVhLCBmYWxzZSwgbWluUm93cywgbWF4Um93cyk7XG5cbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdGV4dGFyZWFTdHlsZXM6IHRleHRhcmVhU3R5bGVzLFxuICAgICAgICByZXNpemVTdGF0dXM6IFJFU0laRV9TVEFUVVMuUkVTSVpJTkdcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoX3RoaXMucmVzaXplRnJhbWVJZCk7XG4gICAgICAgIF90aGlzLnJlc2l6ZUZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHJlc2l6ZVN0YXR1czogUkVTSVpFX1NUQVRVUy5SRVNJWkVEXG4gICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucmVzaXplRnJhbWVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICByZXNpemVTdGF0dXM6IFJFU0laRV9TVEFUVVMuTk9ORVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBfdGhpcy5maXhGaXJlZm94QXV0b1Njcm9sbCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLnJlbmRlclRleHRBcmVhID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzMiA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIF90aGlzJHByb3BzMiRwcmVmaXhDbCA9IF90aGlzJHByb3BzMi5wcmVmaXhDbHMsXG4gICAgICAgICAgcHJlZml4Q2xzID0gX3RoaXMkcHJvcHMyJHByZWZpeENsID09PSB2b2lkIDAgPyAncmMtdGV4dGFyZWEnIDogX3RoaXMkcHJvcHMyJHByZWZpeENsLFxuICAgICAgICAgIGF1dG9TaXplID0gX3RoaXMkcHJvcHMyLmF1dG9TaXplLFxuICAgICAgICAgIG9uUmVzaXplID0gX3RoaXMkcHJvcHMyLm9uUmVzaXplLFxuICAgICAgICAgIGNsYXNzTmFtZSA9IF90aGlzJHByb3BzMi5jbGFzc05hbWUsXG4gICAgICAgICAgZGlzYWJsZWQgPSBfdGhpcyRwcm9wczIuZGlzYWJsZWQ7XG4gICAgICB2YXIgX3RoaXMkc3RhdGUgPSBfdGhpcy5zdGF0ZSxcbiAgICAgICAgICB0ZXh0YXJlYVN0eWxlcyA9IF90aGlzJHN0YXRlLnRleHRhcmVhU3R5bGVzLFxuICAgICAgICAgIHJlc2l6ZVN0YXR1cyA9IF90aGlzJHN0YXRlLnJlc2l6ZVN0YXR1cztcbiAgICAgIHZhciBvdGhlclByb3BzID0gb21pdChfdGhpcy5wcm9wcywgWydwcmVmaXhDbHMnLCAnb25QcmVzc0VudGVyJywgJ2F1dG9TaXplJywgJ2RlZmF1bHRWYWx1ZScsICdvblJlc2l6ZSddKTtcbiAgICAgIHZhciBjbHMgPSBjbGFzc05hbWVzKHByZWZpeENscywgY2xhc3NOYW1lLCBfZGVmaW5lUHJvcGVydHkoe30sIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItZGlzYWJsZWRcIiksIGRpc2FibGVkKSk7IC8vIEZpeCBodHRwczovL2dpdGh1Yi5jb20vYW50LWRlc2lnbi9hbnQtZGVzaWduL2lzc3Vlcy82Nzc2XG4gICAgICAvLyBNYWtlIHN1cmUgaXQgY291bGQgYmUgcmVzZXQgd2hlbiB1c2luZyBmb3JtLmdldEZpZWxkRGVjb3JhdG9yXG5cbiAgICAgIGlmICgndmFsdWUnIGluIG90aGVyUHJvcHMpIHtcbiAgICAgICAgb3RoZXJQcm9wcy52YWx1ZSA9IG90aGVyUHJvcHMudmFsdWUgfHwgJyc7XG4gICAgICB9XG5cbiAgICAgIHZhciBzdHlsZSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5wcm9wcy5zdHlsZSksIHRleHRhcmVhU3R5bGVzKSwgcmVzaXplU3RhdHVzID09PSBSRVNJWkVfU1RBVFVTLlJFU0laSU5HID8gLy8gUmVhY3Qgd2lsbCB3YXJuaW5nIHdoZW4gbWl4IGBvdmVyZmxvd2AgJiBgb3ZlcmZsb3dZYC5cbiAgICAgIC8vIFdlIG5lZWQgdG8gZGVmaW5lIHRoaXMgc2VwYXJhdGVseS5cbiAgICAgIHtcbiAgICAgICAgb3ZlcmZsb3dYOiAnaGlkZGVuJyxcbiAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJ1xuICAgICAgfSA6IG51bGwpO1xuXG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVzaXplT2JzZXJ2ZXIsIHtcbiAgICAgICAgb25SZXNpemU6IF90aGlzLmhhbmRsZVJlc2l6ZSxcbiAgICAgICAgZGlzYWJsZWQ6ICEoYXV0b1NpemUgfHwgb25SZXNpemUpXG4gICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIsIF9leHRlbmRzKHt9LCBvdGhlclByb3BzLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY2xzLFxuICAgICAgICBzdHlsZTogc3R5bGUsXG4gICAgICAgIHJlZjogX3RoaXMuc2F2ZVRleHRBcmVhXG4gICAgICB9KSkpO1xuICAgIH07XG5cbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHRleHRhcmVhU3R5bGVzOiB7fSxcbiAgICAgIHJlc2l6ZVN0YXR1czogUkVTSVpFX1NUQVRVUy5OT05FXG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUmVzaXphYmxlVGV4dEFyZWEsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudERpZFVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgICAvLyBSZS1yZW5kZXIgd2l0aCB0aGUgbmV3IGNvbnRlbnQgb3IgbmV3IGF1dG9TaXplIHByb3BlcnR5IHRoZW4gcmVjYWxjdWxhdGUgdGhlIGhlaWdodCBhcyByZXF1aXJlZC5cbiAgICAgIGlmIChwcmV2UHJvcHMudmFsdWUgIT09IHRoaXMucHJvcHMudmFsdWUgfHwgIXNoYWxsb3dFcXVhbChwcmV2UHJvcHMuYXV0b1NpemUsIHRoaXMucHJvcHMuYXV0b1NpemUpKSB7XG4gICAgICAgIHRoaXMucmVzaXplVGV4dGFyZWEoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLm5leHRGcmFtZUFjdGlvbklkKTtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmVzaXplRnJhbWVJZCk7XG4gICAgfSAvLyBodHRwczovL2dpdGh1Yi5jb20vYW50LWRlc2lnbi9hbnQtZGVzaWduL2lzc3Vlcy8yMTg3MFxuXG4gIH0sIHtcbiAgICBrZXk6IFwiZml4RmlyZWZveEF1dG9TY3JvbGxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZml4RmlyZWZveEF1dG9TY3JvbGwoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGhpcy50ZXh0QXJlYSkge1xuICAgICAgICAgIHZhciBjdXJyZW50U3RhcnQgPSB0aGlzLnRleHRBcmVhLnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICAgIHZhciBjdXJyZW50RW5kID0gdGhpcy50ZXh0QXJlYS5zZWxlY3Rpb25FbmQ7XG4gICAgICAgICAgdGhpcy50ZXh0QXJlYS5zZXRTZWxlY3Rpb25SYW5nZShjdXJyZW50U3RhcnQsIGN1cnJlbnRFbmQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7Ly8gRml4IGVycm9yIGluIENocm9tZTpcbiAgICAgICAgLy8gRmFpbGVkIHRvIHJlYWQgdGhlICdzZWxlY3Rpb25TdGFydCcgcHJvcGVydHkgZnJvbSAnSFRNTElucHV0RWxlbWVudCdcbiAgICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMjExNzc0ODkvMzA0MDYwNVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyVGV4dEFyZWEoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUmVzaXphYmxlVGV4dEFyZWE7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbmV4cG9ydCBkZWZhdWx0IFJlc2l6YWJsZVRleHRBcmVhOyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2tcIjtcbmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzXCI7XG5pbXBvcnQgX2luaGVyaXRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c1wiO1xuaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXJcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZXNpemFibGVUZXh0QXJlYSBmcm9tICcuL1Jlc2l6YWJsZVRleHRBcmVhJztcblxudmFyIFRleHRBcmVhID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhUZXh0QXJlYSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihUZXh0QXJlYSk7XG5cbiAgZnVuY3Rpb24gVGV4dEFyZWEocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGV4dEFyZWEpO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7XG4gICAgX3RoaXMucmVzaXphYmxlVGV4dEFyZWEgPSB2b2lkIDA7XG5cbiAgICBfdGhpcy5mb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnJlc2l6YWJsZVRleHRBcmVhLnRleHRBcmVhLmZvY3VzKCk7XG4gICAgfTtcblxuICAgIF90aGlzLnNhdmVUZXh0QXJlYSA9IGZ1bmN0aW9uIChyZXNpemFibGVUZXh0QXJlYSkge1xuICAgICAgX3RoaXMucmVzaXphYmxlVGV4dEFyZWEgPSByZXNpemFibGVUZXh0QXJlYTtcbiAgICB9O1xuXG4gICAgX3RoaXMuaGFuZGxlQ2hhbmdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBvbkNoYW5nZSA9IF90aGlzLnByb3BzLm9uQ2hhbmdlO1xuXG4gICAgICBfdGhpcy5zZXRWYWx1ZShlLnRhcmdldC52YWx1ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5yZXNpemFibGVUZXh0QXJlYS5yZXNpemVUZXh0YXJlYSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChvbkNoYW5nZSkge1xuICAgICAgICBvbkNoYW5nZShlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMuaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICBvblByZXNzRW50ZXIgPSBfdGhpcyRwcm9wcy5vblByZXNzRW50ZXIsXG4gICAgICAgICAgb25LZXlEb3duID0gX3RoaXMkcHJvcHMub25LZXlEb3duO1xuXG4gICAgICBpZiAoZS5rZXlDb2RlID09PSAxMyAmJiBvblByZXNzRW50ZXIpIHtcbiAgICAgICAgb25QcmVzc0VudGVyKGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAob25LZXlEb3duKSB7XG4gICAgICAgIG9uS2V5RG93bihlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHZhbHVlID0gdHlwZW9mIHByb3BzLnZhbHVlID09PSAndW5kZWZpbmVkJyB8fCBwcm9wcy52YWx1ZSA9PT0gbnVsbCA/IHByb3BzLmRlZmF1bHRWYWx1ZSA6IHByb3BzLnZhbHVlO1xuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgdmFsdWU6IHZhbHVlXG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoVGV4dEFyZWEsIFt7XG4gICAga2V5OiBcInNldFZhbHVlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKHZhbHVlLCBjYWxsYmFjaykge1xuICAgICAgaWYgKCEoJ3ZhbHVlJyBpbiB0aGlzLnByb3BzKSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgfSwgY2FsbGJhY2spO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJibHVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGJsdXIoKSB7XG4gICAgICB0aGlzLnJlc2l6YWJsZVRleHRBcmVhLnRleHRBcmVhLmJsdXIoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZXNpemFibGVUZXh0QXJlYSwgX2V4dGVuZHMoe30sIHRoaXMucHJvcHMsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUudmFsdWUsXG4gICAgICAgIG9uS2V5RG93bjogdGhpcy5oYW5kbGVLZXlEb3duLFxuICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVDaGFuZ2UsXG4gICAgICAgIHJlZjogdGhpcy5zYXZlVGV4dEFyZWFcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogXCJnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcykge1xuICAgICAgaWYgKCd2YWx1ZScgaW4gbmV4dFByb3BzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsdWU6IG5leHRQcm9wcy52YWx1ZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVGV4dEFyZWE7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbmV4cG9ydCB7IFJlc2l6YWJsZVRleHRBcmVhIH07XG5leHBvcnQgZGVmYXVsdCBUZXh0QXJlYTsiXSwibmFtZXMiOlsiaGlkZGVuVGV4dGFyZWEiLCJISURERU5fVEVYVEFSRUFfU1RZTEUiLCJTSVpJTkdfU1RZTEUiLCJjb21wdXRlZFN0eWxlQ2FjaGUiLCJjYWxjdWxhdGVOb2RlU3R5bGluZyIsIm5vZGUiLCJ1c2VDYWNoZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm5vZGVSZWYiLCJnZXRBdHRyaWJ1dGUiLCJzdHlsZSIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJib3hTaXppbmciLCJnZXRQcm9wZXJ0eVZhbHVlIiwicGFkZGluZ1NpemUiLCJwYXJzZUZsb2F0IiwiYm9yZGVyU2l6ZSIsInNpemluZ1N0eWxlIiwibWFwIiwibmFtZSIsImNvbmNhdCIsImpvaW4iLCJub2RlSW5mbyIsIlJFU0laRV9TVEFUVVMiLCJfUmVhY3QkQ29tcG9uZW50IiwiUmVzaXphYmxlVGV4dEFyZWEiLCJfc3VwZXIiLCJwcm9wcyIsIl90aGlzIiwidGhpcyIsImNhbGwiLCJuZXh0RnJhbWVBY3Rpb25JZCIsInJlc2l6ZUZyYW1lSWQiLCJ0ZXh0QXJlYSIsInNhdmVUZXh0QXJlYSIsImhhbmRsZVJlc2l6ZSIsInNpemUiLCJyZXNpemVTdGF0dXMiLCJzdGF0ZSIsIl90aGlzJHByb3BzIiwiYXV0b1NpemUiLCJvblJlc2l6ZSIsIk5PTkUiLCJyZXNpemVPbk5leHRGcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmVzaXplVGV4dGFyZWEiLCJtaW5Sb3dzIiwibWF4Um93cyIsInRleHRhcmVhU3R5bGVzIiwidWlUZXh0Tm9kZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInJlbW92ZUF0dHJpYnV0ZSIsIl9jYWxjdWxhdGVOb2RlU3R5bGluZyIsInZhbHVlIiwicGxhY2Vob2xkZXIiLCJvdmVyZmxvd1kiLCJtaW5IZWlnaHQiLCJOdW1iZXIiLCJNSU5fU0FGRV9JTlRFR0VSIiwibWF4SGVpZ2h0IiwiTUFYX1NBRkVfSU5URUdFUiIsImhlaWdodCIsInNjcm9sbEhlaWdodCIsInNpbmdsZVJvd0hlaWdodCIsIk1hdGgiLCJtYXgiLCJtaW4iLCJyZXNpemUiLCJjYWxjdWxhdGVOb2RlSGVpZ2h0Iiwic2V0U3RhdGUiLCJSRVNJWklORyIsIlJFU0laRUQiLCJmaXhGaXJlZm94QXV0b1Njcm9sbCIsInJlbmRlclRleHRBcmVhIiwiX3RoaXMkcHJvcHMyIiwiX3RoaXMkcHJvcHMyJHByZWZpeENsIiwicHJlZml4Q2xzIiwiY2xhc3NOYW1lIiwiZGlzYWJsZWQiLCJfdGhpcyRzdGF0ZSIsIm90aGVyUHJvcHMiLCJvbWl0IiwiY2xzIiwib3ZlcmZsb3dYIiwicmVmIiwia2V5IiwicHJldlByb3BzIiwiYWN0aXZlRWxlbWVudCIsImN1cnJlbnRTdGFydCIsInNlbGVjdGlvblN0YXJ0IiwiY3VycmVudEVuZCIsInNlbGVjdGlvbkVuZCIsInNldFNlbGVjdGlvblJhbmdlIiwiZSIsIlRleHRBcmVhIiwicmVzaXphYmxlVGV4dEFyZWEiLCJmb2N1cyIsImhhbmRsZUNoYW5nZSIsIm9uQ2hhbmdlIiwic2V0VmFsdWUiLCJ0YXJnZXQiLCJoYW5kbGVLZXlEb3duIiwib25QcmVzc0VudGVyIiwib25LZXlEb3duIiwia2V5Q29kZSIsImRlZmF1bHRWYWx1ZSIsImNhbGxiYWNrIiwiYmx1ciIsIm5leHRQcm9wcyJdLCJzb3VyY2VSb290IjoiIn0=